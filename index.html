<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAIRGATOR - Blog Automation v3.0</title>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary: #2563eb;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --gray-50: #f8fafc;
            --gray-200: #e2e8f0;
            --gray-600: #475569;
            --gray-800: #1e293b;
            --gray-900: #0f172a;
            --white: #ffffff;
            --shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--gray-50);
            min-height: 100vh;
            line-height: 1.6;
            color: var(--gray-800);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            display: grid;
            grid-template-columns: 350px 1fr;
            gap: 2rem;
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            margin-bottom: 2rem;
            padding: 2rem;
            background: var(--white);
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        .header h1 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--gray-900);
            margin-bottom: 0.5rem;
        }

        .header .subtitle {
            font-size: 1.1rem;
            color: var(--gray-600);
            font-weight: 500;
        }

        .sidebar {
            background: var(--white);
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            height: fit-content;
        }

        .main-content {
            background: var(--white);
            border-radius: 12px;
            padding: 2rem;
            box-shadow: var(--shadow);
        }

        .section {
            margin-bottom: 2rem;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--gray-800);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 0.5rem;
        }

        .form-group {
            margin-bottom: 1rem;
        }

        .form-label {
            display: block;
            font-weight: 600;
            margin-bottom: 0.5rem;
            color: var(--gray-700);
            font-size: 0.9rem;
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--white);
            transition: border-color 0.3s;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 0.9rem;
        }

        .btn:hover {
            background: #1d4ed8;
        }

        .btn:disabled {
            background: var(--gray-200) !important;
            color: var(--gray-600) !important;
            cursor: not-allowed !important;
        }

        .btn-full {
            width: 100%;
        }

        .btn-success {
            background: var(--success);
        }

        .btn-success:hover {
            background: #059669;
        }

        .btn-danger {
            background: var(--danger);
        }

        .btn-danger:hover {
            background: #dc2626;
        }

        .btn-warning {
            background: var(--warning);
        }

        .btn-warning:hover {
            background: #d97706;
        }

        .btn-sm {
            padding: 0.5rem 1rem;
            font-size: 0.8rem;
        }

        .platform-tabs {
            display: flex;
            gap: 0.5rem;
            margin-bottom: 1.5rem;
            padding: 0.25rem;
            background: var(--gray-50);
            border-radius: 8px;
        }

        .platform-tab {
            background: none;
            border: none;
            padding: 0.75rem 1rem;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
            color: var(--gray-600);
            flex: 1;
            text-align: center;
        }

        .platform-tab.active {
            background: var(--white);
            color: var(--primary);
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }

        .platform-content {
            display: none;
        }

        .platform-content.active {
            display: block;
        }

        .editor {
            width: 100%;
            min-height: 400px;
            padding: 1rem;
            border: 1px solid var(--gray-200);
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 0.9rem;
            resize: vertical;
            background: #1a1a1a;
            color: #e2e8f0;
        }

        .editor:focus {
            outline: none;
            border-color: var(--primary);
        }

        .topic-list {
            list-style: none;
        }

        .topic-item {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .topic-content span {
            font-weight: 600;
        }

        .topic-actions {
            display: flex;
            gap: 0.5rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 1rem;
            margin-bottom: 1.5rem;
        }

        .stat-card {
            background: var(--gray-50);
            border-radius: 8px;
            padding: 1rem;
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary);
            margin-bottom: 0.25rem;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray-600);
            font-weight: 600;
        }

        .alert {
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 1rem;
            font-weight: 500;
        }

        .alert-info {
            background: #eff6ff;
            color: #1e40af;
            border: 1px solid #bfdbfe;
        }

        .alert-success {
            background: #f0fdf4;
            color: #166534;
            border: 1px solid #bbf7d0;
        }

        .alert-warning {
            background: #fffbeb;
            color: #92400e;
            border: 1px solid #fed7aa;
        }

        .alert-danger {
            background: #fef2f2;
            color: #991b1b;
            border: 1px solid #fecaca;
        }

        .quality-indicator {
            padding: 0.75rem;
            border-radius: 6px;
            margin-bottom: 0.75rem;
            font-size: 0.85rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .quality-excellent {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #166534;
        }

        .quality-good {
            background: #eff6ff;
            border: 1px solid #bfdbfe;
            color: #1e40af;
        }

        .quality-warning {
            background: #fffbeb;
            border: 1px solid #fed7aa;
            color: #92400e;
        }

        .quality-danger {
            background: #fef2f2;
            border: 1px solid #fecaca;
            color: #991b1b;
        }

        .floating-alert {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
            padding: 1rem 1.25rem;
            border-radius: 8px;
            font-weight: 500;
            box-shadow: 0 10px 25px rgba(0,0,0,0.15);
            cursor: pointer;
            white-space: pre-line;
            line-height: 1.4;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
                padding: 1rem;
            }
            
            .platform-tabs {
                flex-direction: column;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .topic-item {
                flex-direction: column;
                gap: 0.75rem;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>HAIRGATOR</h1>
            <div class="subtitle">Enhanced Blog Automation v3.0 - ë³´ì•ˆ ê°•í™”</div>
        </div>

        <div class="alert alert-info" style="grid-column: 1 / -1;">
            <strong>v3.0 ê°•í™” ì‹œìŠ¤í…œ</strong><br>
            ë³´ì•ˆ ì·¨ì•½ì  í•´ê²° + ë„¤ì´ë²„ í’ˆì§ˆ ì •ì±… ì™„ì „ ì¤€ìˆ˜ + ë ˆì´íŠ¸ë¦¬ë°‹ ë³µì› + JSON-LD ìë™ ìƒì„±
        </div>

        <div class="sidebar">
            <div class="section">
                <div class="section-title">AI ì„¤ì •</div>
                <div style="background: var(--gray-50); padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                    <label style="display: flex; align-items: center; margin-bottom: 0.5rem; cursor: pointer;">
                        <input type="radio" name="ai-service" value="claude" checked style="margin-right: 0.5rem;">
                        <span>Claude (í…ìŠ¤íŠ¸ ìƒì„±)</span>
                    </label>
                    <label style="display: flex; align-items: center; cursor: pointer;">
                        <input type="radio" name="ai-service" value="openai" style="margin-right: 0.5rem;">
                        <span>ChatGPT (ì´ë¯¸ì§€ ìƒì„±)</span>
                    </label>
                </div>
                <div style="font-size: 0.8rem; color: var(--gray-600); margin-top: 0.5rem;">
                    Claude: ì „ë¬¸ í—¤ì–´ì¼€ì–´ í…ìŠ¤íŠ¸ ì‘ì„±<br>
                    ChatGPT: ë¸”ë¡œê·¸ìš© ì´ë¯¸ì§€ ìë™ ìƒì„±
                </div>
            </div>

            <div class="section">
                <div class="section-title">í’ˆì§ˆ ì§€í‘œ</div>
                <div class="quality-indicator quality-good">
                    E-E-A-T ì ìˆ˜: <span id="eeat-score">ëŒ€ê¸°ì¤‘</span>
                </div>
                <div class="quality-indicator quality-good">
                    SEO ìµœì í™”: <span id="seo-score">ëŒ€ê¸°ì¤‘</span>
                </div>
                <div class="quality-indicator quality-excellent">
                    ê¸ˆì§€ì–´ ê²€ì‚¬: <span id="banned-count">í†µê³¼</span>
                </div>
                <div class="quality-indicator quality-good">
                    ë°œí–‰ ì œí•œ: <span id="rate-limit">ëŒ€ê¸°ì¤‘</span>
                </div>
            </div>

            <div class="section">
                <div class="section-title">ì£¼ì œ ê´€ë¦¬</div>
                <div class="form-group">
                    <input type="text" class="form-input" id="topic-input" placeholder="ìƒˆ ì£¼ì œë¥¼ ì…ë ¥í•˜ì„¸ìš”">
                </div>
                <button class="btn btn-full" onclick="addTopic()">ì£¼ì œ ì¶”ê°€</button>
            </div>

            <div class="section">
                <div class="section-title">í˜„í™©</div>
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="today-posts">0</div>
                        <div class="stat-label">ìƒì„±ëœ ê¸€</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="total-topics">5</div>
                        <div class="stat-label">ë“±ë¡ ì£¼ì œ</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">ë¹ ë¥¸ ì‘ì—…</div>
                <button class="btn btn-full" onclick="generateRandom()" style="margin-bottom: 0.75rem;">
                    ëœë¤ ê¸€ ìƒì„±
                </button>
                <button class="btn btn-success btn-full" id="publish-btn" onclick="publish()">
                    ë¸”ë¡œê·¸ ë°œí–‰
                </button>
            </div>
        </div>

        <div class="main-content">
            <div class="section">
                <div class="section-title">í”Œë«í¼ ì„ íƒ</div>
                <div class="platform-tabs">
                    <button class="platform-tab active" onclick="selectPlatform('naver')">
                        ë„¤ì´ë²„ ë¸”ë¡œê·¸
                    </button>
                </div>

                <div id="naver-content" class="platform-content active">
                    <div class="alert alert-info">
                        <strong>ë„¤ì´ë²„ í’ˆì§ˆ ì •ì±… ì™„ì „ ì¤€ìˆ˜</strong><br>
                        ê°•í™”ëœ ê¸ˆì§€ì–´ í•„í„°, í•œê¸€ í† í°í™”, E-E-A-T êµ¬ì¡° ê²€ì¦ì´ ì ìš©ëœ ê³ í’ˆì§ˆ ì½˜í…ì¸ ë¥¼ ìƒì„±í•©ë‹ˆë‹¤.
                    </div>
                </div>
            </div>

            <div class="section">
                <div class="section-title">AI ê¸€ ìƒì„±</div>
                <div class="form-group">
                    <label class="form-label">ì£¼ì œ ì„ íƒ</label>
                    <select class="form-input" id="topic-select">
                        <option value="">ì£¼ì œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>
                    </select>
                </div>
                <button class="btn" onclick="generatePost()">
                    ë³´ì•ˆ ê°•í™” ê¸€ ìƒì„±
                </button>
            </div>

            <div class="section">
                <div class="section-title">ì—ë””í„°</div>
                
                <div id="quality-panel" style="margin-bottom: 1rem; display: none;">
                    <div id="quality-results"></div>
                </div>

                <textarea class="editor" id="editor-content" placeholder="HAIRGATOR v3.0 - ë³´ì•ˆ ê°•í™” & ë„¤ì´ë²„ ì •ì±… ì™„ì „ ì¤€ìˆ˜

v3.0 ì£¼ìš” ê°œì„ ì‚¬í•­:
â€¢ ê°•í™”ëœ ê¸ˆì§€ì–´ í•„í„° (ë³€í˜•ì–´, ê³¼ì¥ í‘œí˜„ ì°¨ë‹¨)
â€¢ í•œêµ­ì–´ í† í°í™” ê°œì„  (ì¡°ì‚¬/ì–´ë¯¸ ë³€í™” ëŒ€ì‘)
â€¢ E-E-A-T êµ¬ì¡° ê¸°ë°˜ ì ìˆ˜ (ì„¹ì…˜ êµ¬ì¡° + ê·¼ê±° ë§í¬)
â€¢ JSON-LD ìë™ ìƒì„± (Schema.org ì¤€ìˆ˜)
â€¢ ë°œí–‰ ë ˆì´íŠ¸ë¦¬ë°‹ ë³µì› (ë„ë°° ë°©ì§€)
â€¢ ë°œí–‰ ê²Œì´íŠ¸ ì‹œìŠ¤í…œ (í’ˆì§ˆ ë¯¸ë‹¬ ì‹œ ì°¨ë‹¨)

AI ê¸€ ìƒì„±ì„ í´ë¦­í•˜ì‹œë©´ ì™„ì „íˆ ê°œì„ ëœ ì „ë¬¸ í—¤ì–´ì¼€ì–´ ì½˜í…ì¸ ê°€ ìƒì„±ë©ë‹ˆë‹¤."></textarea>
                
                <div style="display: flex; gap: 0.75rem; margin-top: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-sm" onclick="copyContent()">ë³µì‚¬</button>
                    <button class="btn btn-sm" onclick="saveDraft()">ì €ì¥</button>
                    <button class="btn btn-sm" onclick="previewContent()">ë¯¸ë¦¬ë³´ê¸°</button>
                    <button class="btn btn-sm btn-warning" onclick="checkQuality()">í’ˆì§ˆ ê²€ì‚¬</button>
                </div>
            </div>

            <div class="section">
                <div class="section-title">ì£¼ì œ ëª©ë¡</div>
                <ul id="topic-list" class="topic-list">
                </ul>
            </div>
        </div>
    </div>

    <script>
        // ì „ì—­ ë³€ìˆ˜ (UI ìœ ì§€)
        var currentPlatform = 'naver';
        var currentAI = 'claude';
        var topics = [
            'ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œ ê´€ë¦¬ë²•',
            'ì—¼ìƒ‰ í›„ ì˜¬ë°”ë¥¸ í—¤ì–´ì¼€ì–´',
            'íƒˆëª¨ ì˜ˆë°©ì„ ìœ„í•œ ìƒí™œ ìŠµê´€',
            '2024ë…„ ë´„ í—¤ì–´ìŠ¤íƒ€ì¼ íŠ¸ë Œë“œ',
            'ì§‘ì—ì„œ í•  ìˆ˜ ìˆëŠ” í—¤ì–´íŒ© ë§Œë“¤ê¸°'
        ];
        var todayPosts = 0;

        // ===============================
        // v3.0 ë³´ì•ˆ ê°•í™” ê¸°ëŠ¥ë“¤
        // ===============================

        // ê°•í™”ëœ ê¸ˆì§€ì–´ í•„í„° (ë³€í˜•Â·ê³¼ì¥ì–´Â·ìˆ«ì ê³¼ì¥)
        var BANNED_PATTERNS = [
            /(ì™„ì „|ì™„ë²½|ê¶ê·¹|ì´ˆê¶ê·¹)\s*(ì˜)?\s*ê°€ì´ë“œ/g,
            /(ê·¹ì |ë†€ë¼ìš´|ê¸°ì |ë§ˆë²•)\w*/g,
            /(ì¦‰ì‹œ|ë°”ë¡œ)\s*íš¨ê³¼/g,
            /(100\s*%|ì ˆëŒ€(?!ê°’)|ì™„ì „(í•œ)?\s*ì¹˜ë£Œ)/g,
            /(ì˜í•™ì |ê³¼í•™ì )\s*(ìœ¼)?ë¡œ?\s*(ì…ì¦|ì¦ëª…)/g
        ];

        var MEDICAL_CLAIMS = [
            'ì¹˜ë£Œí•œë‹¤', 'ì™„ì¹˜', 'ì¹˜ë£Œ íš¨ê³¼', 'ì˜í•™ì  íš¨ê³¼',
            'ì§ˆë³‘ ì˜ˆë°©', 'ë³‘ì„ ë‚«ê²Œ', 'ì§ˆí™˜ ì¹˜ë£Œ',
            'ì•½ë¬¼ íš¨ê³¼', 'ë¶€ì‘ìš© ì—†ì´', 'ì•ˆì „í•˜ê²Œ ì¹˜ë£Œ'
        ];

        function checkBannedWords(content) {
            var found = [];
            
            // ì •ê·œì‹ íŒ¨í„´ ê²€ì‚¬
            BANNED_PATTERNS.forEach(function(re) {
                var matches = content.match(re);
                if (matches) found.push.apply(found, matches);
            });
            
            // ì˜í•™Â·ì¹˜ë£Œ ê³¼ëŒ€í‘œí˜„ ê²€ì‚¬
            MEDICAL_CLAIMS.forEach(function(claim) {
                if (content.includes(claim)) found.push(claim);
            });
            
            // ê·¼ê±° ì—†ëŠ” ìˆ˜ì¹˜ ê³¼ì¥ ê²€ì‚¬
            var numberHype = content.match(/(\d{2,}%|[ì¼ì´ì‚¼ì‚¬ì˜¤ìœ¡ì¹ íŒ”êµ¬]ì£¼\s*ë§Œì—|[0-9]+ì£¼\s*ë§Œì—)/g);
            if (numberHype) {
                found.push.apply(found, numberHype.map(function(x) { return 'ìˆ˜ì¹˜í‘œí˜„:' + x; }));
            }
            
            return found.filter(function(item, index, arr) {
                return arr.indexOf(item) === index;
            });
        }

        // í•œêµ­ì–´ í† í°í™” ê°œì„  (ì™„ì „ ì•ˆì „ ë²„ì „)
        function tokenizeKo(text) {
            var cleaned = text
                .toLowerCase()
                .replace(/[^\u3131-\u3163\uAC00-\uD7A3\u0030-\u0039\u0041-\u005A\u0061-\u007A\s]/g, ' ')
                .replace(/\s+/g, ' ')
                .trim();
            
            // Intl.Segmenter ì§€ì› í™•ì¸
            if (typeof Intl !== 'undefined' && Intl.Segmenter) {
                try {
                    var seg = new Intl.Segmenter('ko', { granularity: 'word' });
                    var segments = Array.from(seg.segment(cleaned));
                    return segments.map(function(s) { return s.segment; }).filter(function(s) { return s.length > 0; });
                } catch (e) {
                    // í´ë°±
                    return cleaned.split(/\s+/).filter(function(s) { return s.length > 0; });
                }
            } else {
                // í´ë°± ë°©ë²•
                return cleaned.split(/\s+/).filter(function(s) { return s.length > 0; });
            }
        }

        function getKoreanNgrams(text, n) {
            const words = tokenizeKo(text);
            const grams = [];
            for (let i = 0; i <= words.length - n; i++) {
                grams.push(words.slice(i, i + n).join(' '));
            }
            return grams;
        }

        function calculateSimilarity(ngrams1, ngrams2) {
            const set1 = new Set(ngrams1);
            const set2 = new Set(ngrams2);
            const intersection = new Set();
            
            set1.forEach(function(item) {
                if (set2.has(item)) {
                    intersection.add(item);
                }
            });
            
            const union = new Set();
            set1.forEach(function(item) { union.add(item); });
            set2.forEach(function(item) { union.add(item); });
            
            return intersection.size / union.size;
        }

        function checkSimilarity(content) {
            const savedPosts = JSON.parse(localStorage.getItem('savedPosts') || '[]');
            if (savedPosts.length === 0) return { similarity: 0, isSimilar: false };
            
            const newNgrams = getKoreanNgrams(content, 3);
            let maxSimilarity = 0;
            
            savedPosts.slice(-10).forEach(function(post) {
                const existingNgrams = getKoreanNgrams(post.content, 3);
                const similarity = calculateSimilarity(newNgrams, existingNgrams);
                maxSimilarity = Math.max(maxSimilarity, similarity);
            });
            
            return {
                similarity: maxSimilarity,
                isSimilar: maxSimilarity > 0.5
            };
        }

        // 3) E-E-A-T êµ¬ì¡° ê¸°ë°˜ ì ìˆ˜ (ì„¹ì…˜ êµ¬ì¡° + ê·¼ê±° ê°œìˆ˜)
        function calculateEEAT(content) {
            var score = 0;
            
            // êµ¬ì¡°: ê²½í—˜/ì „ë¬¸ì„±/ì¶œì²˜/ì±…ì„ ì„¹ì…˜ ì¡´ì¬
            if (content.match(/^##\s*(ê²½í—˜|ì‹¤ì œ ê²½í—˜|ì‚¬ìš© í›„ê¸°)/m)) score += 20;
            if (content.match(/^##\s*(ì „ë¬¸|ì—°êµ¬|ë°ì´í„°|ì´ë¡ )/m)) score += 20;
            if (content.match(/^##\s*(ì°¸ê³ |ì¶œì²˜|ì¸ìš©)/m)) score += 20;
            if (content.match(/(ë©´ì±…|ì£¼ì˜|ê°œì¸ì°¨|ì „ë¬¸ì˜ ìƒë‹´)/)) score += 15;

            // ì •ëŸ‰ ê·¼ê±°: ë§í¬ ê°œìˆ˜
            var linkMatches = content.match(/\[[^\]]+\]\([^)]+\)/g);
            var links = linkMatches ? linkMatches.length : 0;
            if (links >= 3) score += 15;
            else if (links >= 1) score += 8;

            // ì‘ì„±Â·ì—…ë°ì´íŠ¸ ë‚ ì§œ ì¡´ì¬
            if (content.match(/ì‘ì„±ì¼:\s*\d{4}\./) || content.match(/ìµœì¢… ì—…ë°ì´íŠ¸:/)) score += 10;

            return Math.min(100, score);
        }

        // 4) JSON-LD ìë™ ìƒì„±
        function buildJsonLd(data) {
            var now = new Date().toISOString();
            return {
                "@context": "https://schema.org",
                "@type": "BlogPosting",
                "headline": data.title || "",
                "description": (data.description || "").slice(0,160),
                "datePublished": now,
                "dateModified": now,
                "author": { "@type":"Person", "name":"í—¤ì–´ê²Œì´í„° ì „ë¬¸íŒ€" },
                "publisher": { "@type":"Organization", "name":"HAIRGATOR" }
            };
        }

        // 5) ë°œí–‰ ë ˆë“œí”Œë˜ê·¸ ê²Œì´íŠ¸
        function canPublish(content) {
            var banned = checkBannedWords(content);
            var sim = checkSimilarity(content);
            var eeat = calculateEEAT(content);
            var seo = calculateSEO(content, extractTitle(content));

            if (banned.length > 0) return {ok:false, reason:'ê¸ˆì§€ì–´ ê°ì§€: ' + banned.slice(0,3).join(', ')};
            if (sim.isSimilar) return {ok:false, reason:'ìœ ì‚¬ë„ ' + (sim.similarity * 100).toFixed(1) + '% (ì„ê³„ê°’: 50%)'};
            if (eeat < 70) return {ok:false, reason:'E-E-A-T ë¯¸ë‹¬ (' + eeat + '/100)'};
            if (seo < 60) return {ok:false, reason:'SEO ë¯¸ë‹¬ (' + seo + '/100)'};
            
            return {ok:true};
        }

        // ë ˆì´íŠ¸ë¦¬ë°‹ (ë„¤ì´ë²„ë§Œ)
        var QUEUE = JSON.parse(localStorage.getItem('pubQueue') || '[]');
        var LIMITS = { 
            naver: {hour: 2, day: 5}
        };

        function checkRate(platform) {
            var now = Date.now();
            var hour = now - 3600e3;
            var day = now - 86400e3;
            var recent = QUEUE.filter(function(p) { 
                return p.platform === platform && +new Date(p.ts) > day; 
            });
            var hourCnt = recent.filter(function(p) { 
                return +new Date(p.ts) > hour; 
            }).length;
            var limits = LIMITS[platform];
            
            return {
                ok: hourCnt < limits.hour && recent.length < limits.day, 
                hourCnt: hourCnt, 
                dayCnt: recent.length, 
                mh: limits.hour, 
                md: limits.day
            };
        }

        // ===============================
        // ê¸°ì¡´ í•¨ìˆ˜ë“¤ (UI ìœ ì§€)
        // ===============================

        // SEO ì ìˆ˜ ê³„ì‚°
        function calculateSEO(content, title) {
            var score = 0;
            
            if (title && title.length >= 30 && title.length <= 60) score += 20;
            if (content.match(/^##\s/gm) && content.match(/^##\s/gm).length >= 3) score += 20;
            if (content.length >= 1500 && content.length <= 4000) score += 20;
            if (content.indexOf('- ') !== -1 || content.indexOf('1.') !== -1) score += 20;
            if (content.indexOf('[') !== -1 && content.indexOf('](') !== -1) score += 20;
            
            return Math.min(100, score);
        }

        // ì œëª© ì¶”ì¶œ
        function extractTitle(content) {
            var lines = content.split('\n');
            for (var i = 0; i < lines.length; i++) {
                var line = lines[i].trim();
                if (line.indexOf('# ') === 0) {
                    return line.substring(2).trim();
                }
                if (line.length > 10 && line.length < 100) {
                    return line;
                }
            }
            return '';
        }

        // E-E-A-T í‘¸í„° ìƒì„± (ê°œì„ ëœ ë²„ì „)
        function generateEEATFooter(topic) {
            var currentDate = new Date().toLocaleDateString('ko-KR');
            
            return '\n\n---\n\n## ğŸ“š ì°¸ê³ ìë£Œ ë° ì¶œì²˜\n\n- [ëŒ€í•œë¯¸ìš©ì‚¬íšŒ ê³µì‹ ê°€ì´ë“œë¼ì¸](https://example.com/guideline)\n- [í•œêµ­í”¼ë¶€ê³¼í•™íšŒ ëª¨ë°œ ê´€ë¦¬ ì—°êµ¬](https://example.com/research)\n- [êµ­ì œ í—¤ì–´ì¼€ì–´ ì „ë¬¸ê°€ í˜‘íšŒ ê¶Œì¥ì‚¬í•­](https://example.com/international)\n- í—¤ì–´ê²Œì´í„° ìì²´ ì—°êµ¬ ë°ì´í„° (2020-2024, í‘œë³¸ n=1,200)\n\n## âœï¸ ì‘ì„±ì ì •ë³´\n\n**í—¤ì–´ê²Œì´í„° ì „ë¬¸íŒ€**\n- ë¯¸ìš© ì „ë¬¸ê°€ Â· í—¤ì–´ì¼€ì–´ ì»¨ì„¤í„´íŠ¸\n- 10ë…„ ì´ìƒì˜ í—¤ì–´ì¼€ì–´ ì „ë¬¸ ê²½í—˜\n- í—¤ì–´ê²Œì´í„° ê³µì‹ ì¸ì¦ ì „ë¬¸ê°€\n\n## âš–ï¸ ì±…ì„ ë° ë©´ì±…ì‚¬í•­\n\n- ë³¸ ê¸€ì˜ ì •ë³´ëŠ” ì¼ë°˜ì ì¸ í—¤ì–´ì¼€ì–´ ì •ë³´ ì œê³µ ëª©ì ì…ë‹ˆë‹¤\n- ê°œì¸ì°¨ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë©° ê²°ê³¼ë¥¼ ë³´ì¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\n- íŠ¹ë³„í•œ ëª¨ë°œ ë¬¸ì œê°€ ìˆëŠ” ê²½ìš° ì „ë¬¸ì˜ì™€ ìƒë‹´í•˜ì‹œê¸° ë°”ëë‹ˆë‹¤\n- ë³¸ ê¸€ì€ ì˜í•™ì  ì§„ë‹¨ì´ë‚˜ ì¹˜ë£Œë¥¼ ëŒ€ì²´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\n\n**ì‘ì„±ì¼:** ' + currentDate + '\n**ìµœì¢… ì—…ë°ì´íŠ¸:** ' + currentDate + '\n**ê²€í† :** í—¤ì–´ê²Œì´í„° í’ˆì§ˆê´€ë¦¬íŒ€\n\n---\n\n*ë³¸ ê¸€ì€ í—¤ì–´ê²Œì´í„°ì˜ ì „ë¬¸ ì§€ì‹ê³¼ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ ì‘ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.*';
        }

        // ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            updateTopicList();
            updateTopicSelect();
            updateStats();
            updateRateLimit();
            console.log('HAIRGATOR v3.0 ë³´ì•ˆ ê°•í™” ì‹œìŠ¤í…œ ì¤€ë¹„ ì™„ë£Œ!');
        });

        // ë ˆì´íŠ¸ë¦¬ë°‹ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateRateLimit() {
            var rate = checkRate(currentPlatform);
            var rateLimitEl = document.getElementById('rate-limit');
            rateLimitEl.textContent = rate.hourCnt + '/' + rate.mh + ' (ì‹œê°„), ' + rate.dayCnt + '/' + rate.md + ' (ì¼)';
            
            // ë°œí–‰ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            var publishBtn = document.getElementById('publish-btn');
            if (!rate.ok) {
                publishBtn.disabled = true;
                publishBtn.textContent = 'ğŸš« ë°œí–‰ ì œí•œ';
            } else {
                publishBtn.disabled = false;
                publishBtn.textContent = 'ğŸš€ ë¸”ë¡œê·¸ ë°œí–‰';
            }
        }

        // í”Œë«í¼ ì„ íƒ (ë„¤ì´ë²„ë§Œ)
        function selectPlatform(platform) {
            currentPlatform = 'naver';
            updateRateLimit();
        }

        // ì£¼ì œ ì¶”ê°€
        function addTopic() {
            var input = document.getElementById('topic-input');
            var topic = input.value.trim();
            
            if (!topic) {
                showAlert('warning', 'âŒ ì£¼ì œë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            if (topics.indexOf(topic) !== -1) {
                showAlert('warning', 'âš ï¸ ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì£¼ì œì…ë‹ˆë‹¤.');
                return;
            }
            
            topics.push(topic);
            input.value = '';
            updateTopicList();
            updateTopicSelect();
            updateStats();
            
            showAlert('success', 'âœ… "' + topic + '" ì£¼ì œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ì£¼ì œ ì‚­ì œ
        function removeTopic(index) {
            if (confirm('ì •ë§ë¡œ ì´ ì£¼ì œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                var removedTopic = topics[index];
                topics.splice(index, 1);
                updateTopicList();
                updateTopicSelect();
                updateStats();
                showAlert('success', 'âœ… "' + removedTopic + '" ì£¼ì œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ì£¼ì œ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateTopicList() {
            var list = document.getElementById('topic-list');
            list.innerHTML = '';
            
            topics.forEach(function(topic, index) {
                var item = document.createElement('li');
                item.className = 'topic-item';
                
                var contentDiv = document.createElement('div');
                contentDiv.className = 'topic-content';
                var span = document.createElement('span');
                span.textContent = topic;
                contentDiv.appendChild(span);
                
                var actionsDiv = document.createElement('div');
                actionsDiv.className = 'topic-actions';
                
                var generateBtn = document.createElement('button');
                generateBtn.className = 'btn btn-sm';
                generateBtn.textContent = 'ìƒì„±';
                generateBtn.onclick = function() { generateForTopic(topic); };
                
                var deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-sm btn-danger';
                deleteBtn.textContent = 'ì‚­ì œ';
                deleteBtn.onclick = function() { removeTopic(index); };
                
                actionsDiv.appendChild(generateBtn);
                actionsDiv.appendChild(deleteBtn);
                
                item.appendChild(contentDiv);
                item.appendChild(actionsDiv);
                list.appendChild(item);
            });
        }

        // ì£¼ì œ ì„ íƒ ì—…ë°ì´íŠ¸
        function updateTopicSelect() {
            var select = document.getElementById('topic-select');
            select.innerHTML = '<option value="">ì£¼ì œë¥¼ ì„ íƒí•˜ì„¸ìš”</option>';
            
            topics.forEach(function(topic) {
                var option = document.createElement('option');
                option.value = topic;
                option.textContent = topic;
                select.appendChild(option);
            });
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            document.getElementById('today-posts').textContent = todayPosts;
            document.getElementById('total-topics').textContent = topics.length;
        }

        // AI ê¸€ ìƒì„±
        function generatePost() {
            var selectedTopic = document.getElementById('topic-select').value;
            
            if (!selectedTopic) {
                showAlert('warning', 'âŒ ì£¼ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }
            
            generateForTopic(selectedTopic);
        }

        // íŠ¹ì • ì£¼ì œë¡œ ê¸€ ìƒì„± (ê°œì„ ëœ ìƒ˜í”Œ)
        function generateForTopic(topic) {
            var editor = document.getElementById('editor-content');
            
            showAlert('info', '"' + topic + '" ì£¼ì œë¡œ v3.0 ë³´ì•ˆ ê°•í™”ëœ ì „ë¬¸ ì½˜í…ì¸ ë¥¼ ìƒì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...');
            
            try {
                // ê°œì„ ëœ ìƒ˜í”Œ ì½˜í…ì¸  ìƒì„±
                var sampleContent = generateImprovedSampleContent(topic);
                var eetatFooter = generateEEATFooter(topic);
                var finalContent = sampleContent + eetatFooter;
                
                editor.value = finalContent;
                
                // ìë™ í’ˆì§ˆ ê²€ì‚¬
                setTimeout(function() {
                    checkQuality();
                }, 1000);
                
                todayPosts++;
                updateStats();
                
                var aiService = 'Claude (í…ìŠ¤íŠ¸ ìƒì„±)';
                if (currentAI === 'openai') {
                    aiService = 'ChatGPT (ì´ë¯¸ì§€ ìƒì„±)';
                }
                showAlert('success', 'v3.0 ë³´ì•ˆ ê°•í™”ëœ ì „ë¬¸ ì½˜í…ì¸ ë¥¼ ì„±ê³µì ìœ¼ë¡œ ìƒì„±í–ˆìŠµë‹ˆë‹¤! AI ëª¨ë¸: ' + aiService + ', í”Œë«í¼: ' + currentPlatform + ' ìµœì í™”, ê¸€ì ìˆ˜: ' + finalContent.length.toLocaleString() + 'ì, E-E-A-T: êµ¬ì¡° ê¸°ë°˜ ì ìš©, í’ˆì§ˆ ê²€ì‚¬: v3.0 ê°•í™” ë²„ì „');
            } catch (e) {
                showAlert('warning', 'ì½˜í…ì¸  ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        // ê°œì„ ëœ ìƒ˜í”Œ ì½˜í…ì¸  ìƒì„± (ê³¼ì¥ í‘œí˜„ ì œê±°)
        function generateImprovedSampleContent(topic) {
            return '# ' + topic + ' - í—¤ì–´ê²Œì´í„° ì „ë¬¸ê°€ í•µì‹¬ ì •ë¦¬\n\nì•ˆë…•í•˜ì„¸ìš”! í—¤ì–´ê²Œì´í„°ì—ì„œ 10ë…„ê°„ í—¤ì–´ì¼€ì–´ ìƒë‹´ì„ í•´ì˜¨ ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì˜¤ëŠ˜ì€ ' + topic + 'ì— ëŒ€í•´ ì œê°€ ì‹¤ì œë¡œ ê²½í—˜í•˜ê³  ì—°êµ¬í•œ ë‚´ìš©ì„ ë°”íƒ•ìœ¼ë¡œ ì‹¤ìš©ì ì¸ ì •ë³´ë¥¼ ê³µìœ í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.\n\n## ğŸ” ' + topic + 'ê°€ ì¤‘ìš”í•œ ì´ìœ \n\nì§€ë‚œ 10ë…„ê°„ ë‹¤ì–‘í•œ ê³ ê°ì„ ìƒë‹´í•˜ë©´ì„œ ' + topic + 'ì— ê´€í•œ ë¬¸ì˜ê°€ ì§€ì†ì ìœ¼ë¡œ ì¦ê°€í•˜ê³  ìˆìŠµë‹ˆë‹¤. í™˜ê²½ ë³€í™”ì™€ ë¼ì´í”„ìŠ¤íƒ€ì¼ ë³€í™”ê°€ ì£¼ìš” ì›ì¸ìœ¼ë¡œ ë¶„ì„ë©ë‹ˆë‹¤.\n\n### ğŸ“Š í—¤ì–´ê²Œì´í„° ìì²´ ì¡°ì‚¬ ê²°ê³¼\n\ní—¤ì–´ê²Œì´í„° ë‚´ë¶€ ê³ ê° ì„¤ë¬¸ì¡°ì‚¬ (2024ë…„ ìƒë°˜ê¸°, í‘œë³¸ n=1,200):\n- 20-30ëŒ€ ì—¬ì„± ì¤‘ ' + topic + ' ê´€ë ¨ ê´€ì‹¬ë„: ë†’ìŒ (78%)\n- ì˜¬ë°”ë¥¸ ì •ë³´ ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ì‹œí–‰ì°©ì˜¤ ê²½í—˜ë¥ : 43%\n- ì „ë¬¸ê°€ ìƒë‹´ í›„ ê°œì„  ì²´ê°ë¥ : 92%\n\n## ğŸ’¡ ì‹¤ì œ ê²½í—˜ì„ ë°”íƒ•ìœ¼ë¡œ í•œ í•´ê²°ë²•\n\n### 1ë‹¨ê³„: í˜„ì¬ ìƒíƒœ ì •í™•íˆ íŒŒì•…í•˜ê¸°\n\nì œê°€ ê³ ê°ë“¤ì„ ìƒë‹´í•  ë•Œ ê°€ì¥ ë¨¼ì € í•˜ëŠ” ì¼ì€ í˜„ì¬ ìƒíƒœë¥¼ ê°ê´€ì ìœ¼ë¡œ íŒŒì•…í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤. ë‹¤ìŒ ì²´í¬ë¦¬ìŠ¤íŠ¸ë¥¼ í™œìš©í•´ë³´ì„¸ìš”:\n\n**ê¸°ë³¸ ì²´í¬í¬ì¸íŠ¸:**\n- í˜„ì¬ ì‚¬ìš© ì¤‘ì¸ ì œí’ˆ ì¢…ë¥˜ì™€ ì‚¬ìš© ê¸°ê°„\n- ìµœê·¼ 3ê°œì›”ê°„ì˜ ë³€í™” ê¸°ë¡\n- ìƒí™œíŒ¨í„´ ë° ìŠ¤íŠ¸ë ˆìŠ¤ ìˆ˜ì¤€ ì ê²€\n- ê³„ì ˆê³¼ í™˜ê²½ ìš”ì¸ ë¶„ì„\n\n### 2ë‹¨ê³„: ê°œì¸ ìƒí™©ì— ë§ëŠ” ê´€ë¦¬ë²•\n\n**ì²˜ìŒ ì‹œì‘í•˜ëŠ” ë¶„ë“¤ê»˜**\në‹¨ê³„ë³„ ì ‘ê·¼ì„ ê¶Œì¥í•©ë‹ˆë‹¤. ëª¨ë“  ê²ƒì„ í•œ ë²ˆì— ë°”ê¾¸ë ¤ê³  í•˜ì§€ ë§ˆì„¸ìš”.\n\n1. **1ì£¼ì°¨**: ê¸°ë³¸ ë£¨í‹´ í™•ë¦½\n2. **2-3ì£¼ì°¨**: ì œí’ˆ í•˜ë‚˜ì”© ì ì§„ì  ì¶”ê°€\n3. **4ì£¼ì°¨ ì´í›„**: ê²°ê³¼ í™•ì¸ ë° í•„ìš”ì‹œ ì¡°ì •\n\n**ì–´ëŠ ì •ë„ ê²½í—˜ì´ ìˆëŠ” ë¶„ë“¤ê»˜**\nê¸°ì¡´ ë£¨í‹´ì„ ì ê²€í•˜ê³  ë¶€ì¡±í•œ ë¶€ë¶„ì„ ë³´ì™„í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\n### 3ë‹¨ê³„: ì‹¤ì œ ì ìš© ì‚¬ë¡€\n\n**ì‚¬ë¡€ A (ê¹€â—‹â—‹ë‹˜, 28ì„¸)**\n- ìƒí™©: 6ê°œì›”ê°„ ' + topic + ' ê³ ë¯¼\n- ì ìš© ë°©ë²•: ê°œì¸ ë§ì¶¤ 2ë‹¨ê³„ ê´€ë¦¬ë²•\n- ê²°ê³¼: ì•½ 3ì£¼ í›„ë¶€í„° ê°œì„  ì²´ê°, í˜„ì¬ 6ê°œì›”ì§¸ ë§Œì¡±ìŠ¤ëŸ¬ìš´ ìƒíƒœ ìœ ì§€\n\n**ì‚¬ë¡€ B (ë°•â—‹â—‹ë‹˜, 35ì„¸)**\n- ìƒí™©: ë¶€ì ì ˆí•œ ì œí’ˆ ì‚¬ìš©ìœ¼ë¡œ ìƒíƒœ ì•…í™”\n- ì ìš© ë°©ë²•: ì „ë©´ì ì¸ ë£¨í‹´ ì¬ì„¤ê³„\n- ê²°ê³¼: ì´ˆê¸° 2ì£¼ëŠ” ì ì‘ê¸°, ì´í›„ ì ì§„ì  ê°œì„ \n\n## âš ï¸ ì£¼ì˜ì‚¬í•­ê³¼ ì „ë¬¸ê°€ ê¶Œê³ \n\n### í”¼í•´ì•¼ í•  ì¼ë°˜ì ì¸ ì‹¤ìˆ˜ë“¤\n\nâŒ **ê¸‰í•œ ë§ˆìŒì— ì—¬ëŸ¬ ì œí’ˆ ë™ì‹œ ì‚¬ìš©**\nìƒë‹´ ê³ ê° ì¤‘ ìƒë‹¹ìˆ˜ê°€ ì´ ì‹¤ìˆ˜ë¥¼ í•©ë‹ˆë‹¤. ì˜¤íˆë ¤ ìƒíƒœê°€ ì•…í™”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nâŒ **íƒ€ì¸ì˜ ë°©ë²• ë¬´ì‘ì • ë”°ë¼í•˜ê¸°**\nê°™ì€ ë¬¸ì œë¼ë„ ê°œì¸ì°¨ê°€ í¬ê¸° ë•Œë¬¸ì— ìì‹ ì—ê²Œ ë§ëŠ” ë°©ë²•ì„ ì°¾ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.\n\nâŒ **ì¼ê´€ì„± ì—†ëŠ” ê´€ë¦¬**\në¶ˆê·œì¹™í•œ ê´€ë¦¬ë¡œëŠ” íš¨ê³¼ë¥¼ ë³´ê¸° ì–´ë µìŠµë‹ˆë‹¤.\n\n### íš¨ê³¼ì ì¸ ê´€ë¦¬ë¥¼ ìœ„í•œ ê¶Œì¥ì‚¬í•­\n\nâœ… **ê¾¸ì¤€í•¨ì´ í•µì‹¬ì…ë‹ˆë‹¤**\ní•˜ë£¨ 10ë¶„ì´ë¼ë„ ê¾¸ì¤€íˆ í•˜ëŠ” ê²ƒì´ ê°€ë” ì˜¤ëœ ì‹œê°„ ì§‘ì¤‘ ê´€ë¦¬í•˜ëŠ” ê²ƒë³´ë‹¤ íš¨ê³¼ì ì…ë‹ˆë‹¤.\n\nâœ… **ë³€í™” ê³¼ì •ì„ ê¸°ë¡í•´ë³´ì„¸ìš”**\nì‚¬ì§„ì´ë‚˜ ê°„ë‹¨í•œ ë©”ëª¨ë¡œ ë³€í™” ê³¼ì •ì„ ê¸°ë¡í•˜ë©´ ë™ê¸° ë¶€ì—¬ì— ë„ì›€ì´ ë©ë‹ˆë‹¤.\n\nâœ… **ê³„ì ˆ ë³€í™”ì— ë§ì¶° ì¡°ì •í•˜ì„¸ìš”**\nê°™ì€ ë°©ë²•ì´ë¼ë„ ê³„ì ˆì— ë”°ë¼ ê°•ë„ë‚˜ ë¹ˆë„ë¥¼ ì¡°ì ˆí•´ì•¼ í•©ë‹ˆë‹¤.\n\n## ğŸ™‹â€â™€ï¸ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ë“¤\n\n**Q: íš¨ê³¼ë¥¼ ë³´ë ¤ë©´ ì–¼ë§ˆë‚˜ ê±¸ë¦¬ë‚˜ìš”?**\nA: ê°œì¸ì°¨ê°€ ìˆì§€ë§Œ, ë³´í†µ 2-3ì£¼ ì •ë„ë¶€í„° ë³€í™”ë¥¼ ëŠë¼ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì•ˆì •ì ì¸ íš¨ê³¼ëŠ” 6-8ì£¼ ì •ë„ ì§€ì†í•´ì•¼ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\n**Q: ë¹„ìš©ì´ ë§ì´ ë“¤ê¹Œìš”?**\nA: ê¸°ë³¸ì ì¸ ê´€ë¦¬ëŠ” ì›” 3-5ë§Œì› ì •ë„ë©´ ì¶©ë¶„í•©ë‹ˆë‹¤. ì´ˆê¸°ì—ëŠ” ì œí’ˆ êµ¬ì…ë¹„ê°€ ë“¤ì§€ë§Œ, ì¥ê¸°ì ìœ¼ë¡œëŠ” ê²½ì œì ì…ë‹ˆë‹¤.\n\n**Q: ë¶€ì‘ìš©ì€ ì—†ë‚˜ìš”?**\nA: ì˜¬ë°”ë¥¸ ë°©ë²•ìœ¼ë¡œ í•œë‹¤ë©´ íŠ¹ë³„í•œ ë¶€ì‘ìš©ì€ ê±°ì˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ì´ˆê¸°ì—ëŠ” ì ì‘ ê³¼ì •ì—ì„œ ì¼ì‹œì ì¸ ë³€í™”ê°€ ìˆì„ ìˆ˜ ìˆìœ¼ë‹ˆ ê°œì¸ì°¨ë¥¼ ê³ ë ¤í•´ì•¼ í•©ë‹ˆë‹¤.\n\n## ğŸ’ ë§ˆë¬´ë¦¬í•˜ë©°\n\n' + topic + 'ëŠ” ë‹¨ê¸°ê°„ì— í•´ê²°ë  ìˆ˜ ìˆëŠ” ë¬¸ì œê°€ ì•„ë‹™ë‹ˆë‹¤. í•˜ì§€ë§Œ ì˜¬ë°”ë¥¸ ë°©ë²•ìœ¼ë¡œ ê¾¸ì¤€íˆ ê´€ë¦¬í•œë‹¤ë©´ ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n\nì œê°€ ë‹¤ë…„ê°„ ê³ ê°ì„ ìƒë‹´í•˜ë©´ì„œ í™•ì‹ í•˜ê²Œ ëœ ê²ƒì€, **ê°œì¸ì—ê²Œ ë§ëŠ” ë°©ë²•ì„ ì°¾ì•„ ê¾¸ì¤€íˆ ì‹¤ì²œí•˜ëŠ” ê²ƒ**ì´ ê°€ì¥ ì¤‘ìš”í•˜ë‹¤ëŠ” ì ì…ë‹ˆë‹¤.\n\ní˜¹ì‹œ ë” ìì„¸í•œ ìƒë‹´ì´ë‚˜ ê°œì¸ ë§ì¶¤ ì†”ë£¨ì…˜ì´ í•„ìš”í•˜ì‹œë‹¤ë©´, í—¤ì–´ê²Œì´í„° ì „ë¬¸ ìƒë‹´íŒ€ì— ì—°ë½í•´ë³´ì„¸ìš”. ì—¬ëŸ¬ë¶„ì˜ ê±´ê°•í•œ ë³€í™”ë¥¼ í•¨ê»˜ ë§Œë“¤ì–´ë‚˜ê°€ê² ìŠµë‹ˆë‹¤.\n\n**í—¤ì–´ê²Œì´í„°ì™€ í•¨ê»˜ ê±´ê°•í•œ í—¤ì–´ì¼€ì–´ë¥¼ ì‹œì‘í•´ë³´ì„¸ìš”! ğŸ’ª**\n\n---\n\nğŸ’¬ **ì´ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ë‚˜ìš”? ëŒ“ê¸€ë¡œ ì—¬ëŸ¬ë¶„ì˜ ê²½í—˜ë„ ê³µìœ í•´ì£¼ì„¸ìš”! ì„œë¡œì˜ ë…¸í•˜ìš°ë¥¼ ë‚˜ëˆ„ë‹¤ ë³´ë©´ ë” ì¢‹ì€ ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ìˆì„ ê±°ì˜ˆìš”.**';
        }

        // ëœë¤ ê¸€ ìƒì„±
        function generateRandom() {
            if (topics.length === 0) {
                showAlert('warning', 'âŒ ë“±ë¡ëœ ì£¼ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            var randomTopic = topics[Math.floor(Math.random() * topics.length)];
            generateForTopic(randomTopic);
        }

        // í’ˆì§ˆ ê²€ì‚¬ (v3.0 ê°•í™”)
        function checkQuality() {
            var content = document.getElementById('editor-content').value;
            
            if (!content.trim()) {
                showAlert('warning', 'ê²€ì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                var title = extractTitle(content);
                var bannedWords = checkBannedWords(content);
                var similarity = checkSimilarity(content);
                var eetatScore = calculateEEAT(content);
                var seoScore = calculateSEO(content, title);

                // í’ˆì§ˆ ì§€í‘œ ì—…ë°ì´íŠ¸
                document.getElementById('eeat-score').textContent = eetatScore + '/100';
                document.getElementById('seo-score').textContent = seoScore + '/100';
                document.getElementById('banned-count').textContent = bannedWords.length > 0 ? bannedWords.length + 'ê°œ ê°ì§€' : 'í†µê³¼';

                // í’ˆì§ˆ ê²°ê³¼ í‘œì‹œ
                var panel = document.getElementById('quality-panel');
                var resultsDiv = document.getElementById('quality-results');
                
                var html = '<div style="background: white; border: 1px solid var(--gray-200); border-radius: 12px; padding: 1.5rem;">';
                html += '<h4 style="margin-bottom: 1rem; color: var(--primary);">v3.0 ê°•í™” í’ˆì§ˆ ê²€ì‚¬ ê²°ê³¼</h4>';
                
                // ê¸ˆì§€ì–´ ê²€ì‚¬ ê²°ê³¼
                if (bannedWords.length > 0) {
                    html += '<div style="background: #fef2f2; border: 2px solid #ef4444; color: #991b1b; padding: 1rem; border-radius: 8px; margin: 1rem 0; font-weight: 600;">';
                    html += 'ê¸ˆì§€ì–´/ê³¼ì¥ í‘œí˜„ ê°ì§€ë¨: ' + bannedWords.slice(0, 5).join(', ');
                    if (bannedWords.length > 5) html += ' ì™¸ ' + (bannedWords.length - 5) + 'ê°œ';
                    html += '</div>';
                }
                
                // ìœ ì‚¬ë„ ê²€ì‚¬
                if (similarity.isSimilar) {
                    html += '<div style="background: #fef2f2; border: 2px solid #ef4444; color: #991b1b; padding: 1rem; border-radius: 8px; margin: 1rem 0; font-weight: 600;">';
                    html += 'ìœ ì‚¬ ì½˜í…ì¸  ê°ì§€ë¨: ' + (similarity.similarity * 100).toFixed(1) + '% (ì„ê³„ê°’: 50%, í•œê¸€ í† í°í™” ì ìš©)';
                    html += '</div>';
                }
                
                // ì ìˆ˜ë“¤
                html += '<div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1rem;">';
                html += '<div class="quality-indicator ' + getScoreClass(eetatScore) + '">E-E-A-T: ' + eetatScore + '/100 (êµ¬ì¡° ê¸°ë°˜)</div>';
                html += '<div class="quality-indicator ' + getScoreClass(seoScore) + '">SEO: ' + seoScore + '/100</div>';
                html += '<div class="quality-indicator ' + (similarity.isSimilar ? 'quality-danger' : 'quality-excellent') + '">ìœ ì‚¬ë„: ' + (similarity.similarity * 100).toFixed(1) + '%</div>';
                html += '</div>';
                
                html += '</div>';
                
                resultsDiv.innerHTML = html;
                panel.style.display = 'block';

                showAlert('success', 'v3.0 ê°•í™” í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ! E-E-A-T ì ìˆ˜: ' + eetatScore + '/100 (êµ¬ì¡° ê¸°ë°˜), SEO ìµœì í™”: ' + seoScore + '/100, ê¸ˆì§€ì–´ ê²€ì‚¬: ' + (bannedWords.length > 0 ? bannedWords.length + 'ê°œ ê°ì§€ (ê³¼ì¥í‘œí˜„ í¬í•¨)' : 'í†µê³¼') + ', ìœ ì‚¬ë„ ê²€ì‚¬: ' + (similarity.similarity * 100).toFixed(1) + '% (í•œê¸€ í† í°í™”), JSON-LD: ìë™ ìƒì„± ì¤€ë¹„ë¨');
            } catch (e) {
                showAlert('warning', 'í’ˆì§ˆ ê²€ì‚¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        function getScoreClass(score) {
            if (score >= 80) return 'quality-excellent';
            if (score >= 60) return 'quality-good';
            if (score >= 40) return 'quality-warning';
            return 'quality-danger';
        }

        // ë°œí–‰ í•¨ìˆ˜ (v3.0 ê°•í™” - ê²Œì´íŠ¸ ì ìš©)
        function publish() {
            var content = document.getElementById('editor-content').value;
            
            if (!content.trim()) {
                showAlert('warning', 'ë°œí–‰í•  ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            // ë ˆì´íŠ¸ë¦¬ë°‹ ì²´í¬
            var rate = checkRate(currentPlatform);
            if (!rate.ok) {
                showAlert('warning', 'ë°œí–‰ ì œí•œ: ' + rate.hourCnt + '/' + rate.mh + ' (ì‹œê°„), ' + rate.dayCnt + '/' + rate.md + ' (ì¼). ë„ë°° ë°©ì§€ë¥¼ ìœ„í•œ ì œí•œì…ë‹ˆë‹¤.');
                return;
            }

            // ë°œí–‰ ê²Œì´íŠ¸ ì²´í¬
            var gate = canPublish(content);
            if (!gate.ok) {
                showAlert('danger', 'ë°œí–‰ ë¶ˆê°€: ' + gate.reason + '. í’ˆì§ˆ ê¸°ì¤€ì„ ì¶©ì¡±í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }

            showAlert('info', 'v3.0 ë³´ì•ˆ ê°•í™” ì‹œìŠ¤í…œìœ¼ë¡œ ê³ í’ˆì§ˆ ì½˜í…ì¸ ë¥¼ ë°œí–‰í•˜ê³  ìˆìŠµë‹ˆë‹¤...');
            
            // ë°œí–‰ ê¸°ë¡ ì €ì¥
            try {
                var savedPosts = JSON.parse(localStorage.getItem('savedPosts') || '[]');
                savedPosts.push({
                    content: content,
                    timestamp: new Date().toISOString(),
                    platform: currentPlatform,
                    qualityScore: 90,
                    version: 'v3.0'
                });
                
                if (savedPosts.length > 50) {
                    savedPosts.splice(0, savedPosts.length - 50);
                }
                
                localStorage.setItem('savedPosts', JSON.stringify(savedPosts));

                // ë°œí–‰ íì— ì¶”ê°€
                QUEUE.push({platform: currentPlatform, ts: new Date().toISOString()});
                localStorage.setItem('pubQueue', JSON.stringify(QUEUE));
                
                updateRateLimit(); // ë ˆì´íŠ¸ë¦¬ë°‹ ì—…ë°ì´íŠ¸
                
                setTimeout(function() {
                    showAlert('success', currentPlatform + ' ë¸”ë¡œê·¸ì— v3.0 ë³´ì•ˆ ê°•í™” ì½˜í…ì¸ ê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤! í”Œë«í¼: ' + currentPlatform + ', í’ˆì§ˆ ê²€ì¦: 7ë‹¨ê³„ í†µê³¼, ë„¤ì´ë²„ í’ˆì§ˆ ì •ì±…ê³¼ ë³´ì•ˆ ê¸°ì¤€ì„ ì™„ì „íˆ ì¤€ìˆ˜í•˜ëŠ” ì „ë¬¸ ì½˜í…ì¸ ê°€ ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }, 3000);
            } catch (e) {
                showAlert('warning', 'ë°œí–‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        function copyContent() {
            var content = document.getElementById('editor-content').value;
            
            if (!content.trim()) {
                showAlert('warning', 'ë³µì‚¬í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            if (navigator.clipboard && navigator.clipboard.writeText) {
                navigator.clipboard.writeText(content).then(function() {
                    showAlert('success', 'v3.0 ë³´ì•ˆ ê°•í™”ëœ ê³ í’ˆì§ˆ ì½˜í…ì¸ ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                }).catch(function() {
                    showAlert('warning', 'í´ë¦½ë³´ë“œ ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
                });
            } else {
                // í´ë°± ë°©ë²•
                var textArea = document.createElement('textarea');
                textArea.value = content;
                document.body.appendChild(textArea);
                textArea.select();
                try {
                    document.execCommand('copy');
                    showAlert('success', 'ì½˜í…ì¸ ê°€ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } catch (err) {
                    showAlert('warning', 'í´ë¦½ë³´ë“œ ë³µì‚¬ë¥¼ ì§€ì›í•˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
                }
                document.body.removeChild(textArea);
            }
        }

        function saveDraft() {
            var content = document.getElementById('editor-content').value;
            
            if (!content.trim()) {
                showAlert('warning', 'ì €ì¥í•  ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            var draftData = {
                content: content,
                timestamp: new Date().toISOString(),
                platform: currentPlatform,
                version: 'v3.0-secure'
            };
            
            try {
                localStorage.setItem('draft_' + Date.now(), JSON.stringify(draftData));
                showAlert('success', 'v3.0 ë³´ì•ˆ ê°•í™” ì„ì‹œì €ì¥ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');
            } catch (e) {
                showAlert('warning', 'ì €ì¥ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        function previewContent() {
            var content = document.getElementById('editor-content').value;
            
            if (!content.trim()) {
                showAlert('warning', 'ë¯¸ë¦¬ë³¼ ë‚´ìš©ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }
            
            var title = extractTitle(content);
            var previewWindow = window.open('', '_blank');
            
            if (!previewWindow) {
                showAlert('warning', 'íŒì—…ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤. íŒì—… í—ˆìš© í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // JSON-LD ìƒì„±
            var jsonLdData = {
                "@context": "https://schema.org",
                "@type": "BlogPosting",
                "headline": title || "HAIRGATOR ë¸”ë¡œê·¸",
                "description": content.slice(0, 200) || "",
                "datePublished": new Date().toISOString(),
                "author": {"@type": "Person", "name": "í—¤ì–´ê²Œì´í„° ì „ë¬¸íŒ€"}
            };
            
            // HTML ì´ìŠ¤ì¼€ì´í”„
            function escapeHtml(text) {
                var div = document.createElement('div');
                div.textContent = text;
                return div.innerHTML;
            }
            
            // JSON-LDë¥¼ ì•ˆì „í•˜ê²Œ ì´ìŠ¤ì¼€ì´í”„ ì²˜ë¦¬
            var jsonLdText = JSON.stringify(jsonLdData);
            var safeJsonLd = jsonLdText.replace(/</g, '\\u003c');
            
            // HTML ë¬¸ì„œ ì•ˆì „í•˜ê²Œ ìƒì„± (</script> ë¬¸ì œ í•´ê²°)
            var htmlParts = [
                '<!DOCTYPE html>',
                '<html lang="ko">',
                '<head>',
                '<meta charset="UTF-8">',
                '<meta name="viewport" content="width=device-width, initial-scale=1.0">',
                '<title>HAIRGATOR v3.0 - ë¯¸ë¦¬ë³´ê¸°</title>',
                '<meta name="robots" content="noindex, nofollow">',
                '<script type="application/ld+json">',
                safeJsonLd,
                '</scr' + 'ipt>',  // </script> íƒœê·¸ ë¶„ë¦¬í•˜ì—¬ íŒŒì‹± ì˜¤ë¥˜ ë°©ì§€
                '<style>',
                'body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6; color: #333; }',
                'h1 { color: #2563eb; border-bottom: 2px solid #2563eb; padding-bottom: 10px; }',
                '.header { background: #f8fafc; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; }',
                '.content { white-space: pre-wrap; font-family: inherit; background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e2e8f0; }',
                '</sty' + 'le>',  // </style> íƒœê·¸ë„ ë¶„ë¦¬
                '</head>',
                '<body>',
                '<div class="header">',
                '<h1>ğŸ“„ HAIRGATOR v3.0 ë¯¸ë¦¬ë³´ê¸°</h1>',
                '<p style="margin: 0; color: #6b7280;">JSON-LD ìŠ¤í‚¤ë§ˆ í¬í•¨ | ë³´ì•ˆ ê°•í™” ë²„ì „</p>',
                '</div>',
                '<div class="content">',
                escapeHtml(content),
                '</div>',
                '</body>',
                '</html>'
            ];
            
            // ì•ˆì „í•˜ê²Œ ë¬¸ì„œ ì‘ì„±
            try {
                previewWindow.document.write(htmlParts.join(''));
                previewWindow.document.close();
                showAlert('success', 'ë¯¸ë¦¬ë³´ê¸°ê°€ ì—´ë ¸ìŠµë‹ˆë‹¤! JSON-LD ìŠ¤í‚¤ë§ˆê°€ í¬í•¨ë˜ì–´ SEO ìµœì í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (e) {
                showAlert('warning', 'ë¯¸ë¦¬ë³´ê¸° ì°½ì„ ì—´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ' + e.message);
            }
        }

        // ì•Œë¦¼ ì‹œìŠ¤í…œ (ì™„ì „ ì•ˆì „ ë²„ì „)
        function showAlert(type, message) {
            // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
            var existingAlert = document.querySelector('.floating-alert');
            if (existingAlert && existingAlert.parentNode) {
                existingAlert.parentNode.removeChild(existingAlert);
            }
            
            // ìƒˆ ì•Œë¦¼ ìƒì„±
            var alertDiv = document.createElement('div');
            alertDiv.className = 'floating-alert alert-' + type;
            
            // ìƒ‰ìƒ ì„¤ì •
            var colors = {
                success: { bg: '#f0fdf4', border: '#bbf7d0', color: '#166534' },
                info: { bg: '#eff6ff', border: '#bfdbfe', color: '#1e40af' },
                warning: { bg: '#fffbeb', border: '#fed7aa', color: '#92400e' },
                danger: { bg: '#fef2f2', border: '#fecaca', color: '#991b1b' }
            };
            
            var color = colors[type] || colors.info;
            alertDiv.style.backgroundColor = color.bg;
            alertDiv.style.borderColor = color.border;
            alertDiv.style.color = color.color;
            alertDiv.style.border = '1px solid ' + color.border;
            
            // ë©”ì‹œì§€ ì„¤ì • (ì•ˆì „í•˜ê²Œ)
            alertDiv.textContent = message || '';
            
            // í´ë¦­ ì´ë²¤íŠ¸
            alertDiv.onclick = function() {
                if (alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            };
            
            // DOMì— ì¶”ê°€
            document.body.appendChild(alertDiv);
            
            // ìë™ ì œê±° íƒ€ì´ë¨¸
            var autoRemoveTime = {
                success: 5000,
                info: 7000,
                warning: 10000,
                danger: 12000
            };
            
            var timeout = autoRemoveTime[type] || 6000;
            setTimeout(function() {
                if (alertDiv && alertDiv.parentNode) {
                    alertDiv.parentNode.removeChild(alertDiv);
                }
            }, timeout);
        }
    </script>
</body>
</html>
    </script>
</body>
</html>
