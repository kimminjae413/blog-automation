<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firebase ì—°ë™ ë¸”ë¡œê·¸ ìë™í™” ì‹œìŠ¤í…œ</title>
    <style>
        :root {
            --primary: #2563eb;
            --secondary: #64748b;
            --success: #059669;
            --warning: #d97706;
            --error: #dc2626;
            --text: #0f172a;
            --bg: #ffffff;
            --card: #ffffff;
            --border: #e2e8f0;
            --gray: #64748b;
            --light-gray: #f8fafc;
            --shadow-sm: 0 1px 3px rgba(0, 0, 0, 0.1);
            --shadow-md: 0 4px 6px rgba(0, 0, 0, 0.05);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            line-height: 1.6;
            font-weight: 400;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: var(--card);
            color: var(--text);
            padding: 40px;
            border-radius: 16px;
            margin-bottom: 30px;
            text-align: center;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            font-weight: 700;
            color: var(--text);
        }

        .header p {
            font-size: 1.1rem;
            color: var(--gray);
            font-weight: 400;
        }

        .auth-section {
            background: var(--card);
            padding: 30px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
            margin-bottom: 20px;
            text-align: center;
        }

        .auth-section.hidden {
            display: none;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 2fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .section-card {
            background: var(--card);
            padding: 24px;
            border-radius: 12px;
            box-shadow: var(--shadow-md);
            border: 1px solid var(--border);
            transition: all 0.2s ease;
        }

        .section-card:hover {
            box-shadow: var(--shadow-lg);
        }

        .section-card h3 {
            color: var(--text);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .topic-input-area {
            margin-bottom: 20px;
        }

        .topic-input {
            width: 100%;
            min-height: 120px;
            padding: 16px;
            border: 2px solid var(--border);
            border-radius: 10px;
            font-size: 0.95rem;
            resize: vertical;
            transition: all 0.2s ease;
            background: var(--light-gray);
            font-family: inherit;
        }

        .topic-input:focus {
            outline: none;
            border-color: var(--primary);
            background: var(--card);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .topic-input::placeholder {
            color: var(--gray);
        }

        .btn {
            background: var(--primary);
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: var(--shadow-sm);
            margin-right: 8px;
            margin-bottom: 8px;
        }

        .btn:hover {
            background: #1d4ed8;
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .btn:disabled {
            background: var(--gray);
            cursor: not-allowed;
            transform: none;
        }

        .btn.small {
            padding: 8px 16px;
            font-size: 0.8rem;
        }

        .btn.success {
            background: var(--success);
            box-shadow: 0 4px 15px rgba(5, 150, 105, 0.3);
        }

        .btn.secondary {
            background: var(--gray);
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.3);
        }

        .btn.danger {
            background: var(--error);
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3);
        }

        .firebase-status {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 16px;
            background: var(--light-gray);
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--gray);
        }

        .status-indicator.connected {
            background: var(--success);
            animation: pulse 2s infinite;
        }

        .status-indicator.error {
            background: var(--error);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .topic-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .topic-item {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 16px;
            margin-bottom: 12px;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .topic-item:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-md);
            transform: translateY(-1px);
        }

        .topic-item.completed {
            background: rgba(5, 150, 105, 0.05);
            border-color: var(--success);
        }

        .topic-item.in-progress {
            background: rgba(217, 119, 6, 0.05);
            border-color: var(--warning);
        }

        .topic-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .topic-status {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9rem;
            font-weight: 600;
        }

        .status-icon {
            width: 16px;
            height: 16px;
            border-radius: 50%;
        }

        .status-pending {
            background: var(--gray);
        }

        .status-progress {
            background: var(--warning);
        }

        .status-completed {
            background: var(--success);
        }

        .topic-content {
            color: var(--gray);
            font-size: 0.9rem;
            line-height: 1.4;
        }

        .topic-actions {
            margin-top: 10px;
            display: flex;
            gap: 8px;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .editor-panel {
            background: var(--card);
            border-radius: 12px;
            overflow: hidden;
            box-shadow: var(--shadow-lg);
            border: 1px solid var(--border);
        }

        .editor-header {
            background: var(--light-gray);
            color: var(--text);
            padding: 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 1px solid var(--border);
        }

        .editor-body {
            padding: 25px;
        }

        .editor-content {
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 10px;
            padding: 24px;
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
            white-space: pre-wrap;
            font-family: 'Georgia', serif;
            line-height: 1.8;
            font-size: 0.95rem;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 40px;
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--border);
            border-top: 3px solid var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .progress-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 20px;
            background: var(--card);
            border-radius: 10px;
            border: 1px solid var(--border);
            box-shadow: var(--shadow-sm);
        }

        .stat-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 0.8rem;
            color: var(--gray);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .alert.success {
            background: rgba(5, 150, 105, 0.1);
            color: var(--success);
            border: 1px solid rgba(5, 150, 105, 0.2);
        }

        .alert.warning {
            background: rgba(217, 119, 6, 0.1);
            color: var(--warning);
            border: 1px solid rgba(217, 119, 6, 0.2);
        }

        .alert.error {
            background: rgba(220, 38, 38, 0.1);
            color: var(--error);
            border: 1px solid rgba(220, 38, 38, 0.2);
        }

        .alert.info {
            background: rgba(37, 99, 235, 0.1);
            color: var(--primary);
            border: 1px solid rgba(37, 99, 235, 0.2);
        }

        select, input, textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            border-radius: 8px;
            font-size: 0.95rem;
            transition: all 0.2s ease;
            background: var(--card);
            font-family: inherit;
        }

        select:focus, input:focus, textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--text);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 16px;
            background: var(--light-gray);
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        @media (max-width: 1024px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
            
            .container {
                padding: 15px;
            }

            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head>
<body>
    <!-- Firebase SDK v8 (ë” ì•ˆì •ì ì¸ ë²„ì „) -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-functions.js"></script>

    <div class="container">
        <header class="header">
            <h1>
                <span>ğŸ”¥</span>
                Firebase ì—°ë™ ë¸”ë¡œê·¸ ìë™í™” ì‹œìŠ¤í…œ
                <span>âœï¸</span>
            </h1>
            <p>ì•ˆì „í•˜ê³  ë™ê¸°í™”ë˜ëŠ” í´ë¼ìš°ë“œ ê¸°ë°˜ ë¸”ë¡œê·¸ ìë™í™”</p>
        </header>

        <!-- Firebase ì—°ê²° ìƒíƒœ -->
        <div class="firebase-status">
            <div class="status-indicator" id="firebaseStatus"></div>
            <span id="statusText">Firebase ì—°ê²° ì¤‘...</span>
            <div style="flex: 1;"></div>
            <button class="btn small" onclick="testFirebaseConnection()">ğŸ”§ ì—°ê²° í…ŒìŠ¤íŠ¸</button>
        </div>

        <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… ì„¹ì…˜ -->
        <div class="auth-section" id="authSection">
            <h2>ğŸ” ë¡œê·¸ì¸ ë˜ëŠ” íšŒì›ê°€ì…</h2>
            <p style="margin-bottom: 20px; color: var(--gray);">
                Firebase ê³„ì •ìœ¼ë¡œ ë¡œê·¸ì¸í•˜ë©´ ëª¨ë“  ë°ì´í„°ê°€ ì•ˆì „í•˜ê²Œ í´ë¼ìš°ë“œì— ì €ì¥ë©ë‹ˆë‹¤.
            </p>

            <div id="loginForm">
                <div class="form-group">
                    <input type="email" id="loginEmail" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" style="margin-bottom: 10px;">
                    <input type="password" id="loginPassword" placeholder="ë¹„ë°€ë²ˆí˜¸">
                </div>
                <button class="btn success" onclick="loginWithEmail()">ğŸ“§ ì´ë©”ì¼ë¡œ ë¡œê·¸ì¸</button>
                <button class="btn" onclick="signupWithEmail()">ğŸ“ íšŒì›ê°€ì…</button>
                <button class="btn secondary" onclick="loginWithGoogle()">ğŸ” Googleë¡œ ë¡œê·¸ì¸</button>
            </div>

            <div style="margin-top: 20px;">
                <button class="btn small secondary" onclick="continueOffline()">
                    ğŸ“± ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ê³„ì† (LocalStorage)
                </button>
            </div>
        </div>

        <!-- ì‚¬ìš©ì ì •ë³´ -->
        <div class="user-info hidden" id="userInfo">
            <div class="user-avatar" id="userAvatar">U</div>
            <div>
                <div id="userName">ì‚¬ìš©ì</div>
                <small id="userEmail" style="color: var(--gray);">user@example.com</small>
            </div>
            <div style="flex: 1;"></div>
            <button class="btn small secondary" onclick="logout()">ğŸšª ë¡œê·¸ì•„ì›ƒ</button>
        </div>

        <div class="main-grid hidden" id="mainContent">
            <!-- ì‚¬ì´ë“œë°”: ì£¼ì œ ê´€ë¦¬ -->
            <div class="sidebar">
                <!-- ìƒˆ ì£¼ì œ ì¶”ê°€ -->
                <div class="section-card">
                    <h3>ğŸ“ ìƒˆ ì£¼ì œ ì¶”ê°€</h3>
                    <div class="topic-input-area">
                        <textarea 
                            class="topic-input" 
                            id="newTopicInput"
                            placeholder="ì´ëŸ° ê¸€ì„ ì“°ê³  ì‹¶ì–´ìš”! ì˜ˆì‹œ:

ğŸ“Œ ê²¨ìš¸ì²  ëª¨ë°œ ê´€ë¦¬ ê¿€íŒ
- ê±´ì¡°í•œ ê²¨ìš¸ ê³µê¸° ë•Œë¬¸ì— ë¨¸ë¦¬ê°€ ë„ˆë¬´ í‘¸ì„í•´ì§
- ì •ì „ê¸°ë„ ì‹¬í•˜ê³  ìœ¤ê¸°ë„ ì—†ì–´ì§  
- ì‹¤ë‚´ì™¸ ì˜¨ë„ì°¨ë¡œ ì¸í•œ ë‘í”¼ íŠ¸ëŸ¬ë¸”
- ê°„ë‹¨í•˜ë©´ì„œë„ íš¨ê³¼ì ì¸ ê´€ë¦¬ë²• ì•Œë ¤ì£¼ê¸°

ğŸ“Œ 20ëŒ€ë¥¼ ìœ„í•œ í—¤ì–´ì¼€ì–´ ë£¨í‹´
- ëŒ€í•™ìƒì´ë‚˜ ì§ì¥ ì´ˆë…„ìƒë“¤ì´ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ”
- ë¹„ìš© ë¶€ë‹´ ì ìœ¼ë©´ì„œë„ íš¨ê³¼ ì¢‹ì€ ì œí’ˆë“¤
- ë°”ìœ ì¼ìƒ ì†ì—ì„œë„ í•  ìˆ˜ ìˆëŠ” ê°„ë‹¨í•œ ë°©ë²•ë“¤

ì´ëŸ° ì‹ìœ¼ë¡œ ì¶”ìƒì ìœ¼ë¡œ ì¨ì£¼ì„¸ìš”!"></textarea>
                    </div>
                    <button class="btn" onclick="addNewTopic()">
                        â• ì£¼ì œ ì¶”ê°€í•˜ê¸°
                    </button>
                    <button class="btn secondary small" onclick="showBatchAdd()">
                        ğŸ“¦ ì—¬ëŸ¬ ê°œ í•œë²ˆì— ì¶”ê°€
                    </button>
                </div>

                <!-- AI ì„¤ì • -->
                <div class="section-card">
                    <h3>ğŸ¤– AI ì„¤ì •</h3>
                    
                    <div class="form-group">
                        <label for="aiProvider">ê¸€ ìƒì„± AI ì„ íƒ</label>
                        <select id="aiProvider">
                            <option value="claude">Claude (Anthropic)</option>
                            <option value="gpt">GPT-4 (OpenAI)</option>
                            <option value="both">ë‘˜ ë‹¤ ì‚¬ìš©</option>
                        </select>
                    </div>

                    <div class="form-group">
                        <label for="claudeKey">Claude API í‚¤</label>
                        <input type="password" id="claudeKey" placeholder="sk-ant-...">
                        <small style="color: var(--gray);">ê¸€ ìƒì„±ìš© (ê¸€ë‹¹ ì•½ 10ì›)</small>
                    </div>

                    <div class="form-group">
                        <label for="openaiKey">OpenAI API í‚¤</label>
                        <input type="password" id="openaiKey" placeholder="sk-...">
                        <small style="color: var(--gray);">ì´ë¯¸ì§€ ìƒì„±ìš© (ì´ë¯¸ì§€ë‹¹ ì•½ 50ì›)</small>
                    </div>

                    <button class="btn small" onclick="saveAPIKeys()">ğŸ’¾ API í‚¤ ì €ì¥</button>
                    <button class="btn small secondary" onclick="testAPIConnection()">ğŸ§ª API í…ŒìŠ¤íŠ¸</button>
                </div>

                <!-- ì§„í–‰ í˜„í™© -->
                <div class="section-card">
                    <h3>ğŸ“Š ì§„í–‰ í˜„í™©</h3>
                    <div class="progress-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="totalTopics">0</div>
                            <div class="stat-label">ì „ì²´ ì£¼ì œ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="completedTopics">0</div>
                            <div class="stat-label">ì™„ë£Œ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="pendingTopics">0</div>
                            <div class="stat-label">ëŒ€ê¸° ì¤‘</div>
                        </div>
                    </div>
                    
                    <button class="btn success" onclick="startBatchGeneration()">
                        âš¡ ì „ì²´ ìë™ ìƒì„± ì‹œì‘
                    </button>
                </div>

                <!-- ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ í•™ìŠµ -->
                <div class="section-card">
                    <h3>ğŸ¨ ë‚´ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ í•™ìŠµ</h3>
                    <p style="color: var(--gray); font-size: 0.9rem; margin-bottom: 15px;">
                        ë‚´ê°€ ì“´ ê¸€ì˜ ì¼ë¶€ë¥¼ ì…ë ¥í•˜ë©´, AIê°€ ê·¸ ìŠ¤íƒ€ì¼ì„ í•™ìŠµí•´ì„œ ë¹„ìŠ·í•˜ê²Œ ì¨ì¤ë‹ˆë‹¤.
                    </p>
                    
                    <div class="style-samples" id="styleSamples">
                        <!-- ìƒ˜í”Œ í…ìŠ¤íŠ¸ë“¤ì´ ì—¬ê¸°ì— ì¶”ê°€ë¨ -->
                    </div>
                    
                    <textarea 
                        id="styleInput" 
                        class="topic-input" 
                        style="min-height: 80px;"
                        placeholder="ë‚´ê°€ ì“´ ê¸€ì˜ ì¼ë¶€ë¥¼ ë¶™ì—¬ë„£ì–´ì£¼ì„¸ìš”..."></textarea>
                    
                    <button class="btn small" onclick="addStyleSample()">
                        âœ¨ ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ì¶”ê°€
                    </button>
                    <button class="btn secondary small" onclick="analyzeWritingStyle()">
                        ğŸ” ìŠ¤íƒ€ì¼ ë¶„ì„
                    </button>
                </div>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸ : ì£¼ì œ ëª©ë¡ + ì—ë””í„° -->
            <div class="main-content">
                <!-- ì£¼ì œ ëª©ë¡ -->
                <div class="section-card">
                    <h3>ğŸ“‹ ë‚´ ì£¼ì œ ëª©ë¡</h3>
                    <div class="topic-list" id="topicList">
                        <!-- ì£¼ì œë“¤ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë¨ -->
                    </div>
                </div>

                <!-- AI ì—ë””í„° -->
                <div class="editor-panel">
                    <div class="editor-header">
                        <div>
                            <h3 id="editorTitle">âœï¸ AI ê¸€ì“°ê¸° ì—ë””í„°</h3>
                            <p id="editorSubtitle">ì£¼ì œë¥¼ ì„ íƒí•˜ë©´ AIê°€ ë‚´ ìŠ¤íƒ€ì¼ë¡œ ê¸€ì„ ì¨ì¤ë‹ˆë‹¤</p>
                        </div>
                        <div>
                            <button class="btn secondary small" onclick="saveCurrentPost()">ğŸ’¾ ì €ì¥</button>
                            <button class="btn success small" onclick="publishPost()">ğŸš€ ë°œí–‰</button>
                        </div>
                    </div>
                    
                    <div class="editor-body">
                        <div class="loading" id="generationLoading">
                            <div class="spinner"></div>
                            <p>AIê°€ ë‹¹ì‹ ì˜ ìŠ¤íƒ€ì¼ë¡œ ê¸€ì„ ì‘ì„±í•˜ê³  ìˆìŠµë‹ˆë‹¤...</p>
                            <p><small>í‰ê·  30-60ì´ˆ ì†Œìš”ë©ë‹ˆë‹¤</small></p>
                        </div>
                        
                        <div class="editor-content" id="editorContent">
                            Firebaseì— ë¡œê·¸ì¸í•˜ë©´ ëª¨ë“  ë°ì´í„°ê°€ ì•ˆì „í•˜ê²Œ í´ë¼ìš°ë“œì— ì €ì¥ë©ë‹ˆë‹¤.
                            
                            ğŸ“ ì£¼ìš” ê°œì„ ì‚¬í•­:
                            âœ… ì‹¤ì‹œê°„ ë™ê¸°í™” - ì—¬ëŸ¬ ê¸°ê¸°ì—ì„œ ë™ì¼í•œ ë°ì´í„°
                            âœ… ì•ˆì „í•œ ë°±ì—… - ë°ì´í„° ìœ ì‹¤ ê±±ì • ì—†ìŒ
                            âœ… ë³´ì•ˆ ê°•í™” - API í‚¤ ì•”í˜¸í™” ì €ì¥
                            âœ… íŒ€ í˜‘ì—… - ê¶Œí•œ ê´€ë¦¬ ì‹œìŠ¤í…œ
                            âœ… í™•ì¥ì„± - ëŒ€ëŸ‰ ë°ì´í„° ì²˜ë¦¬ ê°€ëŠ¥
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Firebase ì„¤ì • - ì‹¤ì œ í”„ë¡œì íŠ¸ ì—°ê²°ë¨
        const firebaseConfig = {
            apiKey: "AIzaSyDd19AiwV3-mD0f6qSwEVo8pPpcNMbj60s",
            authDomain: "blog-automation-b1856.firebaseapp.com",
            projectId: "blog-automation-b1856",
            storageBucket: "blog-automation-b1856.firebasestorage.app",
            messagingSenderId: "1080912696882",
            appId: "1:1080912696882:web:c11b9b3f2500bc339a8e2b",
            measurementId: "G-5TCJGH7D74"
        };

        // Firebase ì´ˆê¸°í™”
        let app, auth, db, functions;
        let currentUser = null;
        let topics = [];
        let writingStyleSamples = [];
        let currentTopicId = null;
        let currentPost = null;
        let offlineMode = false;

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”„ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ, Firebase í™•ì¸ ì¤‘...');
            
            // Firebase SDK ë¡œë”© ìƒíƒœ í™•ì¸
            checkFirebaseSDK();
        });

        // Firebase SDK ë¡œë”© í™•ì¸ ë° ì¬ì‹œë„
        function checkFirebaseSDK() {
            let attempts = 0;
            const maxAttempts = 10;
            
            const checkInterval = setInterval(() => {
                attempts++;
                console.log(`ğŸ” Firebase SDK í™•ì¸ ì‹œë„ ${attempts}/${maxAttempts}`);
                
                if (typeof firebase !== 'undefined') {
                    console.log('âœ… Firebase SDK ë¡œë“œ ì„±ê³µ!');
                    clearInterval(checkInterval);
                    initializeFirebase();
                } else if (attempts >= maxAttempts) {
                    console.error('âŒ Firebase SDK ë¡œë“œ ì‹¤íŒ¨ - ìµœëŒ€ ì‹œë„ ì´ˆê³¼');
                    clearInterval(checkInterval);
                    showFirebaseLoadError();
                }
            }, 500); // 0.5ì´ˆë§ˆë‹¤ ì²´í¬
        }

        // Firebase ë¡œë”© ì‹¤íŒ¨ ì²˜ë¦¬
        function showFirebaseLoadError() {
            updateFirebaseStatus('error', 'âŒ Firebase SDK ë¡œë“œ ì‹¤íŒ¨');
            
            showAlert('error', `âŒ Firebase SDKë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.

ğŸ”§ í•´ê²° ë°©ë²•ì„ ì‹œë„í•´ë³´ì„¸ìš”:

1ï¸âƒ£ ì¸í„°ë„· ì—°ê²° í™•ì¸
2ï¸âƒ£ ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ (Ctrl+Shift+Delete)
3ï¸âƒ£ í˜ì´ì§€ ê°•ì œ ìƒˆë¡œê³ ì¹¨ (Ctrl+F5)
4ï¸âƒ£ ë‹¤ë¥¸ ë¸Œë¼ìš°ì €ì—ì„œ ì‹œë„
5ï¸âƒ£ VPN ì‚¬ìš© ì¤‘ì´ë©´ ë„ê¸°
6ï¸âƒ£ ê´‘ê³  ì°¨ë‹¨ê¸° ì¼ì‹œ ë¹„í™œì„±í™”

ë˜ëŠ” ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ê³„ì† ì‚¬ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.`);
            
            // ìˆ˜ë™ ë¡œë”© ë²„íŠ¼ í‘œì‹œ
            showManualLoadOption();
        }

        // ìˆ˜ë™ Firebase ë¡œë”© ì˜µì…˜
        function showManualLoadOption() {
            const firebaseStatus = document.querySelector('.firebase-status');
            
            if (firebaseStatus) {
                firebaseStatus.innerHTML = `
                    <div class="status-indicator error"></div>
                    <span>Firebase SDK ë¡œë“œ ì‹¤íŒ¨</span>
                    <div style="flex: 1;"></div>
                    <button class="btn small" onclick="retryFirebaseLoad()">ğŸ”„ ë‹¤ì‹œ ì‹œë„</button>
                    <button class="btn small secondary" onclick="continueOffline()">ğŸ“± ì˜¤í”„ë¼ì¸ ëª¨ë“œ</button>
                `;
            }
        }

        // Firebase ì¬ë¡œë”© ì‹œë„
        function retryFirebaseLoad() {
            console.log('ğŸ”„ Firebase ì¬ë¡œë”© ì‹œë„...');
            updateFirebaseStatus('warning', 'ğŸ”„ Firebase ì¬ì—°ê²° ì¤‘...');
            
            // ê¸°ì¡´ ìŠ¤í¬ë¦½íŠ¸ ì œê±°
            const existingScripts = document.querySelectorAll('script[src*="firebasejs"]');
            existingScripts.forEach(script => script.remove());
            
            // ìƒˆë¡œìš´ ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ
            loadFirebaseScripts();
        }

        // Firebase ìŠ¤í¬ë¦½íŠ¸ ë™ì  ë¡œë“œ
        function loadFirebaseScripts() {
            const scripts = [
                'https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js',
                'https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js',
                'https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js',
                'https://www.gstatic.com/firebasejs/8.10.1/firebase-storage.js'
            ];
            
            let loadedCount = 0;
            
            scripts.forEach((src, index) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = () => {
                    loadedCount++;
                    console.log(`âœ… Firebase ìŠ¤í¬ë¦½íŠ¸ ${loadedCount}/${scripts.length} ë¡œë“œë¨`);
                    
                    if (loadedCount === scripts.length) {
                        console.log('ğŸ‰ ëª¨ë“  Firebase ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì™„ë£Œ!');
                        setTimeout(() => {
                            checkFirebaseSDK();
                        }, 1000);
                    }
                };
                script.onerror = () => {
                    console.error(`âŒ Firebase ìŠ¤í¬ë¦½íŠ¸ ë¡œë“œ ì‹¤íŒ¨: ${src}`);
                };
                document.head.appendChild(script);
            });
        }

        // Firebase ì´ˆê¸°í™” (v8 ë¬¸ë²•)
        function initializeFirebase() {
            try {
                // Firebase ì „ì—­ ê°ì²´ ì¬í™•ì¸
                if (typeof firebase === 'undefined') {
                    throw new Error('Firebase ì „ì—­ ê°ì²´ê°€ ì—†ìŠµë‹ˆë‹¤.');
                }

                console.log('ğŸ”¥ Firebase ì´ˆê¸°í™” ì‹œì‘...');
                console.log('ğŸ“¦ ì‚¬ìš© ê°€ëŠ¥í•œ Firebase ì„œë¹„ìŠ¤:', Object.keys(firebase));
                
                // Firebase ì•± ì´ˆê¸°í™”
                app = firebase.initializeApp(firebaseConfig);
                
                // ê° ì„œë¹„ìŠ¤ ì´ˆê¸°í™”
                if (firebase.auth) {
                    auth = firebase.auth();
                    console.log('âœ… Firebase Auth ì´ˆê¸°í™” ì™„ë£Œ');
                } else {
                    console.warn('âš ï¸ Firebase Auth ì„œë¹„ìŠ¤ ì—†ìŒ');
                }
                
                if (firebase.firestore) {
                    db = firebase.firestore();
                    console.log('âœ… Firestore ì´ˆê¸°í™” ì™„ë£Œ');
                } else {
                    console.warn('âš ï¸ Firestore ì„œë¹„ìŠ¤ ì—†ìŒ');
                }
                
                if (firebase.storage) {
                    console.log('âœ… Firebase Storage ì‚¬ìš© ê°€ëŠ¥');
                }
                
                if (firebase.functions) {
                    functions = firebase.functions();
                    console.log('âœ… Firebase Functions ì´ˆê¸°í™” ì™„ë£Œ');
                }

                // ì¸ì¦ ìƒíƒœ ë³€í™” ê°ì§€
                if (auth) {
                    auth.onAuthStateChanged(onAuthStateChanged);
                }

                updateFirebaseStatus('connected', `âœ… Firebase ì—°ê²°ë¨ (${firebaseConfig.projectId})`);
                console.log('âœ… Firebase ì™„ì „ ì´ˆê¸°í™” ì„±ê³µ!');

                showAlert('success', `ğŸ‰ Firebase ì—°ê²° ì„±ê³µ!
                
ğŸ“¦ í”„ë¡œì íŠ¸: ${firebaseConfig.projectId}
âœ… Authentication: ${auth ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}
âœ… Firestore: ${db ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}
âœ… Storage: ${firebase.storage ? 'í™œì„±í™”' : 'ë¹„í™œì„±í™”'}

ğŸš€ ì´ì œ Google ë¡œê·¸ì¸ì„ ì‹œë„í•˜ê±°ë‚˜ ì—°ê²° í…ŒìŠ¤íŠ¸ë¥¼ í•´ë³´ì„¸ìš”!`);

            } catch (error) {
                console.error('âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                updateFirebaseStatus('error', 'Firebase ì´ˆê¸°í™” ì‹¤íŒ¨: ' + error.message);
                
                showAlert('error', `âŒ Firebase ì´ˆê¸°í™” ì‹¤íŒ¨

ì˜¤ë¥˜: ${error.message}

ğŸ”§ ë¬¸ì œ í•´ê²°:
1. Firebase ì½˜ì†”ì—ì„œ ì„œë¹„ìŠ¤ í™œì„±í™” í™•ì¸
2. ì„¤ì • ì •ë³´ ì¬í™•ì¸
3. ë„¤íŠ¸ì›Œí¬ ì—°ê²° ìƒíƒœ í™•ì¸
4. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ìì„¸í•œ ì˜¤ë¥˜ í™•ì¸`);
                
                showOfflineOption();
            }
        }

        // Firebase ë°ëª¨ ëª¨ë“œ
        function showFirebaseDemo() {
            updateFirebaseStatus('warning', 'Firebase ë°ëª¨ ëª¨ë“œ (ì‹¤ì œ ì—°ê²° ìœ„í•´ ì„¤ì • í•„ìš”)');
            showAlert('warning', `
ğŸ”§ Firebase ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤!

ì‹¤ì œ ì‚¬ìš©ì„ ìœ„í•´ ë‹¤ìŒ ë‹¨ê³„ë¥¼ ì™„ë£Œí•˜ì„¸ìš”:

1. Firebase ì½˜ì†”ì—ì„œ í”„ë¡œì íŠ¸ ìƒì„±
2. Authentication í™œì„±í™” (Google, Email)
3. Firestore Database ìƒì„±
4. ì„¤ì • ì •ë³´ë¥¼ ì½”ë“œì— ì…ë ¥

í˜„ì¬ëŠ” ë°ëª¨ ëª¨ë“œë¡œ ì‘ë™í•©ë‹ˆë‹¤.
            `);
            
            // ë°ëª¨ìš© ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
            setTimeout(() => {
                showUserInfo({
                    uid: 'demo-user',
                    email: 'demo@example.com',
                    displayName: 'Demo User'
                });
                loadDemoData();
            }, 2000);
        }

        // ì¸ì¦ ìƒíƒœ ë³€í™” ì²˜ë¦¬
        function onAuthStateChanged(user) {
            if (user) {
                currentUser = user;
                showUserInfo(user);
                loadUserData();
            } else {
                currentUser = null;
                showAuthSection();
            }
        }

        // ì‚¬ìš©ì ì •ë³´ í‘œì‹œ
        function showUserInfo(user) {
            document.getElementById('authSection').classList.add('hidden');
            document.getElementById('userInfo').classList.remove('hidden');
            document.getElementById('mainContent').classList.remove('hidden');

            document.getElementById('userName').textContent = user.displayName || 'ì‚¬ìš©ì';
            document.getElementById('userEmail').textContent = user.email;
            document.getElementById('userAvatar').textContent = (user.displayName || user.email || 'U')[0].toUpperCase();

            showAlert('success', `í™˜ì˜í•©ë‹ˆë‹¤, ${user.displayName || user.email}ë‹˜! ğŸ‰`);
        }

        // ë¡œê·¸ì¸ ì„¹ì…˜ í‘œì‹œ
        function showAuthSection() {
            document.getElementById('authSection').classList.remove('hidden');
            document.getElementById('userInfo').classList.add('hidden');
            document.getElementById('mainContent').classList.add('hidden');
        }

        // ì´ë©”ì¼ ë¡œê·¸ì¸
        async function loginWithEmail() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showAlert('warning', 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                await auth.signInWithEmailAndPassword(email, password);
                showAlert('success', 'ë¡œê·¸ì¸ ì„±ê³µ!');
            } catch (error) {
                showAlert('error', 'ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ì´ë©”ì¼ íšŒì›ê°€ì…
        async function signupWithEmail() {
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            if (!email || !password) {
                showAlert('warning', 'ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (password.length < 6) {
                showAlert('warning', 'ë¹„ë°€ë²ˆí˜¸ëŠ” 6ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤.');
                return;
            }

            try {
                await auth.createUserWithEmailAndPassword(email, password);
                showAlert('success', 'íšŒì›ê°€ì… ì„±ê³µ!');
            } catch (error) {
                showAlert('error', 'íšŒì›ê°€ì… ì‹¤íŒ¨: ' + error.message);
            }
        }

        // Google ë¡œê·¸ì¸
        async function loginWithGoogle() {
            if (!auth) {
                showAlert('error', 'Firebaseê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                const provider = new firebase.auth.GoogleAuthProvider();
                await auth.signInWithPopup(provider);
                showAlert('success', 'Google ë¡œê·¸ì¸ ì„±ê³µ!');
            } catch (error) {
                showAlert('error', 'Google ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        async function logout() {
            try {
                if (auth && currentUser) {
                    await auth.signOut();
                }
                currentUser = null;
                topics = [];
                writingStyleSamples = [];
                showAuthSection();
                showAlert('info', 'ë¡œê·¸ì•„ì›ƒë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                showAlert('error', 'ë¡œê·¸ì•„ì›ƒ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ì˜¤í”„ë¼ì¸ ëª¨ë“œ ê³„ì†
        function continueOffline() {
            offlineMode = true;
            updateFirebaseStatus('warning', 'ì˜¤í”„ë¼ì¸ ëª¨ë“œ (LocalStorage ì‚¬ìš©)');
            
            showUserInfo({
                uid: 'offline-user',
                email: 'offline@local.com',
                displayName: 'ì˜¤í”„ë¼ì¸ ì‚¬ìš©ì'
            });

            loadOfflineData();
            showAlert('warning', 'âš ï¸ ì˜¤í”„ë¼ì¸ ëª¨ë“œì…ë‹ˆë‹¤. ë°ì´í„°ëŠ” ë¡œì»¬ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤.');
        }

        // Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ (v8 ë¬¸ë²•)
        async function testFirebaseConnection() {
            if (typeof firebase === 'undefined') {
                showAlert('error', 'âŒ Firebase SDKê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„ ë²„íŠ¼ì„ í´ë¦­í•˜ì„¸ìš”.');
                return;
            }

            if (!db) {
                showAlert('error', 'âŒ Firestoreê°€ ì´ˆê¸°í™”ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
                return;
            }

            try {
                updateFirebaseStatus('warning', 'ğŸ”„ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì¤‘...');
                
                console.log('ğŸ§ª Firestore ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹œì‘...');
                
                // Firestore ì—°ê²° í…ŒìŠ¤íŠ¸
                const testCollection = db.collection('test');
                const testDoc = testCollection.doc('connection');
                
                await testDoc.set({
                    timestamp: firebase.firestore.FieldValue.serverTimestamp(),
                    test: true,
                    projectId: firebaseConfig.projectId,
                    userAgent: navigator.userAgent,
                    testTime: new Date().toISOString()
                });

                console.log('âœ… Firestore ì“°ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ');

                // í…ŒìŠ¤íŠ¸ ë¬¸ì„œ ì½ê¸°
                const doc = await testDoc.get();
                if (doc.exists) {
                    console.log('âœ… Firestore ì½ê¸° í…ŒìŠ¤íŠ¸ ì„±ê³µ');
                    console.log('ğŸ“„ í…ŒìŠ¤íŠ¸ ë°ì´í„°:', doc.data());
                }

                // í…ŒìŠ¤íŠ¸ ë¬¸ì„œ ì‚­ì œ
                await testDoc.delete();
                console.log('âœ… Firestore ì‚­ì œ í…ŒìŠ¤íŠ¸ ì„±ê³µ');
                
                updateFirebaseStatus('connected', 'âœ… Firebase ì™„ì „ ì—°ê²°ë¨ (ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼)');
                
                showAlert('success', `ğŸ‰ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì™„ë£Œ!
                
âœ… Firebase SDK: ì •ìƒ ë¡œë“œ
âœ… í”„ë¡œì íŠ¸ ì—°ê²°: ${firebaseConfig.projectId}
âœ… Firestore ì½ê¸°: ì •ìƒ
âœ… Firestore ì“°ê¸°: ì •ìƒ
âœ… Firestore ì‚­ì œ: ì •ìƒ
âœ… ì„œë²„ ì‹œê°„ ë™ê¸°í™”: ì •ìƒ

ğŸš€ ì´ì œ ì™„ì „íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤!
Authenticationê³¼ Storageë„ í™œì„±í™”í•˜ë©´ ëª¨ë“  ê¸°ëŠ¥ì„ ì‚¬ìš©í•  ìˆ˜ ìˆì–´ìš”.`);

            } catch (error) {
                console.error('âŒ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨:', error);
                updateFirebaseStatus('error', `Firebase í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.code || error.message}`);
                
                let errorMessage = 'âŒ Firebase ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨\n\n';
                let solutions = '';
                
                if (error.code === 'permission-denied') {
                    errorMessage += 'ğŸ”’ ê¶Œí•œ ê±°ë¶€: Firestore ë³´ì•ˆ ê·œì¹™ ë¬¸ì œ';
                    solutions = `ğŸ“‹ í•´ê²° ë°©ë²•:
1. Firebase ì½˜ì†” â†’ Firestore Database ìƒì„±
2. ë³´ì•ˆ ê·œì¹™ì„ "í…ŒìŠ¤íŠ¸ ëª¨ë“œ"ë¡œ ì„¤ì •:

allow read, write: if request.time < timestamp.date(2024, 12, 31);

3. ë˜ëŠ” Authentication ë¨¼ì € í™œì„±í™”`;
                    
                } else if (error.code === 'unavailable' || error.code === 'deadline-exceeded') {
                    errorMessage += 'ğŸŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: Firestore ì„œë¹„ìŠ¤ì— ì—°ê²°í•  ìˆ˜ ì—†ìŒ';
                    solutions = `ğŸ“‹ í•´ê²° ë°©ë²•:
1. ì¸í„°ë„· ì—°ê²° í™•ì¸
2. Firebase ì½˜ì†”ì—ì„œ Firestore Database ìƒì„±í–ˆëŠ”ì§€ í™•ì¸
3. VPN ì‚¬ìš© ì¤‘ì´ë©´ ì ì‹œ ë„ê¸°
4. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„`;
                    
                } else if (error.code === 'failed-precondition') {
                    errorMessage += 'âš™ï¸ ì„¤ì • ì˜¤ë¥˜: Firestoreê°€ ì•„ì§ ì„¤ì •ë˜ì§€ ì•ŠìŒ';
                    solutions = `ğŸ“‹ í•´ê²° ë°©ë²•:
1. Firebase ì½˜ì†” ì ‘ì†
2. Firestore Database â†’ "ë°ì´í„°ë² ì´ìŠ¤ ë§Œë“¤ê¸°"
3. í…ŒìŠ¤íŠ¸ ëª¨ë“œ ì„ íƒ
4. ìœ„ì¹˜: asia-northeast3 (ì„œìš¸) ì„ íƒ`;
                    
                } else {
                    errorMessage += `â“ ì•Œ ìˆ˜ ì—†ëŠ” ì˜¤ë¥˜
ì½”ë“œ: ${error.code || 'unknown'}
ë©”ì‹œì§€: ${error.message}`;
                    solutions = `ğŸ“‹ í•´ê²° ë°©ë²•:
1. ë¸Œë¼ìš°ì € ì½˜ì†”ì—ì„œ ìì„¸í•œ ì˜¤ë¥˜ í™•ì¸
2. Firebase ì½˜ì†”ì—ì„œ ëª¨ë“  ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸
3. í”„ë¡œì íŠ¸ ì„¤ì • ì¬í™•ì¸`;
                }
                
                showAlert('error', errorMessage + '\n\n' + solutions);
            }
        }

        // Firebase ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateFirebaseStatus(status, text) {
            const indicator = document.getElementById('firebaseStatus');
            const statusText = document.getElementById('statusText');

            indicator.className = 'status-indicator';
            if (status === 'connected') {
                indicator.classList.add('connected');
            } else if (status === 'error') {
                indicator.classList.add('error');
            }

            statusText.textContent = text;
        }

        // ì‚¬ìš©ì ë°ì´í„° ë¡œë“œ (Firebase)
        async function loadUserData() {
            if (!currentUser || !db || offlineMode) {
                loadOfflineData();
                return;
            }

            try {
                const userId = currentUser.uid;

                // ì£¼ì œ ë°ì´í„° ë¡œë“œ
                const topicsSnapshot = await db.collection('users').doc(userId).collection('topics').orderBy('createdAt', 'desc').get();
                topics = topicsSnapshot.docs.map(doc => ({
                    id: doc.id,
                    ...doc.data()
                }));

                // ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë¡œë“œ
                const stylesSnapshot = await db.collection('users').doc(userId).collection('writingStyles').get();
                writingStyleSamples = stylesSnapshot.docs.map(doc => doc.data().content);

                updateUI();
                showAlert('success', 'ğŸ’¾ í´ë¼ìš°ë“œì—ì„œ ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì™”ìŠµë‹ˆë‹¤.');

            } catch (error) {
                console.error('ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                showAlert('error', 'ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨: ' + error.message);
                loadOfflineData(); // ì‹¤íŒ¨ì‹œ ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ
            }
        }

        // ì˜¤í”„ë¼ì¸ ë°ì´í„° ë¡œë“œ
        function loadOfflineData() {
            const savedTopics = localStorage.getItem('blog_topics');
            const savedStyles = localStorage.getItem('writing_style_samples');
            
            if (savedTopics) {
                topics = JSON.parse(savedTopics);
            }
            
            if (savedStyles) {
                writingStyleSamples = JSON.parse(savedStyles);
            }

            updateUI();
        }

        // ë°ëª¨ ë°ì´í„° ë¡œë“œ
        function loadDemoData() {
            topics = [
                {
                    id: 'demo-1',
                    content: 'ğŸ“Œ ê²¨ìš¸ì²  ëª¨ë°œ ê´€ë¦¬ ê¿€íŒ\n- ê±´ì¡°í•œ ê²¨ìš¸ ê³µê¸° ë•Œë¬¸ì— ë¨¸ë¦¬ê°€ ë„ˆë¬´ í‘¸ì„í•´ì§\n- ì •ì „ê¸°ë„ ì‹¬í•˜ê³  ìœ¤ê¸°ë„ ì—†ì–´ì§\n- ê°„ë‹¨í•˜ë©´ì„œë„ íš¨ê³¼ì ì¸ ê´€ë¦¬ë²• ì•Œë ¤ì£¼ê¸°',
                    status: 'pending',
                    createdAt: new Date().toISOString()
                },
                {
                    id: 'demo-2',
                    content: 'ğŸ“Œ 20ëŒ€ë¥¼ ìœ„í•œ í—¤ì–´ì¼€ì–´ ë£¨í‹´\n- ëŒ€í•™ìƒì´ë‚˜ ì§ì¥ ì´ˆë…„ìƒë“¤ì´ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ”\n- ë¹„ìš© ë¶€ë‹´ ì ìœ¼ë©´ì„œë„ íš¨ê³¼ ì¢‹ì€ ì œí’ˆë“¤',
                    status: 'completed',
                    createdAt: new Date().toISOString(),
                    generatedPost: {
                        title: '20ëŒ€ë¥¼ ìœ„í•œ ì™„ë²½í•œ í—¤ì–´ì¼€ì–´ ë£¨í‹´',
                        content: 'ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ 20ëŒ€ë¥¼ ìœ„í•œ í—¤ì–´ì¼€ì–´ ë£¨í‹´ì— ëŒ€í•´ ë§ì”€ë“œë¦¬ë ¤ê³  í•´ìš”...',
                        quality: 95
                    }
                }
            ];

            writingStyleSamples = [
                'ì•ˆë…•í•˜ì„¸ìš”! í—¤ì–´ì¼€ì–´ ë•í›„ ë¯¼ì§€ì…ë‹ˆë‹¤ ğŸ˜Š ì˜¤ëŠ˜ì€ ì •ë§ì •ë§ ì¤‘ìš”í•œ ì–˜ê¸°ë¥¼ í•´ë³´ë ¤ê³  í•´ìš”. ê²¨ìš¸ë§Œ ë˜ë©´ ë¨¸ë¦¬ê°€ ì™„ì „ ì§šë‹¨ì´ ë˜ëŠ” ë¶„ë“¤ ìˆì£ ? ì €ë„ ì˜ˆì „ì—” ê·¸ë¬ê±°ë“ ìš” ã… ã… '
            ];

            updateUI();
        }

        // UI ì—…ë°ì´íŠ¸
        function updateUI() {
            renderTopicList();
            renderStyleSamples();
            updateStats();
        }

        // ìƒˆ ì£¼ì œ ì¶”ê°€
        async function addNewTopic() {
            const input = document.getElementById('newTopicInput');
            const content = input.value.trim();
            
            if (!content) {
                showAlert('warning', 'ì£¼ì œ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            const newTopic = {
                content: content,
                status: 'pending',
                createdAt: new Date().toISOString(),
                generatedPost: null,
                quality: null
            };

            try {
                if (currentUser && db && !offlineMode) {
                    // Firebaseì— ì €ì¥
                    const docRef = await db.collection('users').doc(currentUser.uid).collection('topics').add(newTopic);
                    newTopic.id = docRef.id;
                } else {
                    // ì˜¤í”„ë¼ì¸ ëª¨ë“œ
                    newTopic.id = Date.now().toString();
                }

                topics.unshift(newTopic);
                input.value = '';
                
                saveOfflineData();
                updateUI();
                
                showAlert('success', 'ìƒˆ ì£¼ì œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');

            } catch (error) {
                showAlert('error', 'ì£¼ì œ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // API í‚¤ ì €ì¥
        async function saveAPIKeys() {
            const claudeKey = document.getElementById('claudeKey').value;
            const openaiKey = document.getElementById('openaiKey').value;

            if (!claudeKey && !openaiKey) {
                showAlert('warning', 'API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                if (currentUser && db && !offlineMode) {
                    // Firebaseì— ì•”í˜¸í™”í•˜ì—¬ ì €ì¥ (ì‹¤ì œë¡œëŠ” Cloud Functions ì‚¬ìš© ê¶Œì¥)
                    await db.collection('users').doc(currentUser.uid).set({
                        apiKeys: {
                            claude: claudeKey ? 'ì•”í˜¸í™”ë¨' : null,
                            openai: openaiKey ? 'ì•”í˜¸í™”ë¨' : null,
                            updatedAt: firebase.firestore.FieldValue.serverTimestamp()
                        }
                    }, { merge: true });

                    showAlert('success', 'ğŸ” API í‚¤ê°€ ì•ˆì „í•˜ê²Œ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤!');
                } else {
                    // ì˜¤í”„ë¼ì¸ ëª¨ë“œëŠ” ë³´ì•ˆìƒ ê¶Œì¥í•˜ì§€ ì•ŠìŒ
                    localStorage.setItem('api_keys', JSON.stringify({
                        claude: claudeKey,
                        openai: openaiKey
                    }));
                    showAlert('warning', 'âš ï¸ ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œëŠ” API í‚¤ê°€ ì•ˆì „í•˜ì§€ ì•Šê²Œ ì €ì¥ë©ë‹ˆë‹¤.');
                }

            } catch (error) {
                showAlert('error', 'API í‚¤ ì €ì¥ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // API ì—°ê²° í…ŒìŠ¤íŠ¸
        async function testAPIConnection() {
            const claudeKey = document.getElementById('claudeKey').value;
            const openaiKey = document.getElementById('openaiKey').value;

            if (!claudeKey && !openaiKey) {
                showAlert('warning', 'í…ŒìŠ¤íŠ¸í•  API í‚¤ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            let results = [];

            // Claude API í…ŒìŠ¤íŠ¸
            if (claudeKey) {
                try {
                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                            'x-api-key': claudeKey,
                            'anthropic-version': '2023-06-01'
                        },
                        body: JSON.stringify({
                            model: 'claude-3-haiku-20240307',
                            max_tokens: 10,
                            messages: [{ role: 'user', content: 'Test' }]
                        })
                    });

                    if (response.ok) {
                        results.push('âœ… Claude API ì—°ê²° ì„±ê³µ');
                    } else {
                        results.push('âŒ Claude API ì—°ê²° ì‹¤íŒ¨');
                    }
                } catch (error) {
                    results.push('âŒ Claude API ì˜¤ë¥˜: ' + error.message);
                }
            }

            // OpenAI API í…ŒìŠ¤íŠ¸
            if (openaiKey) {
                try {
                    const response = await fetch('https://api.openai.com/v1/models', {
                        headers: {
                            'Authorization': `Bearer ${openaiKey}`
                        }
                    });

                    if (response.ok) {
                        results.push('âœ… OpenAI API ì—°ê²° ì„±ê³µ');
                    } else {
                        results.push('âŒ OpenAI API ì—°ê²° ì‹¤íŒ¨');
                    }
                } catch (error) {
                    results.push('âŒ OpenAI API ì˜¤ë¥˜: ' + error.message);
                }
            }

            showAlert('info', 'ğŸ§ª API ì—°ê²° í…ŒìŠ¤íŠ¸ ê²°ê³¼:\n\n' + results.join('\n'));
        }

        // ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ì¶”ê°€
        async function addStyleSample() {
            const input = document.getElementById('styleInput');
            const text = input.value.trim();
            
            if (!text) {
                showAlert('warning', 'ìŠ¤íƒ€ì¼ ìƒ˜í”Œì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            try {
                if (currentUser && db && !offlineMode) {
                    // Firebaseì— ì €ì¥
                    await db.collection('users').doc(currentUser.uid).collection('writingStyles').add({
                        content: text,
                        createdAt: firebase.firestore.FieldValue.serverTimestamp()
                    });
                }

                writingStyleSamples.push(text);
                input.value = '';
                
                saveOfflineData();
                renderStyleSamples();
                
                showAlert('success', 'ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ì´ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');

            } catch (error) {
                showAlert('error', 'ìŠ¤íƒ€ì¼ ì¶”ê°€ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ì˜¤í”„ë¼ì¸ ë°ì´í„° ì €ì¥
        function saveOfflineData() {
            if (offlineMode || !currentUser) {
                localStorage.setItem('blog_topics', JSON.stringify(topics));
                localStorage.setItem('writing_style_samples', JSON.stringify(writingStyleSamples));
            }
        }

        // ì£¼ì œ ëª©ë¡ ë Œë”ë§
        function renderTopicList() {
            const container = document.getElementById('topicList');
            
            if (topics.length === 0) {
                container.innerHTML = `
                    <div style="text-align: center; padding: 40px; color: var(--gray);">
                        <p>ğŸ¤” ì•„ì§ ì¶”ê°€ëœ ì£¼ì œê°€ ì—†ì–´ìš”.</p>
                        <p>ì™¼ìª½ì—ì„œ ì“°ê³  ì‹¶ì€ ì£¼ì œë¥¼ ì¶”ê°€í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = topics.map(topic => `
                <div class="topic-item ${topic.status}" onclick="selectTopic('${topic.id}')">
                    <div class="topic-header">
                        <div class="topic-status">
                            <div class="status-icon status-${getStatusClass(topic.status)}"></div>
                            ${getStatusText(topic.status)}
                        </div>
                        <small style="color: var(--gray);">${formatDate(topic.createdAt)}</small>
                    </div>
                    <div class="topic-content">
                        ${topic.content.length > 120 ? topic.content.substring(0, 120) + '...' : topic.content}
                    </div>
                    <div class="topic-actions">
                        <button class="btn small" onclick="event.stopPropagation(); generatePost('${topic.id}')">
                            ${topic.status === 'completed' ? 'ğŸ”„ ì¬ìƒì„±' : 'âœ¨ ê¸€ ìƒì„±'}
                        </button>
                        ${topic.status === 'completed' ? `
                            <button class="btn success small" onclick="event.stopPropagation(); publishPost('${topic.id}')">
                                ğŸš€ ë°œí–‰
                            </button>
                        ` : ''}
                        <button class="btn danger small" onclick="event.stopPropagation(); deleteTopic('${topic.id}')">
                            ğŸ—‘ï¸
                        </button>
                    </div>
                </div>
            `).join('');
        }

        // ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ë Œë”ë§
        function renderStyleSamples() {
            const container = document.getElementById('styleSamples');
            
            if (writingStyleSamples.length === 0) {
                container.innerHTML = '<p style="color: var(--gray); font-size: 0.9rem;">ì•„ì§ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ ìƒ˜í”Œì´ ì—†ì–´ìš”.</p>';
                return;
            }

            container.innerHTML = writingStyleSamples.map((sample, index) => `
                <div style="background: var(--light-gray); border: 1px solid var(--border); border-radius: 6px; padding: 12px; margin-bottom: 10px; font-size: 0.9rem; position: relative;">
                    <button style="position: absolute; top: 5px; right: 8px; background: none; border: none; color: var(--error); cursor: pointer; font-size: 1.2rem;" onclick="removeStyleSample(${index})">&times;</button>
                    ${sample.length > 100 ? sample.substring(0, 100) + '...' : sample}
                </div>
            `).join('');
        }

        // í†µê³„ ì—…ë°ì´íŠ¸
        function updateStats() {
            const total = topics.length;
            const completed = topics.filter(t => t.status === 'completed').length;
            const pending = topics.filter(t => t.status === 'pending').length;

            document.getElementById('totalTopics').textContent = total;
            document.getElementById('completedTopics').textContent = completed;
            document.getElementById('pendingTopics').textContent = pending;
        }

        // ì£¼ì œ ì„ íƒ
        function selectTopic(topicId) {
            const topic = topics.find(t => t.id === topicId);
            if (!topic) return;

            currentTopicId = topicId;
            
            document.getElementById('editorTitle').textContent = `âœï¸ ${topic.content.split('\n')[0].substring(0, 30)}...`;
            document.getElementById('editorSubtitle').textContent = `ìƒíƒœ: ${getStatusText(topic.status)}`;

            if (topic.generatedPost) {
                document.getElementById('editorContent').textContent = topic.generatedPost.content;
            } else {
                document.getElementById('editorContent').textContent = 'ì„ íƒëœ ì£¼ì œì…ë‹ˆë‹¤. "ê¸€ ìƒì„±" ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ AIê°€ ê¸€ì„ ì¨ë“œë¦¬ë„ë¡ í•˜ì„¸ìš”.';
            }
        }

        // ê¸€ ìƒì„± (ì„ì‹œ êµ¬í˜„)
        async function generatePost(topicId) {
            const topic = topics.find(t => t.id === topicId);
            if (!topic) return;

            topic.status = 'in-progress';
            renderTopicList();
            updateStats();

            const loading = document.getElementById('generationLoading');
            const content = document.getElementById('editorContent');
            loading.classList.add('active');
            content.style.display = 'none';

            try {
                // ì‹¤ì œ AI API í˜¸ì¶œì€ ì—¬ê¸°ì„œ êµ¬í˜„
                await new Promise(resolve => setTimeout(resolve, 3000)); // ì‹œë®¬ë ˆì´ì…˜

                const generatedPost = {
                    title: topic.content.split('\n')[0].replace(/^[ğŸ“Œ-]*\s*/, '') + ' - ì™„ë²½ ê°€ì´ë“œ',
                    content: `# ${topic.content.split('\n')[0].replace(/^[ğŸ“Œ-]*\s*/, '')}

ì•ˆë…•í•˜ì„¸ìš”! ì˜¤ëŠ˜ì€ ì •ë§ ì¤‘ìš”í•œ ì´ì•¼ê¸°ë¥¼ í•´ë³´ë ¤ê³  í•´ìš”.

${topic.content}

ì´ëŸ° ê³ ë¯¼ì„ í•´ê²°í•˜ëŠ” ì™„ë²½í•œ ë°©ë²•ë“¤ì„ ì•Œë ¤ë“œë¦´ê²Œìš”!

## ì£¼ìš” í¬ì¸íŠ¸ë“¤

1. **ê¸°ë³¸ ì›ë¦¬ ì´í•´í•˜ê¸°**
2. **ì‹¤ì „ ì ìš© ë°©ë²•**
3. **ì£¼ì˜ì‚¬í•­ê³¼ íŒë“¤**

ìì„¸í•œ ë‚´ìš©ì€ ê³„ì†í•´ì„œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤...`,
                    quality: 85 + Math.floor(Math.random() * 15)
                };

                topic.generatedPost = generatedPost;
                topic.status = 'completed';
                
                if (currentUser && db && !offlineMode) {
                    await db.collection('users').doc(currentUser.uid).collection('topics').doc(topic.id).update({
                        generatedPost: generatedPost,
                        status: 'completed'
                    });
                }

                saveOfflineData();
                renderTopicList();
                updateStats();

                document.getElementById('editorContent').textContent = generatedPost.content;
                showAlert('success', 'âœ¨ ê¸€ ìƒì„±ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤!');

            } catch (error) {
                topic.status = 'pending';
                showAlert('error', 'ê¸€ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤: ' + error.message);
            } finally {
                loading.classList.remove('active');
                content.style.display = 'block';
            }
        }

        // ë°°ì¹˜ ìƒì„± ì‹œì‘
        async function startBatchGeneration() {
            const pendingTopics = topics.filter(t => t.status === 'pending');
            
            if (pendingTopics.length === 0) {
                showAlert('warning', 'ìƒì„±í•  ì£¼ì œê°€ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            if (!confirm(`${pendingTopics.length}ê°œì˜ ì£¼ì œë¥¼ ëª¨ë‘ ê¸€ë¡œ ìƒì„±í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
                return;
            }

            for (let i = 0; i < pendingTopics.length; i++) {
                const topic = pendingTopics[i];
                showAlert('info', `${i + 1}/${pendingTopics.length} ìƒì„± ì¤‘: ${topic.content.substring(0, 30)}...`);
                await generatePost(topic.id);
                await new Promise(resolve => setTimeout(resolve, 1000));
            }

            showAlert('success', `ğŸ‰ ë°°ì¹˜ ìƒì„± ì™„ë£Œ! ${pendingTopics.length}ê°œì˜ ê¸€ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`);
        }

        // ì£¼ì œ ì‚­ì œ
        async function deleteTopic(topicId) {
            if (!confirm('ì´ ì£¼ì œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
            
            try {
                if (currentUser && db && !offlineMode) {
                    await db.collection('users').doc(currentUser.uid).collection('topics').doc(topicId).delete();
                }

                topics = topics.filter(t => t.id !== topicId);
                saveOfflineData();
                updateUI();
                
                if (currentTopicId === topicId) {
                    document.getElementById('editorContent').textContent = 'ì£¼ì œë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.';
                    currentTopicId = null;
                }

                showAlert('success', 'ì£¼ì œê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');

            } catch (error) {
                showAlert('error', 'ì‚­ì œ ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ìŠ¤íƒ€ì¼ ìƒ˜í”Œ ì œê±°
        async function removeStyleSample(index) {
            try {
                writingStyleSamples.splice(index, 1);
                saveOfflineData();
                renderStyleSamples();
                showAlert('success', 'ìŠ¤íƒ€ì¼ ìƒ˜í”Œì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.');
            } catch (error) {
                showAlert('error', 'ì œê±° ì‹¤íŒ¨: ' + error.message);
            }
        }

        // ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ ë¶„ì„
        function analyzeWritingStyle() {
            if (writingStyleSamples.length === 0) {
                showAlert('warning', 'ë¨¼ì € ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼ ìƒ˜í”Œì„ ì¶”ê°€í•´ì£¼ì„¸ìš”.');
                return;
            }

            const combinedText = writingStyleSamples.join(' ');
            
            const analysis = {
                tone: combinedText.includes('ğŸ˜Š') || combinedText.includes('ğŸ’•') ? 'ì¹œê·¼í•¨' : 'ì „ë¬¸ì ',
                formality: combinedText.includes('ìš”!') || combinedText.includes('í•´ìš”') ? 'ìºì£¼ì–¼' : 'ê²©ì‹',
                emoji: /[\u{1F600}-\u{1F64F}]|[\u{1F300}-\u{1F5FF}]|[\u{1F680}-\u{1F6FF}]|[\u{1F1E0}-\u{1F1FF}]|[\u{2600}-\u{26FF}]|[\u{2700}-\u{27BF}]/u.test(combinedText) ? 'ìì£¼ ì‚¬ìš©' : 'ê±°ì˜ ì‚¬ìš© ì•ˆí•¨',
                personality: combinedText.includes('ì •ë§') || combinedText.includes('ì™„ì „') ? 'ì—´ì •ì ' : 'ì°¨ë¶„í•¨'
            };

            const message = `ğŸ“Š ë¶„ì„ëœ ê¸€ì“°ê¸° ìŠ¤íƒ€ì¼:

ğŸ­ í†¤: ${analysis.tone}
ğŸ“ ë¬¸ì²´: ${analysis.formality}
ğŸ˜Š ì´ëª¨ì§€ ì‚¬ìš©: ${analysis.emoji}
ğŸ’­ ì„±ê²©: ${analysis.personality}

AIê°€ ì´ ìŠ¤íƒ€ì¼ì„ í•™ìŠµí•´ì„œ ë¹„ìŠ·í•˜ê²Œ ê¸€ì„ ì¨ë“œë¦´ê²Œìš”!`;

            showAlert('info', message);
        }

        // í˜„ì¬ ê¸€ ì €ì¥
        function saveCurrentPost() {
            if (!currentTopicId) {
                showAlert('warning', 'ì €ì¥í•  ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.');
                return;
            }

            showAlert('success', 'ê¸€ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.');
        }

        // ë¸”ë¡œê·¸ ë°œí–‰
        function publishPost(topicId = null) {
            const targetId = topicId || currentTopicId;
            if (!targetId) {
                showAlert('warning', 'ë°œí–‰í•  ê¸€ì„ ì„ íƒí•´ì£¼ì„¸ìš”.');
                return;
            }

            showAlert('success', 'ë¸”ë¡œê·¸ì— ë°œí–‰ë˜ì—ˆìŠµë‹ˆë‹¤! (ì‹¤ì œ ì—°ë™ ì‹œ ìë™ ë°œí–‰ë©ë‹ˆë‹¤)');
        }

        // ì˜¤í”„ë¼ì¸ ì˜µì…˜ í‘œì‹œ
        function showOfflineOption() {
            showAlert('warning', `
Firebase ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.

ğŸ“± ì˜¤í”„ë¼ì¸ ëª¨ë“œë¡œ ê³„ì† ì‚¬ìš©í•˜ì‹œê±°ë‚˜
ğŸ”§ Firebase ì„¤ì •ì„ í™•ì¸í•´ì£¼ì„¸ìš”.

ì˜¤í”„ë¼ì¸ ëª¨ë“œì—ì„œëŠ”:
- ë°ì´í„°ê°€ ë¡œì»¬ì—ë§Œ ì €ì¥ë©ë‹ˆë‹¤
- ë‹¤ë¥¸ ê¸°ê¸°ì™€ ë™ê¸°í™”ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- API í‚¤ê°€ ì•ˆì „í•˜ì§€ ì•Šê²Œ ì €ì¥ë©ë‹ˆë‹¤
            `);
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function getStatusClass(status) {
            switch(status) {
                case 'completed': return 'completed';
                case 'in-progress': return 'progress';
                default: return 'pending';
            }
        }

        function getStatusText(status) {
            switch(status) {
                case 'completed': return 'âœ… ì™„ë£Œ';
                case 'in-progress': return 'â³ ìƒì„± ì¤‘';
                default: return 'â­• ëŒ€ê¸° ì¤‘';
            }
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('ko-KR', { month: 'short', day: 'numeric' });
        }

        function showAlert(type, message) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert ${type}`;
            alertDiv.innerHTML = `
                <strong>${type === 'success' ? 'âœ…' : type === 'warning' ? 'âš ï¸' : type === 'error' ? 'âŒ' : 'â„¹ï¸'}</strong> 
                ${message.replace(/\n/g, '<br>')}
            `;
            
            const container = document.querySelector('.container');
            container.insertBefore(alertDiv, container.firstChild);
            
            setTimeout(() => {
                alertDiv.remove();
            }, type === 'info' ? 8000 : 5000);
        }
    </script>
</body>
</html>
