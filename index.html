<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HAIRGATOR Blog Auto | 헤어케어 전문 블로그 자동화 시스템</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        /* 기본 스타일 */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #667eea;
            --secondary-color: #764ba2;
            --accent-color: #f093fb;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --text-color: #1f2937;
            --text-light: #6b7280;
            --bg-color: #ffffff;
            --bg-light: #f8fafc;
            --border-color: #e5e7eb;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.15);
            --border-radius: 8px;
            --transition: all 0.3s ease;
        }
        
        body {
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, sans-serif;
            background: var(--bg-light);
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 0;
        }
        
        /* 헤더 */
        .header {
            background: linear-gradient(135deg, var(--primary-color) 0%, var(--secondary-color) 100%);
            color: white;
            padding: 2rem;
            text-align: center;
            box-shadow: var(--shadow-lg);
            margin-bottom: 2rem;
        }
        
        .brand-logo {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
        
        .brand-tagline {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 1rem;
        }
        
        .brand-features {
            display: flex;
            justify-content: center;
            gap: 2rem;
            flex-wrap: wrap;
            margin-top: 1rem;
        }
        
        .feature-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.9rem;
            backdrop-filter: blur(10px);
        }
        
        /* 컨테이너 */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 1rem;
            display: grid;
            grid-template-columns: 350px 1fr 350px;
            gap: 2rem;
            min-height: calc(100vh - 200px);
        }
        
        /* 사이드바 */
        .sidebar {
            background: var(--bg-color);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            height: fit-content;
            position: sticky;
            top: 2rem;
        }
        
        .sidebar h3 {
            color: var(--primary-color);
            margin-bottom: 1rem;
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        /* 메인 에디터 */
        .main-editor {
            background: var(--bg-color);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow);
            overflow: hidden;
        }
        
        /* 탭 */
        .tab-nav {
            background: var(--bg-light);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            overflow-x: auto;
        }
        
        .tab-btn, .editor-tab {
            background: none;
            border: none;
            padding: 1rem 1.5rem;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-light);
            border-bottom: 3px solid transparent;
            transition: var(--transition);
            white-space: nowrap;
        }
        
        .tab-btn:hover, .editor-tab:hover {
            color: var(--primary-color);
            background: rgba(102, 126, 234, 0.1);
        }
        
        .tab-btn.active, .editor-tab.active {
            color: var(--primary-color);
            border-bottom-color: var(--primary-color);
            background: white;
        }
        
        /* 탭 콘텐츠 */
        .tab-content {
            display: none;
            padding: 2rem;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* 폼 요소들 */
        .form-group {
            margin-bottom: 1.5rem;
        }
        
        .form-label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 500;
            color: var(--text-color);
        }
        
        .form-input, .form-textarea, .form-select {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            font-size: 1rem;
            transition: var(--transition);
            font-family: inherit;
        }
        
        .form-input:focus, .form-textarea:focus, .form-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }
        
        .form-textarea {
            min-height: 300px;
            resize: vertical;
            font-family: 'Courier New', monospace;
        }
        
        /* 버튼들 */
        .btn {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            text-decoration: none;
            white-space: nowrap;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }
        
        .btn-secondary {
            background: var(--bg-light);
            color: var(--text-color);
            border: 2px solid var(--border-color);
        }
        
        .btn-secondary:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        
        .btn-success {
            background: var(--success-color);
            color: white;
        }
        
        .btn-warning {
            background: var(--warning-color);
            color: white;
        }
        
        .btn-error {
            background: var(--error-color);
            color: white;
        }
        
        /* 글감 큐 스타일 */
        .queue-item {
            padding: 1rem;
            border: 2px solid var(--border-color);
            border-radius: var(--border-radius);
            margin-bottom: 0.5rem;
            cursor: pointer;
            transition: var(--transition);
            background: var(--bg-color);
        }
        
        .queue-item:hover {
            border-color: var(--primary-color);
            transform: translateY(-1px);
            box-shadow: var(--shadow);
        }
        
        .queue-item.processing {
            border-color: var(--warning-color);
            background: rgba(245, 158, 11, 0.1);
        }
        
        .queue-item.completed {
            border-color: var(--success-color);
            background: rgba(16, 185, 129, 0.1);
        }
        
        .queue-item.failed {
            border-color: var(--error-color);
            background: rgba(239, 68, 68, 0.1);
        }
        
        .queue-title {
            font-weight: 600;
            color: var(--text-color);
            margin-bottom: 0.5rem;
        }
        
        .queue-meta {
            font-size: 0.9rem;
            color: var(--text-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .queue-status {
            padding: 0.25rem 0.5rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }
        
        .queue-status.waiting {
            background: var(--bg-light);
            color: var(--text-light);
        }
        
        .queue-status.processing {
            background: var(--warning-color);
            color: white;
        }
        
        .queue-status.completed {
            background: var(--success-color);
            color: white;
        }
        
        .queue-status.failed {
            background: var(--error-color);
            color: white;
        }
        
        /* 품질 메트릭 */
        .quality-score {
            font-size: 2rem;
            font-weight: 700;
            text-align: center;
            padding: 1rem;
            border-radius: var(--border-radius);
            margin-bottom: 1rem;
        }
        
        .quality-score.excellent {
            background: var(--success-color);
            color: white;
        }
        
        .quality-score.good {
            background: #22c55e;
            color: white;
        }
        
        .quality-score.fair {
            background: var(--warning-color);
            color: white;
        }
        
        .quality-score.poor {
            background: var(--error-color);
            color: white;
        }
        
        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.75rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .metric-item:last-child {
            border-bottom: none;
        }
        
        .metric-bar {
            width: 100px;
            height: 8px;
            background: var(--bg-light);
            border-radius: 4px;
            overflow: hidden;
        }
        
        .metric-fill {
            height: 100%;
            transition: var(--transition);
        }
        
        .metric-fill.excellent {
            background: var(--success-color);
        }
        
        .metric-fill.good {
            background: #22c55e;
        }
        
        .metric-fill.fair {
            background: var(--warning-color);
        }
        
        .metric-fill.poor {
            background: var(--error-color);
        }
        
        /* 알림 */
        .notification-container {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
            max-width: 400px;
        }
        
        .notification {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-lg);
            margin-bottom: 1rem;
            overflow: hidden;
            animation: notificationSlideIn 0.3s ease forwards;
        }
        
        .notification.success {
            border-left: 4px solid var(--success-color);
        }
        
        .notification.warning {
            border-left: 4px solid var(--warning-color);
        }
        
        .notification.error {
            border-left: 4px solid var(--error-color);
        }
        
        .notification.info {
            border-left: 4px solid var(--primary-color);
        }
        
        .notification-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1rem 1rem 0.5rem;
        }
        
        .notification-title {
            font-weight: 600;
            color: var(--text-color);
        }
        
        .notification-close {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: var(--text-light);
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .notification-body {
            padding: 0 1rem 1rem;
            color: var(--text-light);
        }
        
        /* 애니메이션 */
        @keyframes notificationSlideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
        
        /* 로딩 스피너 */
        .btn-loader {
            display: none;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        /* 모달 */
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
        }
        
        .modal-content {
            background: white;
            margin: 5% auto;
            padding: 2rem;
            border-radius: var(--border-radius);
            width: 90%;
            max-width: 600px;
            max-height: 80vh;
            overflow-y: auto;
            box-shadow: var(--shadow-lg);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }
        
        .modal-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-color);
        }
        
        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            cursor: pointer;
            color: var(--text-light);
            padding: 0;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: var(--transition);
        }
        
        .modal-close:hover {
            background: var(--bg-light);
            color: var(--text-color);
        }
        
        /* 반응형 */
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 300px 1fr 300px;
                gap: 1rem;
            }
        }
        
        @media (max-width: 900px) {
            .container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }
            
            .sidebar {
                position: static;
            }
        }
        
        /* 유틸리티 클래스 */
        .hidden {
            display: none !important;
        }
        
        .text-center {
            text-align: center;
        }
        
        .flex {
            display: flex;
        }
        
        .items-center {
            align-items: center;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .gap-1 {
            gap: 0.5rem;
        }
        
        .gap-2 {
            gap: 1rem;
        }
        
        .mt-1 { margin-top: 0.5rem; }
        .mt-2 { margin-top: 1rem; }
        .mb-1 { margin-bottom: 0.5rem; }
        .mb-2 { margin-bottom: 1rem; }
    </style>
</head>
<body>
    <!-- 헤더 -->
    <div class="header">
        <div class="brand-logo">💇‍♀️ HAIRGATOR</div>
        <div class="brand-tagline">AI 기반 헤어케어 전문 블로그 자동화 시스템</div>
        <div class="brand-features">
            <div class="feature-badge">🤖 AI 콘텐츠 생성</div>
            <div class="feature-badge">📊 네이버 SEO 최적화</div>
            <div class="feature-badge">⚡ 실시간 품질 검사</div>
            <div class="feature-badge">📅 글감 큐 시스템</div>
        </div>
    </div>

    <!-- 메인 컨테이너 -->
    <div class="container">
        <!-- 왼쪽 사이드바 -->
        <div class="sidebar">
            <!-- 글감 큐 상태 -->
            <section class="queue-status-section">
                <h3>📝 글감 큐</h3>
                <div class="flex justify-between items-center mb-2">
                    <span>대기중: <strong id="queueWaiting">0</strong></span>
                    <span>완료: <strong id="queueCompleted">0</strong></span>
                </div>
                <div class="flex gap-1">
                    <button class="btn btn-primary" onclick="processNextInQueue()">
                        🤖 다음 글 작성
                    </button>
                    <button class="btn btn-secondary" onclick="showQueueManager()">
                        📋 글감 관리
                    </button>
                </div>
            </section>

            <!-- 빠른 글감 추가 -->
            <section class="quick-add-section mt-2">
                <h3>➕ 빠른 추가</h3>
                <div class="form-group">
                    <input type="text" id="quickTarget" class="form-input" placeholder="타겟 독자 (예: 30대 직장인 여성들)">
                </div>
                <div class="form-group">
                    <input type="text" id="quickTitle" class="form-input" placeholder="글 제목">
                </div>
                <div class="form-group">
                    <input type="text" id="quickKeywords" class="form-input" placeholder="키워드 (쉼표로 구분)">
                </div>
                <div class="form-group">
                    <select id="quickTone" class="form-select">
                        <option value="친근하고 실용적">친근하고 실용적</option>
                        <option value="전문적이면서 비즈니스 중심">전문적이면서 비즈니스 중심</option>
                        <option value="트렌디하고 캐주얼">트렌디하고 캐주얼</option>
                        <option value="신뢰감 있고 전문적">신뢰감 있고 전문적</option>
                        <option value="실무적이고 구체적">실무적이고 구체적</option>
                    </select>
                </div>
                <button class="btn btn-success" onclick="addQuickContent()">
                    ⚡ 큐에 추가
                </button>
            </section>

            <!-- 다음 처리 예정 글감 -->
            <section class="next-item-section mt-2">
                <h3>⏳ 다음 예정</h3>
                <div id="nextItemPreview">
                    <p class="text-center" style="color: #6b7280; font-style: italic;">큐가 비어있습니다</p>
                </div>
            </section>
        </div>

        <!-- 메인 에디터 -->
        <div class="main-editor">
            <!-- 에디터 탭 네비게이션 -->
            <div class="tab-nav">
                <button class="editor-tab active" data-tab="write">✍️ 글쓰기</button>
                <button class="editor-tab" data-tab="queue">📝 글감 큐</button>
                <button class="editor-tab" data-tab="seo">🔍 SEO</button>
                <button class="editor-tab" data-tab="image">🖼️ 이미지</button>
            </div>

            <!-- 글쓰기 탭 -->
            <div id="writeTab" class="tab-content active">
                <div class="form-group">
                    <label for="postTitle" class="form-label">제목</label>
                    <input type="text" id="postTitle" class="form-input" placeholder="AI가 생성한 제목이 여기에 표시됩니다">
                </div>

                <div class="form-group">
                    <label for="postContent" class="form-label">본문</label>
                    <textarea id="postContent" class="form-textarea" placeholder="AI가 생성한 콘텐츠가 여기에 표시됩니다..."></textarea>
                </div>

                <div class="form-group">
                    <div class="flex gap-2">
                        <input type="text" id="postTags" class="form-input" placeholder="태그 (쉼표로 구분)">
                        <select id="postCategory" class="form-select">
                            <option value="basic">기초 케어</option>
                            <option value="styling">스타일링</option>
                            <option value="treatment">트리트먼트</option>
                            <option value="trend">트렌드</option>
                        </select>
                    </div>
                </div>

                <!-- 생성 진행 상태 -->
                <div id="generationProgress" class="hidden mt-2">
                    <div style="background: #f3f4f6; padding: 1rem; border-radius: 8px; text-align: center;">
                        <div class="btn-loader" style="display: inline-block; margin-right: 0.5rem;"></div>
                        <span id="progressText">AI가 헤어케어 전문 콘텐츠를 생성하고 있습니다...</span>
                    </div>
                </div>

                <!-- 액션 버튼들 -->
                <div class="flex gap-2 mt-2">
                    <button class="btn btn-primary" onclick="processAllQueue()">
                        🚀 전체 처리
                    </button>
                    <button class="btn btn-secondary" onclick="checkQuality()">📊 품질 검사</button>
                    <button class="btn btn-success" onclick="publishContent()">
                        📤 발행하기
                    </button>
                </div>
            </div>

            <!-- 글감 큐 탭 -->
            <div id="queueTab" class="tab-content">
                <div class="flex justify-between items-center mb-2">
                    <h3>📋 글감 큐 관리</h3>
                    <div class="flex gap-1">
                        <button class="btn btn-secondary" onclick="filterQueue('all')">전체</button>
                        <button class="btn btn-secondary" onclick="filterQueue('waiting')">대기중</button>
                        <button class="btn btn-secondary" onclick="filterQueue('completed')">완료</button>
                        <button class="btn btn-secondary" onclick="filterQueue('failed')">실패</button>
                    </div>
                </div>
                
                <div id="queueContainer">
                    <!-- 글감 큐 아이템들이 여기에 표시됩니다 -->
                </div>

                <div class="flex gap-2 mt-2">
                    <button class="btn btn-success" onclick="showAddContentModal()">➕ 새 글감 추가</button>
                    <button class="btn btn-warning" onclick="clearCompletedQueue()">🗑️ 완료된 항목 삭제</button>
                </div>
            </div>

            <!-- SEO 탭 -->
            <div id="seoTab" class="tab-content">
                <div class="form-group">
                    <label for="seoTitle" class="form-label">SEO 제목</label>
                    <input type="text" id="seoTitle" class="form-input" placeholder="검색 최적화된 제목">
                </div>

                <div class="form-group">
                    <label for="metaDescription" class="form-label">메타 설명</label>
                    <textarea id="metaDescription" class="form-input" rows="3" placeholder="검색 결과에 표시될 설명"></textarea>
                </div>

                <div class="form-group">
                    <label for="primaryKeywords" class="form-label">주요 키워드</label>
                    <input type="text" id="primaryKeywords" class="form-input" placeholder="헤어케어, 샴푸, 트리트먼트">
                </div>

                <div class="flex gap-2 mt-2">
                    <button class="btn btn-primary" onclick="checkSEOScore()">📈 SEO 점수 체크</button>
                </div>
            </div>

            <!-- 이미지 탭 -->
            <div id="imageTab" class="tab-content">
                <div class="form-group">
                    <label for="imagePrompt" class="form-label">이미지 설명</label>
                    <input type="text" id="imagePrompt" class="form-input" placeholder="예: 건강한 머리카락을 가진 여성이 미소짓는 모습">
                    <button class="btn btn-primary mt-1" onclick="generateImage()">🎨 이미지 생성</button>
                </div>

                <div id="generatedImages" class="mt-2">
                    <!-- 생성된 이미지들이 여기에 표시됩니다 -->
                </div>
            </div>
        </div>

        <!-- 오른쪽 사이드바 -->
        <div class="sidebar">
            <!-- AI 연결 상태 -->
            <section class="ai-section">
                <h3>🤖 AI 서비스</h3>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border: 2px solid var(--border-color); border-radius: var(--border-radius); margin-bottom: 1rem; background: var(--bg-color);">
                    <div>
                        <div style="font-weight: 600; color: var(--text-color); margin-bottom: 0.25rem;">📝 Claude (글 작성)</div>
                        <div id="claudeStatus" style="font-size: 0.9rem; color: var(--success-color);">✅ 연결됨</div>
                    </div>
                    <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="testClaudeConnection()">테스트</button>
                </div>
                
                <div style="display: flex; justify-content: space-between; align-items: center; padding: 1rem; border: 2px solid var(--border-color); border-radius: var(--border-radius); margin-bottom: 1rem; background: var(--bg-color);">
                    <div>
                        <div style="font-weight: 600; color: var(--text-color); margin-bottom: 0.25rem;">🎨 OpenAI (이미지)</div>
                        <div id="openaiStatus" style="font-size: 0.9rem; color: var(--success-color);">✅ 연결됨</div>
                    </div>
                    <button class="btn btn-secondary" style="padding: 0.5rem 1rem; font-size: 0.9rem;" onclick="testOpenAIConnection()">테스트</button>
                </div>
            </section>

            <!-- 품질 메트릭 -->
            <section class="quality-section mt-2">
                <h3>📊 콘텐츠 품질</h3>
                <div id="overallQuality" class="quality-score">--</div>
                
                <div class="quality-metrics">
                    <div class="metric-item">
                        <span>글자 수</span>
                        <div class="flex items-center gap-1">
                            <span id="wordCount">--</span>
                            <div class="metric-bar">
                                <div id="wordCountBar" class="metric-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <span>가독성</span>
                        <div class="flex items-center gap-1">
                            <span id="readability">--</span>
                            <div class="metric-bar">
                                <div id="readabilityBar" class="metric-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <span>키워드 밀도</span>
                        <div class="flex items-center gap-1">
                            <span id="keywordDensity">--%</span>
                            <div class="metric-bar">
                                <div id="keywordDensityBar" class="metric-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="metric-item">
                        <span>구조 점수</span>
                        <div class="flex items-center gap-1">
                            <span id="structureScore">--</span>
                            <div class="metric-bar">
                                <div id="structureScoreBar" class="metric-fill" style="width: 0%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 자동화 설정 -->
            <section class="automation-section mt-2">
                <h3>⚙️ 자동화</h3>
                <div class="form-group">
                    <label class="flex items-center gap-1">
                        <input type="checkbox" id="automationEnabled" onchange="toggleAutomation()">
                        자동 처리 활성화
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="processInterval" class="form-label">처리 간격 (분)</label>
                    <select id="processInterval" class="form-select">
                        <option value="30">30분</option>
                        <option value="60">1시간</option>
                        <option value="120">2시간</option>
                        <option value="240">4시간</option>
                    </select>
                </div>
                
                <button class="btn btn-success" onclick="startAutomation()">🚀 자동화 시작</button>
            </section>
        </div>
    </div>

    <!-- 모달들 -->
    <!-- 글감 추가 모달 -->
    <div id="addContentModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 class="modal-title">➕ 새 글감 추가</h2>
                <button class="modal-close" onclick="closeModal('addContentModal')">&times;</button>
            </div>
            <div class="form-group">
                <label for="newTargetAudience" class="form-label">타겟 독자</label>
                <input type="text" id="newTargetAudience" class="form-input" placeholder="예: 30대 직장인 여성들">
            </div>
            <div class="form-group">
                <label for="newTitle" class="form-label">글 제목</label>
                <input type="text" id="newTitle" class="form-input" placeholder="예: 겨울철 건조한 모발 완벽 관리법">
            </div>
            <div class="form-group">
                <label for="newKeywords" class="form-label">키워드 (쉼표로 구분)</label>
                <input type="text" id="newKeywords" class="form-input" placeholder="예: 겨울, 건조, 헤어케어, 보습">
            </div>
            <div class="form-group">
                <label for="newTone" class="form-label">톤 앤 매너</label>
                <select id="newTone" class="form-select">
                    <option value="친근하고 실용적">친근하고 실용적</option>
                    <option value="전문적이면서 비즈니스 중심">전문적이면서 비즈니스 중심</option>
                    <option value="트렌디하고 캐주얼">트렌디하고 캐주얼</option>
                    <option value="신뢰감 있고 전문적">신뢰감 있고 전문적</option>
                    <option value="실무적이고 구체적">실무적이고 구체적</option>
                </select>
            </div>
            <div class="flex gap-2">
                <button class="btn btn-primary" onclick="addNewContent()">추가</button>
                <button class="btn btn-secondary" onclick="closeModal('addContentModal')">취소</button>
            </div>
        </div>
    </div>

    <!-- 알림 컨테이너 -->
    <div id="notificationContainer" class="notification-container">
        <!-- 알림들이 여기에 동적으로 추가됩니다 -->
    </div>

    <!-- JavaScript -->
    <script>
        // ===== 전역 변수 =====
        let contentQueue = [
            {
                id: 1,
                targetAudience: "30대 직장인 여성들",
                title: "겨울철 건조한 모발 완벽 관리법", 
                keywords: ["겨울", "건조", "헤어케어", "보습"],
                tone: "친근하고 실용적",
                status: "waiting"
            },
            {
                id: 2,
                targetAudience: "헤어샵 사장님들",
                title: "고객 재방문율 200% 높이는 상담 노하우",
                keywords: ["고객상담", "매출증대", "서비스", "재방문"],
                tone: "전문적이면서 비즈니스 중심",
                status: "waiting"
            },
            {
                id: 3,
                targetAudience: "20대 뷰티 관심층", 
                title: "2024 MZ세대가 열광하는 헤어 트렌드 TOP 10",
                keywords: ["트렌드", "헤어스타일", "염색", "MZ세대"],
                tone: "트렌디하고 캐주얼",
                status: "waiting"
            },
            {
                id: 4,
                targetAudience: "40대 중년 여성들",
                title: "40대부터 시작하는 탈모 예방 완벽 가이드", 
                keywords: ["탈모예방", "볼륨", "안티에이징", "모발영양"],
                tone: "신뢰감 있고 전문적",
                status: "waiting"
            },
            {
                id: 5,
                targetAudience: "펜션 운영자들",
                title: "펜션 어메니티로 헤어케어 용품 준비하는 법",
                keywords: ["고객서비스", "어메니티", "헤어케어용품", "펜션관리"], 
                tone: "실무적이고 구체적",
                status: "waiting"
            }
        ];

        let currentFilter = 'all';
        let automationInterval = null;
        let isProcessing = false;

        // API 키 (하드코딩)
        const API_KEYS = {
            claude: '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',
            openai: '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'
        };

        // ===== 초기화 =====
        document.addEventListener('DOMContentLoaded', function() {
            initializeApp();
        });

        function initializeApp() {
            setupTabs();
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();
            showNotification('success', '시스템 준비 완료', 'HAIRGATOR 시스템이 성공적으로 초기화되었습니다.');
            
            // localStorage에서 큐 로드
            loadQueueFromStorage();
        }

        // ===== 탭 관리 =====
        function setupTabs() {
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.addEventListener('click', () => {
                    const targetTab = tab.dataset.tab;
                    switchTab(targetTab);
                });
            });
        }

        function switchTab(tabName) {
            // 모든 탭 비활성화
            document.querySelectorAll('.editor-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // 선택된 탭 활성화
            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`${tabName}Tab`).classList.add('active');
        }

        // ===== 글감 큐 관리 =====
        function updateQueueStats() {
            const waiting = contentQueue.filter(item => item.status === 'waiting').length;
            const completed = contentQueue.filter(item => item.status === 'completed').length;
            
            document.getElementById('queueWaiting').textContent = waiting;
            document.getElementById('queueCompleted').textContent = completed;
        }

        function updateNextItemPreview() {
            const nextItem = contentQueue.find(item => item.status === 'waiting');
            const preview = document.getElementById('nextItemPreview');
            
            if (nextItem) {
                preview.innerHTML = `
                    <div class="queue-item">
                        <div class="queue-title">${nextItem.title}</div>
                        <div class="queue-meta">
                            <span>${nextItem.targetAudience}</span>
                            <span class="queue-status waiting">대기중</span>
                        </div>
                    </div>
                `;
            } else {
                preview.innerHTML = '<p class="text-center" style="color: #6b7280; font-style: italic;">큐가 비어있습니다</p>';
            }
        }

        function updateQueueManagerContent() {
            const container = document.getElementById('queueContainer');
            const filteredQueue = currentFilter === 'all' 
                ? contentQueue 
                : contentQueue.filter(item => item.status === currentFilter);

            if (filteredQueue.length === 0) {
                container.innerHTML = '<p class="text-center" style="color: #6b7280;">해당하는 글감이 없습니다.</p>';
                return;
            }

            container.innerHTML = filteredQueue.map(item => `
                <div class="queue-item ${item.status}" data-id="${item.id}">
                    <div class="queue-title">${item.title}</div>
                    <div class="queue-meta">
                        <span>${item.targetAudience}</span>
                        <div class="flex items-center gap-1">
                            <span class="queue-status ${item.status}">${getStatusText(item.status)}</span>
                            <button class="btn btn-secondary" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="editQueueItem(${item.id})">수정</button>
                            <button class="btn btn-error" style="padding: 0.25rem 0.5rem; font-size: 0.8rem;" onclick="deleteQueueItem(${item.id})">삭제</button>
                        </div>
                    </div>
                    <div style="font-size: 0.9rem; color: var(--text-light); margin-top: 0.5rem;">
                        키워드: ${item.keywords.join(', ')} | 톤: ${item.tone}
                    </div>
                </div>
            `).join('');
        }

        function getStatusText(status) {
            const statusMap = {
                'waiting': '대기중',
                'processing': '작성중',
                'completed': '완료',
                'failed': '실패'
            };
            return statusMap[status] || status;
        }

        // ===== 빠른 추가 =====
        function addQuickContent() {
            const target = document.getElementById('quickTarget').value.trim();
            const title = document.getElementById('quickTitle').value.trim();
            const keywords = document.getElementById('quickKeywords').value.trim();
            const tone = document.getElementById('quickTone').value;

            if (!target || !title || !keywords) {
                showNotification('warning', '입력 필요', '모든 필드를 입력해주세요.');
                return;
            }

            const newItem = {
                id: Date.now(),
                targetAudience: target,
                title: title,
                keywords: keywords.split(',').map(k => k.trim()),
                tone: tone,
                status: 'waiting'
            };

            contentQueue.push(newItem);
            saveQueueToStorage();
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();

            // 폼 초기화
            document.getElementById('quickTarget').value = '';
            document.getElementById('quickTitle').value = '';
            document.getElementById('quickKeywords').value = '';
            
            showNotification('success', '글감 추가', '새 글감이 큐에 추가되었습니다.');
        }

        // ===== AI 콘텐츠 생성 =====
        async function processNextInQueue() {
            if (isProcessing) {
                showNotification('warning', '처리 중', '이미 다른 작업이 진행 중입니다.');
                return;
            }

            const nextItem = contentQueue.find(item => item.status === 'waiting');
            if (!nextItem) {
                showNotification('info', '큐 없음', '처리할 글감이 없습니다.');
                return;
            }

            try {
                isProcessing = true;
                await generateFromQueueItem(nextItem);
            } catch (error) {
                console.error('처리 오류:', error);
                showNotification('error', '처리 실패', error.message);
            } finally {
                isProcessing = false;
            }
        }

        async function generateFromQueueItem(item) {
            // 상태 업데이트
            item.status = 'processing';
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();
            
            showGenerationProgress();
            updateProgressText('AI가 콘텐츠를 생성하고 있습니다...');

            try {
                // Claude API 호출
                const content = await callClaudeAPI(item);
                
                // 결과 적용
                displayGeneratedContent(content, item);
                
                // 상태 완료로 변경
                item.status = 'completed';
                item.generatedContent = content;
                
                updateQueueStats();
                updateNextItemPreview();
                updateQueueManagerContent();
                saveQueueToStorage();
                
                showNotification('success', '생성 완료', `"${item.title}" 글이 생성되었습니다.`);
                
                // 글쓰기 탭으로 전환
                switchTab('write');
                
            } catch (error) {
                item.status = 'failed';
                updateQueueStats();
                updateQueueManagerContent();
                throw error;
            } finally {
                hideGenerationProgress();
            }
        }

        async function callClaudeAPI(item) {
            const prompt = `당신은 헤어케어 전문 블로그 작성자입니다. 다음 조건에 맞는 헤어케어 블로그 글을 작성해주세요.

타겟 독자: ${item.targetAudience}
글 제목: ${item.title}
키워드: ${item.keywords.join(', ')}
톤 앤 매너: ${item.tone}

요구사항:
1. 1500-2500자 분량의 완성된 블로그 글을 작성하세요
2. 마크다운 형식으로 작성하세요 (제목은 ## 사용)
3. 실용적이고 구체적인 정보를 포함하세요
4. 헤어케어 전문 용어를 적절히 사용하되 이해하기 쉽게 설명하세요
5. 키워드를 자연스럽게 본문에 포함하세요
6. SEO에 최적화된 구조로 작성하세요

블로그 글만 출력하세요 (다른 설명이나 주석은 포함하지 마세요):`;

            const response = await fetch('https://api.anthropic.com/v1/messages', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'x-api-key': API_KEYS.claude,
                    'anthropic-version': '2023-06-01'
                },
                body: JSON.stringify({
                    model: 'claude-3-5-sonnet-20241022',
                    max_tokens: 4000,
                    messages: [{
                        role: 'user',
                        content: prompt
                    }]
                })
            });

            if (!response.ok) {
                throw new Error(`Claude API 오류: ${response.status}`);
            }

            const data = await response.json();
            return {
                title: item.title,
                content: data.content[0].text,
                keywords: item.keywords,
                targetAudience: item.targetAudience,
                tone: item.tone
            };
        }

        function displayGeneratedContent(content, item) {
            document.getElementById('postTitle').value = content.title;
            document.getElementById('postContent').value = content.content;
            document.getElementById('postTags').value = content.keywords.join(', ');
            document.getElementById('seoTitle').value = content.title;
            document.getElementById('primaryKeywords').value = content.keywords.join(', ');
            
            // 품질 검사 자동 실행
            checkQuality();
        }

        // ===== 전체 처리 =====
        async function processAllQueue() {
            const waitingItems = contentQueue.filter(item => item.status === 'waiting');
            
            if (waitingItems.length === 0) {
                showNotification('info', '큐 없음', '처리할 글감이 없습니다.');
                return;
            }

            if (isProcessing) {
                showNotification('warning', '처리 중', '이미 다른 작업이 진행 중입니다.');
                return;
            }

            if (!confirm(`${waitingItems.length}개의 글감을 모두 처리하시겠습니까?`)) {
                return;
            }

            isProcessing = true;
            showGenerationProgress();

            try {
                for (let i = 0; i < waitingItems.length; i++) {
                    const item = waitingItems[i];
                    updateProgressText(`(${i+1}/${waitingItems.length}) "${item.title}" 처리 중...`);
                    
                    try {
                        await generateFromQueueItem(item);
                        // 각 요청 사이에 2초 대기 (API 레이트 리밋 방지)
                        if (i < waitingItems.length - 1) {
                            await new Promise(resolve => setTimeout(resolve, 2000));
                        }
                    } catch (error) {
                        console.error(`아이템 ${item.id} 처리 실패:`, error);
                        item.status = 'failed';
                    }
                }

                showNotification('success', '전체 처리 완료', `${waitingItems.length}개 글감 처리가 완료되었습니다.`);
                
            } catch (error) {
                showNotification('error', '처리 실패', error.message);
            } finally {
                isProcessing = false;
                hideGenerationProgress();
                updateQueueStats();
                updateQueueManagerContent();
            }
        }

        // ===== 진행상태 표시 =====
        function showGenerationProgress() {
            document.getElementById('generationProgress').classList.remove('hidden');
            document.querySelector('#generationProgress .btn-loader').style.display = 'inline-block';
        }

        function hideGenerationProgress() {
            document.getElementById('generationProgress').classList.add('hidden');
            document.querySelector('#generationProgress .btn-loader').style.display = 'none';
        }

        function updateProgressText(text) {
            document.getElementById('progressText').textContent = text;
        }

        // ===== 큐 관리 =====
        function filterQueue(status) {
            currentFilter = status;
            updateQueueManagerContent();
            
            // 버튼 활성화 상태 업데이트
            document.querySelectorAll('[onclick^="filterQueue"]').forEach(btn => {
                btn.classList.remove('btn-primary');
                btn.classList.add('btn-secondary');
            });
            event.target.classList.remove('btn-secondary');
            event.target.classList.add('btn-primary');
        }

        function showQueueManager() {
            switchTab('queue');
        }

        function showAddContentModal() {
            document.getElementById('addContentModal').style.display = 'block';
        }

        function addNewContent() {
            const target = document.getElementById('newTargetAudience').value.trim();
            const title = document.getElementById('newTitle').value.trim();
            const keywords = document.getElementById('newKeywords').value.trim();
            const tone = document.getElementById('newTone').value;

            if (!target || !title || !keywords) {
                showNotification('warning', '입력 필요', '모든 필드를 입력해주세요.');
                return;
            }

            const newItem = {
                id: Date.now(),
                targetAudience: target,
                title: title,
                keywords: keywords.split(',').map(k => k.trim()),
                tone: tone,
                status: 'waiting'
            };

            contentQueue.push(newItem);
            saveQueueToStorage();
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();

            closeModal('addContentModal');
            showNotification('success', '글감 추가', '새 글감이 큐에 추가되었습니다.');
        }

        function deleteQueueItem(id) {
            if (!confirm('이 글감을 삭제하시겠습니까?')) return;
            
            contentQueue = contentQueue.filter(item => item.id !== id);
            saveQueueToStorage();
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();
            
            showNotification('success', '삭제 완료', '글감이 삭제되었습니다.');
        }

        function clearCompletedQueue() {
            const completed = contentQueue.filter(item => item.status === 'completed');
            if (completed.length === 0) {
                showNotification('info', '삭제할 항목 없음', '완료된 글감이 없습니다.');
                return;
            }

            if (!confirm(`${completed.length}개의 완료된 글감을 삭제하시겠습니까?`)) return;

            contentQueue = contentQueue.filter(item => item.status !== 'completed');
            saveQueueToStorage();
            updateQueueStats();
            updateNextItemPreview();
            updateQueueManagerContent();
            
            showNotification('success', '삭제 완료', `${completed.length}개 글감이 삭제되었습니다.`);
        }

        // ===== 품질 검사 =====
        function checkQuality() {
            const content = document.getElementById('postContent').value;
            const title = document.getElementById('postTitle').value;
            
            if (!content || !title) {
                showNotification('warning', '내용 필요', '제목과 본문을 입력해주세요.');
                return;
            }

            const quality = analyzeQuality(content, title);
            displayQualityResults(quality);
        }

        function analyzeQuality(content, title) {
            const wordCount = content.length;
            const sentences = content.split(/[.!?]/).filter(s => s.trim().length > 0);
            const paragraphs = content.split(/\n\s*\n/).filter(p => p.trim().length > 0);
            const headings = (content.match(/^#+\s/gm) || []).length;
            
            // 점수 계산
            let wordCountScore = 0;
            if (wordCount >= 1500 && wordCount <= 2500) wordCountScore = 100;
            else if (wordCount >= 1000) wordCountScore = 80;
            else if (wordCount >= 500) wordCountScore = 60;
            else wordCountScore = 30;

            let readabilityScore = 100;
            if (sentences.length > 0) {
                const avgWordsPerSentence = wordCount / sentences.length;
                if (avgWordsPerSentence > 30) readabilityScore = 60;
                else if (avgWordsPerSentence > 20) readabilityScore = 80;
            }

            let structureScore = 0;
            if (headings >= 3) structureScore += 40;
            if (paragraphs >= 5) structureScore += 30;
            if (content.includes('**')) structureScore += 20;
            if (content.includes('- ')) structureScore += 10;

            const overallScore = Math.round((wordCountScore * 0.3 + readabilityScore * 0.3 + structureScore * 0.4));

            return {
                overall: overallScore,
                wordCount: wordCountScore,
                readability: readabilityScore,
                structure: structureScore,
                details: {
                    wordCount: wordCount,
                    sentences: sentences.length,
                    paragraphs: paragraphs.length,
                    headings: headings
                }
            };
        }

        function displayQualityResults(quality) {
            const overallElement = document.getElementById('overallQuality');
            overallElement.textContent = `${quality.overall}점`;
            
            if (quality.overall >= 90) {
                overallElement.className = 'quality-score excellent';
            } else if (quality.overall >= 80) {
                overallElement.className = 'quality-score good';
            } else if (quality.overall >= 70) {
                overallElement.className = 'quality-score fair';
            } else {
                overallElement.className = 'quality-score poor';
            }

            // 개별 메트릭 업데이트
            updateMetric('wordCount', quality.details.wordCount, quality.wordCount);
            updateMetric('readability', `${quality.readability}점`, quality.readability);
            updateMetric('structureScore', `${quality.structure}점`, quality.structure);
        }

        function updateMetric(id, value, score) {
            document.getElementById(id).textContent = value;
            const bar = document.getElementById(id + 'Bar');
            bar.style.width = `${score}%`;
            
            if (score >= 90) {
                bar.className = 'metric-fill excellent';
            } else if (score >= 80) {
                bar.className = 'metric-fill good';
            } else if (score >= 70) {
                bar.className = 'metric-fill fair';
            } else {
                bar.className = 'metric-fill poor';
            }
        }

        // ===== 저장/로드 =====
        function saveQueueToStorage() {
            localStorage.setItem('hairgator_queue', JSON.stringify(contentQueue));
        }

        function loadQueueFromStorage() {
            const saved = localStorage.getItem('hairgator_queue');
            if (saved) {
                contentQueue = JSON.parse(saved);
                updateQueueStats();
                updateNextItemPreview();
                updateQueueManagerContent();
            }
        }

        // ===== 자동화 =====
        function toggleAutomation() {
            const enabled = document.getElementById('automationEnabled').checked;
            if (enabled) {
                startAutomation();
            } else {
                stopAutomation();
            }
        }

        function startAutomation() {
            if (automationInterval) {
                clearInterval(automationInterval);
            }

            const interval = parseInt(document.getElementById('processInterval').value) * 60 * 1000;
            
            automationInterval = setInterval(async () => {
                const waitingItems = contentQueue.filter(item => item.status === 'waiting');
                if (waitingItems.length > 0 && !isProcessing) {
                    console.log('자동화: 다음 글감 처리 시작');
                    await processNextInQueue();
                }
            }, interval);

            document.getElementById('automationEnabled').checked = true;
            showNotification('success', '자동화 시작', `${interval/60000}분마다 자동으로 글감을 처리합니다.`);
        }

        function stopAutomation() {
            if (automationInterval) {
                clearInterval(automationInterval);
                automationInterval = null;
            }
            document.getElementById('automationEnabled').checked = false;
            showNotification('info', '자동화 중지', '자동 처리가 중지되었습니다.');
        }

        // ===== AI 연결 테스트 =====
        async function testClaudeConnection() {
            try {
                document.getElementById('claudeStatus').innerHTML = '🔄 테스트 중...';
                
                const response = await fetch('https://api.anthropic.com/v1/messages', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': API_KEYS.claude,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: 'claude-3-5-sonnet-20241022',
                        max_tokens: 100,
                        messages: [{
                            role: 'user',
                            content: '안녕하세요'
                        }]
                    })
                });

                if (response.ok) {
                    document.getElementById('claudeStatus').innerHTML = '✅ 연결됨';
                    showNotification('success', 'Claude 연결 성공', 'API가 정상적으로 작동합니다.');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                document.getElementById('claudeStatus').innerHTML = '❌ 연결 실패';
                showNotification('error', 'Claude 연결 실패', error.message);
            }
        }

        async function testOpenAIConnection() {
            try {
                document.getElementById('openaiStatus').innerHTML = '🔄 테스트 중...';
                
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEYS.openai}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{
                            role: 'user',
                            content: '안녕하세요'
                        }],
                        max_tokens: 50
                    })
                });

                if (response.ok) {
                    document.getElementById('openaiStatus').innerHTML = '✅ 연결됨';
                    showNotification('success', 'OpenAI 연결 성공', 'API가 정상적으로 작동합니다.');
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            } catch (error) {
                document.getElementById('openaiStatus').innerHTML = '❌ 연결 실패';
                showNotification('error', 'OpenAI 연결 실패', error.message);
            }
        }

        // ===== 이미지 생성 =====
        async function generateImage() {
            const prompt = document.getElementById('imagePrompt').value.trim();
            if (!prompt) {
                showNotification('warning', '프롬프트 필요', '이미지 설명을 입력해주세요.');
                return;
            }

            try {
                showNotification('info', '이미지 생성 중', 'AI가 이미지를 생성하고 있습니다...');
                
                const response = await fetch('https://api.openai.com/v1/images/generations', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${API_KEYS.openai}`
                    },
                    body: JSON.stringify({
                        prompt: `Professional haircare related image: ${prompt}. High quality, clean background, professional lighting.`,
                        n: 1,
                        size: "1024x1024"
                    })
                });

                if (!response.ok) {
                    throw new Error(`이미지 생성 실패: ${response.status}`);
                }

                const data = await response.json();
                const imageUrl = data.data[0].url;
                
                document.getElementById('generatedImages').innerHTML = `
                    <div style="text-align: center; margin: 1rem 0;">
                        <img src="${imageUrl}" alt="${prompt}" style="max-width: 100%; border-radius: 8px; box-shadow: var(--shadow);">
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; color: var(--text-light);">${prompt}</p>
                        <button class="btn btn-secondary mt-1" onclick="downloadImage('${imageUrl}')">💾 이미지 저장</button>
                    </div>
                `;
                
                showNotification('success', '이미지 생성 완료', '이미지가 성공적으로 생성되었습니다.');
                
            } catch (error) {
                showNotification('error', '이미지 생성 실패', error.message);
            }
        }

        function downloadImage(url) {
            const link = document.createElement('a');
            link.href = url;
            link.download = `hairgator_image_${Date.now()}.jpg`;
            link.click();
        }

        // ===== SEO 기능 =====
        function checkSEOScore() {
            const title = document.getElementById('seoTitle').value || document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            const keywords = document.getElementById('primaryKeywords').value;
            
            if (!title || !content) {
                showNotification('warning', '내용 필요', '제목과 본문을 입력해주세요.');
                return;
            }

            let score = 0;
            let feedback = [];

            // 제목 길이 검사
            if (title.length >= 30 && title.length <= 60) {
                score += 20;
                feedback.push('✅ 제목 길이가 적절합니다.');
            } else {
                feedback.push('❌ 제목 길이를 30-60자로 조정하세요.');
            }

            // 키워드 밀도 검사
            if (keywords) {
                const keywordList = keywords.split(',').map(k => k.trim());
                let keywordCount = 0;
                keywordList.forEach(keyword => {
                    const regex = new RegExp(keyword, 'gi');
                    keywordCount += (content.match(regex) || []).length;
                });
                
                const density = (keywordCount / content.length) * 100;
                if (density >= 1 && density <= 3) {
                    score += 30;
                    feedback.push('✅ 키워드 밀도가 적절합니다.');
                } else {
                    feedback.push('❌ 키워드 밀도를 1-3%로 조정하세요.');
                }
            }

            // 구조 검사
            const hasHeadings = /^#+\s/gm.test(content);
            const hasList = /^[-*+]\s/gm.test(content);
            
            if (hasHeadings) {
                score += 25;
                feedback.push('✅ 제목 구조가 좋습니다.');
            } else {
                feedback.push('❌ 소제목(## 또는 ###)을 추가하세요.');
            }

            if (hasList) {
                score += 25;
                feedback.push('✅ 목록 구조가 포함되어 있습니다.');
            } else {
                feedback.push('❌ 불릿 포인트나 번호 목록을 추가하세요.');
            }

            // 결과 표시
            showNotification('info', `SEO 점수: ${score}/100`, feedback.join('\n'));
        }

        // ===== 발행 기능 =====
        function publishContent() {
            const title = document.getElementById('postTitle').value;
            const content = document.getElementById('postContent').value;
            
            if (!title || !content) {
                showNotification('warning', '내용 필요', '제목과 본문을 입력해주세요.');
                return;
            }

            // 실제 블로그 발행 로직 (여기서는 시뮬레이션)
            showNotification('success', '발행 완료', '블로그 글이 성공적으로 발행되었습니다.');
            
            // 발행 후 폼 초기화
            document.getElementById('postTitle').value = '';
            document.getElementById('postContent').value = '';
            document.getElementById('postTags').value = '';
        }

        // ===== 모달 관리 =====
        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        // 모달 외부 클릭시 닫기
        window.onclick = function(event) {
            if (event.target.classList.contains('modal')) {
                event.target.style.display = 'none';
            }
        }

        // ===== 알림 시스템 =====
        function showNotification(type, title, message) {
            const container = document.getElementById('notificationContainer');
            const notification = document.createElement('div');
            
            notification.className = `notification ${type}`;
            notification.innerHTML = `
                <div class="notification-header">
                    <div class="notification-title">${title}</div>
                    <button class="notification-close" onclick="this.parentElement.parentElement.remove()">&times;</button>
                </div>
                <div class="notification-body">${message}</div>
            `;
            
            container.appendChild(notification);
            
            // 5초 후 자동 제거
            setTimeout(() => {
                if (notification.parentElement) {
                    notification.remove();
                }
            }, 5000);
        }

        // ===== 키보드 단축키 =====
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey || e.metaKey) {
                switch(e.key) {
                    case 'Enter':
                        e.preventDefault();
                        processNextInQueue();
                        break;
                    case 's':
                        e.preventDefault();
                        saveQueueToStorage();
                        showNotification('success', '저장 완료', '데이터가 저장되었습니다.');
                        break;
                    case 'p':
                        e.preventDefault();
                        checkQuality();
                        break;
                }
            }
            
            if (e.key === 'F1') {
                e.preventDefault();
                showNotification('info', '키보드 단축키', 
                    'Ctrl+Enter: 다음 글 작성\nCtrl+S: 저장\nCtrl+P: 품질 검사\nF1: 도움말');
            }
        });

        // ===== 추가 유틸리티 함수들 =====
        function editQueueItem(id) {
            const item = contentQueue.find(i => i.id === id);
            if (!item) return;
            
            document.getElementById('newTargetAudience').value = item.targetAudience;
            document.getElementById('newTitle').value = item.title;
            document.getElementById('newKeywords').value = item.keywords.join(', ');
            document.getElementById('newTone').value = item.tone;
            
            showAddContentModal();
            
            // 수정 모드 표시
            document.querySelector('#addContentModal .modal-title').textContent = '✏️ 글감 수정';
            document.querySelector('#addContentModal .btn-primary').textContent = '수정';
            document.querySelector('#addContentModal .btn-primary').onclick = () => updateQueueItem(id);
        }

        function updateQueueItem(id) {
            const target = document.getElementById('newTargetAudience').value.trim();
            const title = document.getElementById('newTitle').value.trim();
            const keywords = document.getElementById('newKeywords').value.trim();
            const tone = document.getElementById('newTone').value;

            if (!target || !title || !keywords) {
                showNotification('warning', '입력 필요', '모든 필드를 입력해주세요.');
                return;
            }

            const item = contentQueue.find(i => i.id === id);
            if (item) {
                item.targetAudience = target;
                item.title = title;
                item.keywords = keywords.split(',').map(k => k.trim());
                item.tone = tone;
                
                saveQueueToStorage();
                updateQueueStats();
                updateNextItemPreview();
                updateQueueManagerContent();
            }

            closeModal('addContentModal');
            showNotification('success', '수정 완료', '글감이 수정되었습니다.');
            
            // 모달 초기화
            document.querySelector('#addContentModal .modal-title').textContent = '➕ 새 글감 추가';
            document.querySelector('#addContentModal .btn-primary').textContent = '추가';
            document.querySelector('#addContentModal .btn-primary').onclick = addNewContent;
        }

        // ===== 데이터 내보내기/가져오기 =====
        function exportQueue() {
            const dataStr = JSON.stringify(contentQueue, null, 2);
            const dataBlob = new Blob([dataStr], {type: 'application/json'});
            const url = URL.createObjectURL(dataBlob);
            const link = document.createElement('a');
            link.href = url;
            link.download = `hairgator_queue_${new Date().toISOString().split('T')[0]}.json`;
            link.click();
            URL.revokeObjectURL(url);
            
            showNotification('success', '내보내기 완료', '글감 큐가 파일로 저장되었습니다.');
        }

        function importQueue() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            input.onchange = function(e) {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        try {
                            const importedQueue = JSON.parse(e.target.result);
                            if (Array.isArray(importedQueue)) {
                                contentQueue = importedQueue;
                                saveQueueToStorage();
                                updateQueueStats();
                                updateNextItemPreview();
                                updateQueueManagerContent();
                                showNotification('success', '가져오기 완료', '글감 큐가 성공적으로 가져와졌습니다.');
                            } else {
                                throw new Error('올바르지 않은 파일 형식입니다.');
                            }
                        } catch (error) {
                            showNotification('error', '가져오기 실패', error.message);
                        }
                    };
                    reader.readAsText(file);
                }
            };
            input.click();
        }

        // ===== 성능 모니터링 =====
        function getSystemStatus() {
            const total = contentQueue.length;
            const waiting = contentQueue.filter(item => item.status === 'waiting').length;
            const completed = contentQueue.filter(item => item.status === 'completed').length;
            const failed = contentQueue.filter(item => item.status === 'failed').length;
            
            return {
                total,
                waiting,
                completed,
                failed,
                successRate: total > 0 ? Math.round((completed / (completed + failed)) * 100) || 0 : 0,
                isProcessing
            };
        }

        // 시스템 상태를 주기적으로 업데이트
        setInterval(() => {
            const status = getSystemStatus();
            console.log('시스템 상태:', status);
        }, 30000); // 30초마다

        // ===== 초기화 완료 메시지 =====
        console.log('🎉 HAIRGATOR 시스템이 완전히 로드되었습니다!');
        console.log('📋 기본 글감 5개가 준비되어 있습니다.');
        console.log('🤖 AI API가 연결되어 즉시 사용 가능합니다.');
        console.log('⚡ "다음 글 작성" 버튼을 클릭하여 시작하세요!');
    </script>
</body>
</html>
