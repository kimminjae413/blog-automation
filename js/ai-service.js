// ëª¨ì˜ ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„±
    createMockBlogContent(queueItem) {
        const templates = {
            "ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œ ì™„ë²½ ê´€ë¦¬ë²•": `
## ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œ, ì´ë ‡ê²Œ ê´€ë¦¬í•˜ì„¸ìš”!

ì¶”ìš´ ê²¨ìš¸ì´ ë‹¤ê°€ì˜¤ë©´ì„œ ë§ì€ ë¶„ë“¤ì´ **ëª¨ë°œ ê±´ì¡°**ë¡œ ê³ ë¯¼ì´ ë§ìœ¼ì‹¤ í…ë°ìš”. íŠ¹íˆ ${queueItem.targetAudience}ì—ê²ŒëŠ” ë”ìš± ì‹ ê²½ ì“°ì´ëŠ” ë¶€ë¶„ì¼ ê²ƒì…ë‹ˆë‹¤.

ê²¨ìš¸ì²  ëª¨ë°œ ê´€ë¦¬ëŠ” ë‹¨ìˆœíˆ ìƒ´í‘¸ë§Œ ë°”ê¾¸ëŠ” ê²ƒìœ¼ë¡œëŠ” ë¶€ì¡±í•©ë‹ˆë‹¤. **ì²´ê³„ì ì¸ ì¼€ì–´ ë£¨í‹´**ê³¼ **ì˜¬ë°”ë¥¸ ì œí’ˆ ì„ íƒ**ì´ ê±´ê°•í•œ ëª¨ë°œì„ ìœ ì§€í•˜ëŠ” í•µì‹¬ì…ë‹ˆë‹¤.

### 1. ê²¨ìš¸ì²  ëª¨ë°œì´ ê±´ì¡°í•´ì§€ëŠ” ê³¼í•™ì  ì›ë¦¬

**ë‚®ì€ ìŠµë„**ì™€ **ì°¨ê°€ìš´ ë°”ëŒ**, ê·¸ë¦¬ê³  **ì‹¤ë‚´ ë‚œë°©**ìœ¼ë¡œ ì¸í•´ ëª¨ë°œì˜ **ìˆ˜ë¶„**ì´ ë¹ ë¥´ê²Œ ì¦ë°œí•©ë‹ˆë‹¤. 

#### ì£¼ìš” ì›ì¸ë“¤:
- **ì‹¤ë‚´ì™¸ ì˜¨ë„ì°¨** (20ë„ ì´ìƒ): ëª¨ë°œ íí‹°í´ ì†ìƒ ê°€ì†í™”
- **ìŠµë„ 20% ì´í•˜**: ëª¨ë°œ ìˆ˜ë¶„ ì†ì‹¤ë¥  300% ì¦ê°€
- **ì •ì „ê¸° ë°œìƒ**: íí‹°í´ ë“¤ëœ¸ìœ¼ë¡œ ì¸í•œ ê±°ì¹ ì–´ì§
- **í—¤ì–´ë“œë¼ì´ì–´ ê³¼ë„ ì‚¬ìš©**: ëª¨ë°œ ë‹¨ë°±ì§ˆ ë³€ì„±

### 2. ë‹¨ê³„ë³„ ê²¨ìš¸ í—¤ì–´ì¼€ì–´ ë£¨í‹´

#### ğŸ§´ 1ë‹¨ê³„: ì˜¬ë°”ë¥¸ ì„¸ì •
**ë³´ìŠµ ì„±ë¶„**ì´ í’ë¶€í•œ ìƒ´í‘¸ë¥¼ ì„ íƒí•˜ê³ , **38ë„ ì´í•˜ì˜ ë¯¸ì§€ê·¼í•œ ë¬¼**ì„ ì‚¬ìš©í•˜ì„¸ìš”.

- **ì„¸ë¼ë§ˆì´ë“œ**, **íˆì•Œë£¨ë¡ ì‚°** í•¨ìœ  ì œí’ˆ ì¶”ì²œ
- **í™©ì‚°ê³„ ê³„ë©´í™œì„±ì œ** (SLS, SLES) í”¼í•˜ê¸°
- ì£¼ 2-3íšŒ ì„¸ì •ìœ¼ë¡œ ì¶©ë¶„

#### ğŸ’†â€â™€ï¸ 2ë‹¨ê³„: ì§‘ì¤‘ ì˜ì–‘ ê³µê¸‰
**ë”¥ì»¨ë””ì…”ë‹ íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸**ë¥¼ ì£¼ 2íšŒ ì´ìƒ ì‹¤ì‹œí•˜ì„¸ìš”.

- **ì¼€ë¼í‹´ ë‹¨ë°±ì§ˆ** ë³´ì¶©ìœ¼ë¡œ ëª¨ë°œ ê°•í™”
- **ì•„ë¥´ê°„ì˜¤ì¼**, **ë§ˆì¹´ë‹¤ë¯¸ì•„ì˜¤ì¼** í™œìš©
- ëª¨ë°œ ëë¶€ë¶„ë¶€í„° ì¤‘ê°„ê¹Œì§€ ì§‘ì¤‘ ì¼€ì–´

#### ğŸŒ¡ï¸ 3ë‹¨ê³„: ì—´ ë³´í˜¸ ë° ìŠ¤íƒ€ì¼ë§
**íˆíŠ¸ í”„ë¡œí…í„°** ì‚¬ìš©ì€ í•„ìˆ˜ì…ë‹ˆë‹¤.

- ë“œë¼ì´ì–´ ì˜¨ë„ 80ë„ ì´í•˜ ìœ ì§€
- **ì„¸ë¼ë¯¹ ì½”íŒ…** ë„êµ¬ ì‚¬ìš©
- ì°¬ë°”ëŒìœ¼ë¡œ ë§ˆë¬´ë¦¬í•˜ì—¬ íí‹°í´ ì •ë¦¬

### 3. ê²¨ìš¸ì²  í•„ìˆ˜ í—¤ì–´ì¼€ì–´ ì•„ì´í…œ

#### ğŸ”¹ ê¸°ì´ˆ ì¼€ì–´
1. **ë³´ìŠµ ìƒ´í‘¸**: ì•„ë¯¸ë…¸ì‚° ê³„ë©´í™œì„±ì œ ê¸°ë°˜
2. **ë‹¨ë°±ì§ˆ ì»¨ë””ì…”ë„ˆ**: ì €ë¶„ì ì¼€ë¼í‹´ í•¨ìœ 
3. **í—¤ì–´ ì˜¤ì¼**: ì‹ë¬¼ì„± ì˜¤ì¼ (í˜¸í˜¸ë°”, ì•„ë¥´ê°„)

#### ğŸ”¹ ì§‘ì¤‘ ì¼€ì–´
1. **í—¤ì–´ ë§ˆìŠ¤í¬**: ì£¼ 1-2íšŒ 15ë¶„ê°„ ì ìš©
2. **ë¦¬ë¸Œì¸ íŠ¸ë¦¬íŠ¸ë¨¼íŠ¸**: ë§¤ì¼ ì‚¬ìš© ê°€ëŠ¥í•œ ê°€ë²¼ìš´ ì œí˜•
3. **ìŠ¤ì¹¼í”„ ì„¸ëŸ¼**: ë‘í”¼ ê±´ì¡° ë°©ì§€

### 4. ë¼ì´í”„ìŠ¤íƒ€ì¼ ê°œì„  ë°©ë²•

#### ğŸ  ì‹¤ë‚´ í™˜ê²½ ê´€ë¦¬
- **ê°€ìŠµê¸°** ì‚¬ìš©ìœ¼ë¡œ ìŠµë„ 40-60% ìœ ì§€
- **ê³µê¸°ì²­ì •ê¸°**ë¡œ ë¯¸ì„¸ë¨¼ì§€ ì°¨ë‹¨
- ì·¨ì¹¨ ì‹œ **ì‹¤í¬ ë² ê°œì»¤ë²„** ì‚¬ìš©

#### ğŸ§¥ ì™¸ì¶œ ì‹œ ë³´í˜¸ ì „ëµ
- **ëª¨ì**ë‚˜ **ìŠ¤ì¹´í”„**ë¡œ ë°”ëŒ ì°¨ë‹¨
- **UV ì°¨ë‹¨** í—¤ì–´ ìŠ¤í”„ë ˆì´ ì‚¬ìš©
- ì™¸ì¶œ í›„ ì¦‰ì‹œ **ë¸ŒëŸ¬ì‹±**ìœ¼ë¡œ ì •ì „ê¸° ì œê±°

### 5. ì „ë¬¸ê°€ê°€// HAIRGATOR - ai-service.js
// AI ì„œë¹„ìŠ¤ ê´€ë¦¬ ë° API ì—°ë™ - app.js í˜¸í™˜ ë²„ì „

// AI ì„œë¹„ìŠ¤ í´ë˜ìŠ¤
class HairGatorAIService {
    constructor() {
        // API ì„¤ì • (í•˜ë“œì½”ë”©)
        this.config = {
            claude: {
                apiKey: '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',
                baseURL: 'https://api.anthropic.com/v1/messages',
                model: 'claude-3-5-sonnet-20241022'
            },
            openai: {
                apiKey: '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',
                imageURL: 'https://api.openai.com/v1/images/generations'
            }
        };
        
        // í†µê³„ ë° ìƒíƒœ ì¶”ì 
        this.statistics = {
            totalRequests: 0,
            successfulRequests: 0,
            failedRequests: 0,
            currentService: 'claude',
            averageResponseTime: 0,
            lastRequestTime: null
        };
        
        console.log('ğŸ¤– HAIRGATOR AI ì„œë¹„ìŠ¤ ì´ˆê¸°í™” ì™„ë£Œ');
        console.log('ğŸ“ Claude: ê¸€ ì‘ì„± ì „ìš©');
        console.log('ğŸ¨ OpenAI: ì´ë¯¸ì§€ ìƒì„± ì „ìš©');
    }
    
    // ===== ë©”ì¸ ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„± (app.js í˜¸í™˜) =====
    async generateBlogContent(queueItem) {
        try {
            const startTime = Date.now();
            
            // ì—¬ëŸ¬ ë°©ë²•ìœ¼ë¡œ AI API í˜¸ì¶œ ì‹œë„
            let content;
            
            // ë°©ë²• 1: ì§ì ‘ í˜¸ì¶œ ì‹œë„
            try {
                content = await this.callClaudeAPIDirectly(queueItem);
                console.log('âœ… ì§ì ‘ API í˜¸ì¶œ ì„±ê³µ');
            } catch (error) {
                console.log('âŒ ì§ì ‘ í˜¸ì¶œ ì‹¤íŒ¨, ëŒ€ì•ˆ ë°©ë²• ì‹œë„:', error.message);
                
                // ë°©ë²• 2: ë‹¤ë¥¸ í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹œë„
                try {
                    content = await this.callClaudeAPIWithProxy(queueItem);
                    console.log('âœ… í”„ë¡ì‹œ API í˜¸ì¶œ ì„±ê³µ');
                } catch (proxyError) {
                    console.log('âŒ í”„ë¡ì‹œ í˜¸ì¶œë„ ì‹¤íŒ¨:', proxyError.message);
                    
                    // ë°©ë²• 3: OpenAI API ì‹œë„ (Claude ëŒ€ì‹ )
                    try {
                        content = await this.callOpenAIAPIAsBackup(queueItem);
                        console.log('âœ… OpenAI ë°±ì—… API í˜¸ì¶œ ì„±ê³µ');
                    } catch (openaiError) {
                        console.log('âŒ ëª¨ë“  AI API í˜¸ì¶œ ì‹¤íŒ¨');
                        throw new Error('ëª¨ë“  AI ì„œë¹„ìŠ¤ ì—°ê²° ì‹¤íŒ¨. ë„¤íŠ¸ì›Œí¬ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    }
                }
            }
            
            // í†µê³„ ì—…ë°ì´íŠ¸
            const responseTime = Date.now() - startTime;
            this.updateStatistics(true, responseTime);
            
            console.log(`âœ… ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„± ì™„ë£Œ: "${queueItem.title}"`);
            
            return {
                success: true,
                data: content,
                service: 'claude',
                responseTime: responseTime
            };
            
        } catch (error) {
            this.updateStatistics(false);
            console.error('âŒ ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„± ì‹¤íŒ¨:', error);
            
            return {
                success: false,
                error: error.message,
                service: 'claude'
            };
        }
    }
    
    // Claude API ì§ì ‘ í˜¸ì¶œ (ê¸°ë³¸ ë°©ë²•)
    async callClaudeAPIDirectly(queueItem) {
        const prompt = this.createContentPrompt(queueItem);
        
        const response = await fetch(this.config.claude.baseURL, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-api-key': this.config.claude.apiKey,
                'anthropic-version': '2023-06-01'
            },
            body: JSON.stringify({
                model: this.config.claude.model,
                max_tokens: 4000,
                messages: [{
                    role: 'user',
                    content: prompt
                }]
            })
        });
        
        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`Claude API ì˜¤ë¥˜ (${response.status}): ${errorText}`);
        }
        
        const result = await response.json();
        const generatedText = result.content[0].text;
        
        return {
            title: queueItem.title,
            content: generatedText,
            metaDescription: this.generateMetaDescription(generatedText),
            keywords: queueItem.keywords,
            targetAudience: queueItem.targetAudience,
            tone: queueItem.tone,
            wordCount: generatedText.length
        };
    }
    
    // CORS í”„ë¡ì‹œë¥¼ í†µí•œ í˜¸ì¶œ
    async callClaudeAPIWithProxy(queueItem) {
        const prompt = this.createContentPrompt(queueItem);
        
        // ì—¬ëŸ¬ í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹œë„
        const proxies = [
            'https://api.allorigins.win/raw?url=',
            'https://corsproxy.io/?',
            'https://cors-proxy.htmldriven.com/?url='
        ];
        
        for (const proxy of proxies) {
            try {
                const response = await fetch(proxy + encodeURIComponent(this.config.claude.baseURL), {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': this.config.claude.apiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: this.config.claude.model,
                        max_tokens: 4000,
                        messages: [{
                            role: 'user',
                            content: prompt
                        }]
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    const generatedText = result.content[0].text;
                    
                    return {
                        title: queueItem.title,
                        content: generatedText,
                        metaDescription: this.generateMetaDescription(generatedText),
                        keywords: queueItem.keywords,
                        targetAudience: queueItem.targetAudience,
                        tone: queueItem.tone,
                        wordCount: generatedText.length
                    };
                }
            } catch (error) {
                console.log(`í”„ë¡ì‹œ ${proxy} ì‹¤íŒ¨:`, error.message);
                continue;
            }
        }
        
        throw new Error('ëª¨ë“  í”„ë¡ì‹œ ì„œë¹„ìŠ¤ ì‹¤íŒ¨');
    }
    
    // OpenAIë¥¼ ë°±ì—…ìœ¼ë¡œ ì‚¬ìš©
    async callOpenAIAPIAsBackup(queueItem) {
        const prompt = this.createContentPrompt(queueItem);
        
        const response = await fetch('https://api.openai.com/v1/chat/completions', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${this.config.openai.apiKey}`
            },
            body: JSON.stringify({
                model: 'gpt-4o-mini',
                messages: [{
                    role: 'user',
                    content: prompt
                }],
                max_tokens: 4000
            })
        });
        
        if (!response.ok) {
            const errorText = await response.text();
            throw new Error(`OpenAI API ì˜¤ë¥˜ (${response.status}): ${errorText}`);
        }
        
        const result = await response.json();
        const generatedText = result.choices[0].message.content;
        
        return {
            title: queueItem.title,
            content: generatedText,
            metaDescription: this.generateMetaDescription(generatedText),
            keywords: queueItem.keywords,
            targetAudience: queueItem.targetAudience,
            tone: queueItem.tone,
            wordCount: generatedText.length
        };
    }
    
    // ===== Claude API ì§ì ‘ í˜¸ì¶œ =====
    async callClaudeAPI(queueItem) {
        const prompt = this.createContentPrompt(queueItem);
        
        // CORS í”„ë¡ì‹œ ì‚¬ìš©
        const proxyUrl = 'https://cors-anywhere.herokuapp.com/';
        const targetUrl = this.config.claude.baseURL;
        
        const response = await fetch(proxyUrl + targetUrl, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'x-api-key': this.config.claude.apiKey,
                'anthropic-version': '2023-06-01',
                'X-Requested-With': 'XMLHttpRequest'
            },
            body: JSON.stringify({
                model: this.config.claude.model,
                max_tokens: 4000,
                messages: [{
                    role: 'user',
                    content: prompt
                }]
            })
        });
        
        if (!response.ok) {
            // CORS í”„ë¡ì‹œ ì‹¤íŒ¨ ì‹œ ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì „í™˜
            console.warn('API í˜¸ì¶œ ì‹¤íŒ¨, ì‹œë®¬ë ˆì´ì…˜ ëª¨ë“œë¡œ ì „í™˜');
            return this.generateMockContent(queueItem);
        }
        
        const result = await response.json();
        const generatedText = result.content[0].text;
        
        return {
            title: queueItem.title,
            content: generatedText,
            metaDescription: this.generateMetaDescription(generatedText),
            keywords: queueItem.keywords,
            targetAudience: queueItem.targetAudience,
            tone: queueItem.tone,
            wordCount: generatedText.length
        };
    }
    
    // ===== ì½˜í…ì¸  ìƒì„± í”„ë¡¬í”„íŠ¸ =====
    createContentPrompt(queueItem) {
        return `ë‹¹ì‹ ì€ í—¤ì–´ì¼€ì–´ ì „ë¬¸ ë¸”ë¡œê·¸ ì‘ì„±ìì…ë‹ˆë‹¤. ë‹¤ìŒ ì¡°ê±´ì— ë§ëŠ” í—¤ì–´ì¼€ì–´ ë¸”ë¡œê·¸ ê¸€ì„ ì‘ì„±í•´ì£¼ì„¸ìš”.

**ê¸€ ì •ë³´:**
- íƒ€ê²Ÿ ë…ì: ${queueItem.targetAudience}
- ê¸€ ì œëª©: ${queueItem.title}
- í•µì‹¬ í‚¤ì›Œë“œ: ${queueItem.keywords.join(', ')}
- í†¤ ì•¤ ë§¤ë„ˆ: ${queueItem.tone}

**ì‘ì„± ìš”êµ¬ì‚¬í•­:**
1. **ë¶„ëŸ‰**: 1500-2500ìì˜ ì™„ì„±ëœ ë¸”ë¡œê·¸ ê¸€
2. **í˜•ì‹**: ë§ˆí¬ë‹¤ìš´ í˜•ì‹ (ì œëª©ì€ ## ì‚¬ìš©, ì†Œì œëª©ì€ ### ì‚¬ìš©)
3. **êµ¬ì¡°**: 
   - ë„ì…ë¶€ (ë¬¸ì œ ì œê¸° ë˜ëŠ” ê´€ì‹¬ ìœ ë°œ)
   - ë³¸ë¬¸ (3-4ê°œ ì†Œì œëª©ìœ¼ë¡œ êµ¬ì„±)
   - ê²°ë¡  (ì‹¤í–‰ ê°€ëŠ¥í•œ íŒ ìš”ì•½)
4. **ë‚´ìš©**: 
   - ì‹¤ìš©ì ì´ê³  êµ¬ì²´ì ì¸ ì •ë³´ í¬í•¨
   - í—¤ì–´ì¼€ì–´ ì „ë¬¸ ìš©ì–´ë¥¼ ì ì ˆíˆ ì‚¬ìš©í•˜ë˜ ì´í•´í•˜ê¸° ì‰½ê²Œ ì„¤ëª…
   - í‚¤ì›Œë“œë¥¼ ìì—°ìŠ¤ëŸ½ê²Œ ë³¸ë¬¸ì— í¬í•¨ (í‚¤ì›Œë“œ ë°€ë„ 2-3%)
   - íƒ€ê²Ÿ ë…ìì˜ ê´€ì‹¬ì‚¬ì™€ ê³ ë¯¼ì„ ë°˜ì˜
5. **SEO**: 
   - ë„¤ì´ë²„ ê²€ìƒ‰ì— ìµœì í™”ëœ êµ¬ì¡°
   - ë¶ˆë¦¿ í¬ì¸íŠ¸ì™€ ë²ˆí˜¸ ëª©ë¡ í™œìš©
   - êµµì€ ê¸€ì”¨(**í…ìŠ¤íŠ¸**)ë¡œ ì¤‘ìš” í¬ì¸íŠ¸ ê°•ì¡°

**í†¤ ì•¤ ë§¤ë„ˆ**: ${queueItem.tone}
**íƒ€ê²Ÿ ë…ì**: "${queueItem.targetAudience}"ì—ê²Œ ì§ì ‘ ë§í•˜ëŠ” ë“¯í•œ ì¹œê·¼í•œ ì–´ì¡°

ë¸”ë¡œê·¸ ë³¸ë¬¸ë§Œ ì¶œë ¥í•˜ì„¸ìš” (ë‹¤ë¥¸ ì„¤ëª…ì´ë‚˜ ì£¼ì„ì€ ì œì™¸):`;
    }
    
    // ===== ì´ë¯¸ì§€ ìƒì„± (OpenAI) =====
    async generateImage(prompt, options = {}) {
        try {
            const startTime = Date.now();
            
            // í—¤ì–´ì¼€ì–´ ì „ìš© í”„ë¡¬í”„íŠ¸ í–¥ìƒ
            const enhancedPrompt = `Professional haircare related image: ${prompt}. High quality, clean background, professional lighting, modern hair salon setting.`;
            
            const response = await fetch(this.config.openai.imageURL, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${this.config.openai.apiKey}`
                },
                body: JSON.stringify({
                    model: 'dall-e-3',
                    prompt: enhancedPrompt,
                    size: options.size || '1024x1024',
                    quality: options.quality || 'standard',
                    n: 1
                })
            });
            
            if (!response.ok) {
                const errorText = await response.text();
                throw new Error(`OpenAI API ì˜¤ë¥˜ (${response.status}): ${errorText}`);
            }
            
            const result = await response.json();
            const responseTime = Date.now() - startTime;
            
            this.updateStatistics(true, responseTime);
            console.log(`âœ… ì´ë¯¸ì§€ ìƒì„± ì™„ë£Œ: "${prompt}"`);
            
            return {
                success: true,
                data: {
                    imageUrl: result.data[0].url,
                    prompt: enhancedPrompt,
                    originalPrompt: prompt
                },
                service: 'openai',
                responseTime: responseTime
            };
            
        } catch (error) {
            this.updateStatistics(false);
            console.error('âŒ ì´ë¯¸ì§€ ìƒì„± ì‹¤íŒ¨:', error);
            
            // ì‹¤íŒ¨ì‹œ í”Œë ˆì´ìŠ¤í™€ë” ì´ë¯¸ì§€ ë°˜í™˜
            return {
                success: false,
                error: error.message,
                fallbackUrl: `https://via.placeholder.com/512x512/667eea/ffffff?text=${encodeURIComponent(prompt.substring(0, 20))}`,
                service: 'openai'
            };
        }
    }
    
    // ===== í’ˆì§ˆ ê²€ì‚¬ =====
    async checkQuality(content, title, keywords = []) {
        try {
            const analysis = this.analyzeQuality(content, title, keywords);
            
            console.log(`ğŸ“Š í’ˆì§ˆ ê²€ì‚¬ ì™„ë£Œ: ${analysis.overall}/100ì `);
            
            return {
                success: true,
                data: analysis,
                service: 'local'
            };
            
        } catch (error) {
            console.error('âŒ í’ˆì§ˆ ê²€ì‚¬ ì‹¤íŒ¨:', error);
            
            return {
                success: false,
                error: error.message,
                service: 'local'
            };
        }
    }
    
    // ===== í’ˆì§ˆ ë¶„ì„ =====
    analyzeQuality(content, title, keywords = []) {
        const wordCount = content.length;
        const sentences = content.split(/[.!?]/).filter(s => s.trim().length > 0);
        const paragraphs = content.split(/\n\s*\n/).filter(p => p.trim().length > 0);
        const headings = (content.match(/^#+\s/gm) || []).length;
        
        // ì ìˆ˜ ê³„ì‚°
        let wordCountScore = 0;
        if (wordCount >= 1500 && wordCount <= 2500) wordCountScore = 100;
        else if (wordCount >= 1000) wordCountScore = 80;
        else if (wordCount >= 500) wordCountScore = 60;
        else wordCountScore = 30;
        
        let readabilityScore = 100;
        if (sentences.length > 0) {
            const avgWordsPerSentence = wordCount / sentences.length;
            if (avgWordsPerSentence > 30) readabilityScore = 60;
            else if (avgWordsPerSentence > 20) readabilityScore = 80;
        }
        
        let structureScore = 0;
        if (headings >= 3) structureScore += 40;
        if (paragraphs >= 5) structureScore += 30;
        if (content.includes('**')) structureScore += 20;
        if (content.includes('- ')) structureScore += 10;
        
        let keywordScore = 50; // ê¸°ë³¸ê°’
        if (keywords.length > 0) {
            const density = this.calculateKeywordDensity(content, keywords);
            if (density >= 1.5 && density <= 4.0) keywordScore = 100;
            else if (density >= 1.0 && density <= 5.0) keywordScore = 75;
        }
        
        const overall = Math.round(
            (wordCountScore * 0.25) +
            (readabilityScore * 0.25) +
            (structureScore * 0.25) +
            (keywordScore * 0.25)
        );
        
        return {
            overall,
            wordCount: wordCountScore,
            readability: readabilityScore,
            structure: structureScore,
            keywordDensity: keywordScore,
            details: {
                wordCount,
                sentences: sentences.length,
                paragraphs: paragraphs.length,
                headings
            },
            recommendations: this.generateRecommendations(overall, {
                wordCountScore,
                readabilityScore,
                structureScore,
                keywordScore
            })
        };
    }
    
    // ===== í‚¤ì›Œë“œ ë°€ë„ ê³„ì‚° =====
    calculateKeywordDensity(content, keywords) {
        const totalChars = content.length;
        let keywordCount = 0;
        
        keywords.forEach(keyword => {
            const regex = new RegExp(keyword, 'gi');
            keywordCount += (content.match(regex) || []).length;
        });
        
        return (keywordCount / totalChars) * 100;
    }
    
    // ===== ê°œì„  ì¶”ì²œì‚¬í•­ ìƒì„± =====
    generateRecommendations(overallScore, scores) {
        const recommendations = [];
        
        if (scores.wordCountScore < 70) {
            recommendations.push('ê¸€ ê¸¸ì´ë¥¼ 1500ì ì´ìƒìœ¼ë¡œ ëŠ˜ë ¤ì£¼ì„¸ìš”.');
        }
        
        if (scores.readabilityScore < 70) {
            recommendations.push('ë¬¸ì¥ì„ ë” ì§§ê³  ëª…í™•í•˜ê²Œ ì‘ì„±í•´ì£¼ì„¸ìš”.');
        }
        
        if (scores.structureScore < 60) {
            recommendations.push('ì†Œì œëª©ê³¼ ëª©ë¡ì„ ë” ì¶”ê°€í•´ì£¼ì„¸ìš”.');
        }
        
        if (scores.keywordScore < 70) {
            recommendations.push('í‚¤ì›Œë“œë¥¼ ë” ìì—°ìŠ¤ëŸ½ê²Œ í¬í•¨í•´ì£¼ì„¸ìš”.');
        }
        
        if (overallScore >= 85) {
            recommendations.push('í›Œë¥­í•œ í’ˆì§ˆì˜ ê¸€ì…ë‹ˆë‹¤! ë„¤ì´ë²„ ìƒìœ„ ë…¸ì¶œ ê°€ëŠ¥ì„±ì´ ë†’ìŠµë‹ˆë‹¤.');
        }
        
        return recommendations;
    }
    
    // ===== ë©”íƒ€ ì„¤ëª… ìƒì„± =====
    generateMetaDescription(content) {
        const firstParagraph = content.split('\n\n')[0] || '';
        let metaDesc = firstParagraph.replace(/[#*`]/g, '').trim();
        
        if (metaDesc.length > 150) {
            metaDesc = metaDesc.substring(0, 147) + '...';
        }
        
        return metaDesc;
    }
    
    // ===== ì‹œë®¬ë ˆì´ì…˜ ì½˜í…ì¸  ìƒì„± (API ì‹¤íŒ¨ ì‹œ) =====
    generateMockContent(queueItem) {
        const mockContent = this.createMockBlogContent(queueItem);
        
        return {
            title: queueItem.title,
            content: mockContent,
            metaDescription: this.generateMetaDescription(mockContent),
            keywords: queueItem.keywords,
            targetAudience: queueItem.targetAudience,
            tone: queueItem.tone,
            wordCount: mockContent.length
        };
    }
    
    // ëª¨ì˜ ë¸”ë¡œê·¸ ì½˜í…ì¸  ìƒì„±
    createMockBlogContent(queueItem) {
        const templates = {
            "ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œ ì™„ë²½ ê´€ë¦¬ë²•": `
## ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œ, ì´ë ‡ê²Œ ê´€ë¦¬í•˜ì„¸ìš”!

ì¶”ìš´ ê²¨ìš¸ì´ ë‹¤ê°€ì˜¤ë©´ì„œ ë§ì€ ë¶„ë“¤ì´ **ëª¨ë°œ ê±´ì¡°**ë¡œ ê³ ë¯¼ì´ ë§ìœ¼ì‹¤ í…ë°ìš”. íŠ¹íˆ ${queueItem.targetAudience}ì—ê²ŒëŠ” ë”ìš± ì‹ ê²½ ì“°ì´ëŠ” ë¶€ë¶„ì¼ ê²ƒì…ë‹ˆë‹¤.

### 1. ê²¨ìš¸ì²  ëª¨ë°œì´ ê±´ì¡°í•´ì§€ëŠ” ì´ìœ 

**ë‚®ì€ ìŠµë„**ì™€ **ì°¨ê°€ìš´ ë°”ëŒ**, ê·¸ë¦¬ê³  **ì‹¤ë‚´ ë‚œë°©**ìœ¼ë¡œ ì¸í•´ ëª¨ë°œì˜ **ìˆ˜ë¶„**ì´ ë¹ ë¥´ê²Œ ì¦ë°œí•©ë‹ˆë‹¤. 

- ì‹¤ë‚´ì™¸ ì˜¨ë„ì°¨ë¡œ ì¸í•œ ëª¨ë°œ ìŠ¤íŠ¸ë ˆìŠ¤
- ì •ì „ê¸° ë°œìƒìœ¼ë¡œ ì¸í•œ **íí‹°í´ ì†ìƒ**
- í—¤ì–´ë“œë¼ì´ì–´ ê³¼ë„í•œ ì‚¬ìš©

### 2. íš¨ê³¼ì ì¸ í—¤ì–´ì¼€ì–´ ë°©ë²•

#### ğŸ§´ ì˜¬ë°”ë¥¸ ìƒ´í‘¸ ì„ íƒ
- **ë³´ìŠµí˜• ìƒ´í‘¸** ì‚¬ìš©í•˜ê¸°
- **í™©ì‚°ê³„ ì„±ë¶„** í”¼í•˜ê¸°
- ë¯¸ì§€ê·¼í•œ ë¬¼ë¡œ ê°ê¸°

#### ğŸ’†â€â™€ï¸ ë”¥ì»¨ë””ì…”ë‹ ì¼€ì–´
- ì£¼ 2-3íšŒ **í—¤ì–´íŒ©** ì‚¬ìš©
- **ì•„ë¥´ê°„ì˜¤ì¼**ì´ë‚˜ **ì½”ì½”ë„›ì˜¤ì¼** í™œìš©
- ëë¶€ë¶„ ì§‘ì¤‘ ì¼€ì–´

### 3. ì¼ìƒ ê´€ë¦¬ íŒ

**ì‹¤ë‚´ ìŠµë„**ë¥¼ 40-60%ë¡œ ìœ ì§€í•˜ê³ , ì™¸ì¶œ ì‹œì—ëŠ” **ëª¨ì**ë‚˜ **ìŠ¤ì¹´í”„**ë¡œ ëª¨ë°œì„ ë³´í˜¸í•˜ì„¸ìš”.

### 4. ì¶”ì²œ ì œí’ˆ

HAIRGATORì˜ **ìœˆí„° ì¼€ì–´ ë¼ì¸**ì„ ì‚¬ìš©í•˜ì‹œë©´ ê²¨ìš¸ì²  ê±´ì¡°í•œ ëª¨ë°œë„ ì´‰ì´‰í•˜ê²Œ ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ì˜¬ë°”ë¥¸ **í—¤ì–´ì¼€ì–´** ìŠµê´€ìœ¼ë¡œ ê±´ê°•í•˜ê³  ìœ¤ê¸°ë‚˜ëŠ” ëª¨ë°œì„ ìœ ì§€í•˜ì„¸ìš”! 
`,

            "ê³ ê° ì¬ë°©ë¬¸ìœ¨ 200% ë†’ì´ëŠ” ìƒë‹´ ë…¸í•˜ìš°": `
## ê³ ê° ì¬ë°©ë¬¸ìœ¨ì„ ë†’ì´ëŠ” í—¤ì–´ìƒµ ìƒë‹´ì˜ ë¹„ë°€

í—¤ì–´ìƒµ ìš´ì˜ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ê²ƒì€ ë°”ë¡œ **ê³ ê° ë§Œì¡±**ê³¼ **ì¬ë°©ë¬¸ìœ¨**ì…ë‹ˆë‹¤. ${queueItem.targetAudience}ë¥¼ ìœ„í•œ ì‹¤ì „ ë…¸í•˜ìš°ë¥¼ ê³µìœ í•´ë“œë¦½ë‹ˆë‹¤.

### 1. ì²« ìƒë‹´ì´ ëª¨ë“  ê²ƒì„ ê²°ì •í•œë‹¤

**ì²«ì¸ìƒ**ì€ 3ì´ˆ ë§Œì— ê²°ì •ë©ë‹ˆë‹¤. ê³ ê°ì´ ë§¤ì¥ì— ë“¤ì–´ì„œëŠ” ìˆœê°„ë¶€í„° ì„¸ì‹¬í•œ ë°°ë ¤ê°€ í•„ìš”í•©ë‹ˆë‹¤.

- ë”°ëœ»í•œ ì¸ì‚¬ì™€ ë¯¸ì†Œ
- **ê³ ê°ì˜ ì´ë¦„** ê¸°ì–µí•˜ê¸°
- í¸ì•ˆí•œ ë¶„ìœ„ê¸° ì¡°ì„±

### 2. íš¨ê³¼ì ì¸ ìƒë‹´ í”„ë¡œì„¸ìŠ¤

#### ğŸ“‹ ìƒë‹´ ë‹¨ê³„ë³„ ê°€ì´ë“œ

1. **ê²½ì²­í•˜ê¸°**: ê³ ê°ì˜ ìš”êµ¬ì‚¬í•­ íŒŒì•…
2. **ì œì•ˆí•˜ê¸°**: ì „ë¬¸ê°€ì  ì¡°ì–¸ ì œê³µ
3. **í™•ì¸í•˜ê¸°**: ìµœì¢… ê²°ì • ì „ ì¬í™•ì¸

#### ğŸ’¡ ìƒë‹´ ì‹œ ì£¼ì˜ì‚¬í•­
- ê³¼ë„í•œ ê¶Œìœ  í”¼í•˜ê¸°
- **ê³ ê° ì˜ˆì‚°** ê³ ë ¤í•˜ê¸°
- ì •ì§í•œ ì¡°ì–¸ ì œê³µ

### 3. ì‹ ë¢° ê´€ê³„ êµ¬ì¶• ë°©ë²•

**ì „ë¬¸ì„±**ì„ ë°”íƒ•ìœ¼ë¡œ í•œ ì§„ì •ì„± ìˆëŠ” ìƒë‹´ì´ ê³ ê°ì˜ ë§ˆìŒì„ ì›€ì§ì…ë‹ˆë‹¤.

### 4. ì‚¬í›„ ê´€ë¦¬ì˜ ì¤‘ìš”ì„±

ì‹œìˆ  í›„ì—ë„ ì§€ì†ì ì¸ **ì¼€ì–´ ë°©ë²•** ì•ˆë‚´ì™€ **ì •ê¸°ì ì¸ ì—°ë½**ìœ¼ë¡œ ê³ ê°ê³¼ì˜ ê´€ê³„ë¥¼ ìœ ì§€í•˜ì„¸ìš”.

## ì„±ê³µí•˜ëŠ” í—¤ì–´ìƒµì˜ ë¹„ê²°

ê³ ê° í•œ ë¶„ í•œ ë¶„ì„ ì†Œì¤‘íˆ ì—¬ê¸°ëŠ” ë§ˆìŒì´ ë°”ë¡œ **ì¬ë°©ë¬¸ìœ¨ 200% ì¦ê°€**ì˜ ë¹„ê²°ì…ë‹ˆë‹¤!
`,

            "default": `
## ${queueItem.title}

${queueItem.targetAudience}ì„ ìœ„í•œ ì „ë¬¸ì ì¸ í—¤ì–´ì¼€ì–´ ê°€ì´ë“œë¥¼ ì†Œê°œí•´ë“œë¦½ë‹ˆë‹¤.

### ì£¼ìš” í¬ì¸íŠ¸

ì´ë²ˆ ê¸€ì—ì„œëŠ” **${queueItem.keywords.join(', ')}**ì™€ ê´€ë ¨ëœ ì¤‘ìš”í•œ ì •ë³´ë“¤ì„ ${queueItem.tone} í†¤ìœ¼ë¡œ ì„¤ëª…í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤.

### 1. ê¸°ë³¸ ì´í•´

í—¤ì–´ì¼€ì–´ì˜ ê¸°ë³¸ ì›ë¦¬ë¶€í„° ì°¨ê·¼ì°¨ê·¼ ì•Œì•„ë³´ê² ìŠµë‹ˆë‹¤.

### 2. ì‹¤ì „ ì ìš©ë²•

ì¼ìƒì—ì„œ ì‰½ê²Œ ë”°ë¼í•  ìˆ˜ ìˆëŠ” **ì‹¤ìš©ì ì¸ íŒ**ë“¤ì„ ì œê³µí•´ë“œë¦½ë‹ˆë‹¤.

### 3. ì „ë¬¸ê°€ ì¡°ì–¸

HAIRGATOR ì „ë¬¸íŒ€ì´ ì¶”ì²œí•˜ëŠ” **í•µì‹¬ ë…¸í•˜ìš°**ë¥¼ ê³µìœ í•©ë‹ˆë‹¤.

### 4. ì£¼ì˜ì‚¬í•­

ì¼€ì–´ ì‹œ ë°˜ë“œì‹œ ì•Œì•„ë‘ì–´ì•¼ í•  **ì¤‘ìš”í•œ í¬ì¸íŠ¸**ë“¤ì…ë‹ˆë‹¤.

## ë§ˆë¬´ë¦¬

ì˜¬ë°”ë¥¸ í—¤ì–´ì¼€ì–´ë¡œ ê±´ê°•í•˜ê³  ì•„ë¦„ë‹¤ìš´ ëª¨ë°œì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!

---
*HAIRGATORì™€ í•¨ê»˜í•˜ëŠ” ì „ë¬¸ í—¤ì–´ì¼€ì–´*
`
        };
        
        return templates[queueItem.title] || templates["default"];
    }
    
    // ===== ê¸°ì¡´ í•¨ìˆ˜ë“¤ ê³„ì†... =====
    async testConnection(service = 'claude') {
        try {
            if (service === 'claude') {
                // Claude ì—°ê²° í…ŒìŠ¤íŠ¸
                const response = await fetch(this.config.claude.baseURL, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'x-api-key': this.config.claude.apiKey,
                        'anthropic-version': '2023-06-01'
                    },
                    body: JSON.stringify({
                        model: this.config.claude.model,
                        max_tokens: 100,
                        messages: [{
                            role: 'user',
                            content: 'ì•ˆë…•í•˜ì„¸ìš”'
                        }]
                    })
                });
                
                return {
                    success: response.ok,
                    service: 'claude',
                    message: response.ok ? 'Claude ì—°ê²° ì„±ê³µ' : `Claude ì—°ê²° ì‹¤íŒ¨ (${response.status})`
                };
                
            } else if (service === 'openai') {
                // OpenAI ì—°ê²° í…ŒìŠ¤íŠ¸ (ê°„ë‹¨í•œ í…ìŠ¤íŠ¸ ì™„ì„±ìœ¼ë¡œ í…ŒìŠ¤íŠ¸)
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${this.config.openai.apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-3.5-turbo',
                        messages: [{
                            role: 'user',
                            content: 'ì•ˆë…•í•˜ì„¸ìš”'
                        }],
                        max_tokens: 50
                    })
                });
                
                return {
                    success: response.ok,
                    service: 'openai',
                    message: response.ok ? 'OpenAI ì—°ê²° ì„±ê³µ' : `OpenAI ì—°ê²° ì‹¤íŒ¨ (${response.status})`
                };
            }
            
        } catch (error) {
            return {
                success: false,
                service: service,
                message: `ì—°ê²° í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`
            };
        }
    }
    
    // ===== í†µê³„ ì—…ë°ì´íŠ¸ =====
    updateStatistics(success, responseTime = 0) {
        this.statistics.totalRequests++;
        this.statistics.lastRequestTime = new Date().toISOString();
        
        if (success) {
            this.statistics.successfulRequests++;
            
            // í‰ê·  ì‘ë‹µ ì‹œê°„ ê³„ì‚°
            if (responseTime > 0) {
                const currentAvg = this.statistics.averageResponseTime;
                const totalSuccessful = this.statistics.successfulRequests;
                this.statistics.averageResponseTime = 
                    ((currentAvg * (totalSuccessful - 1)) + responseTime) / totalSuccessful;
            }
        } else {
            this.statistics.failedRequests++;
        }
    }
    
    // ===== í†µê³„ ì¡°íšŒ =====
    getStatistics() {
        return {
            ...this.statistics,
            successRate: this.statistics.totalRequests > 0 ? 
                Math.round((this.statistics.successfulRequests / this.statistics.totalRequests) * 100) : 0
        };
    }
    
    // ===== ì„œë¹„ìŠ¤ ì„¤ì • =====
    setCurrentService(service) {
        if (['claude', 'openai'].includes(service)) {
            this.statistics.currentService = service;
            console.log(`ğŸ”„ AI ì„œë¹„ìŠ¤ ë³€ê²½: ${service.toUpperCase()}`);
            return true;
        }
        return false;
    }
    
    // ===== í—¬ìŠ¤ ì²´í¬ =====
    async healthCheck() {
        const claudeTest = await this.testConnection('claude');
        const openaiTest = await this.testConnection('openai');
        
        return {
            timestamp: new Date().toISOString(),
            claude: claudeTest.success,
            openai: openaiTest.success,
            statistics: this.getStatistics()
        };
    }
}

// AI ì„œë¹„ìŠ¤ ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ë° ì „ì—­ ë“±ë¡
const AIService = new HairGatorAIService();

// ì „ì—­ì—ì„œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì •
window.AIService = AIService;
window.HairGatorAI = AIService; // í•˜ìœ„ í˜¸í™˜ì„±

// ëª¨ë“ˆ ë‚´ë³´ë‚´ê¸°
if (typeof module !== 'undefined' && module.exports) {
    module.exports = HairGatorAIService;
}

console.log('ğŸ¤– HAIRGATOR AI ì„œë¹„ìŠ¤ ë¡œë“œ ì™„ë£Œ');
console.log('ğŸ“ Claude API: ë¸”ë¡œê·¸ ê¸€ ì‘ì„± ì „ìš©');
console.log('ğŸ¨ OpenAI API: ì´ë¯¸ì§€ ìƒì„± ì „ìš©');
console.log('ğŸ”— app.jsì™€ ì™„ë²½ í˜¸í™˜ ëª¨ë“œ');
